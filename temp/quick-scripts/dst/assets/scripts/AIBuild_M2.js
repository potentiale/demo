
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/AIBuild_M2.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '8c5cbprqwpGNZ5MoaEsHW1s', 'AIBuild_M2');
// scripts/AIBuild_M2.js

"use strict";

var e = require;
var t = module;
var o = exports;
"use strict";

var _n,
    i = void 0 && (void 0).__extends || (_n = function n(e, t) {
  return (_n = Object.setPrototypeOf || {
    __proto__: []
  } instanceof Array && function (e, t) {
    e.__proto__ = t;
  } || function (e, t) {
    for (var o in t) {
      Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]);
    }
  })(e, t);
}, function (e, t) {
  function o() {
    this.constructor = e;
  }

  _n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o());
}),
    a = void 0 && (void 0).__decorate || function (e, t, o, n) {
  var i,
      a = arguments.length,
      r = a < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n;
  if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) r = Reflect.decorate(e, t, o, n);else for (var s = e.length - 1; 0 <= s; s--) {
    (i = e[s]) && (r = (a < 3 ? i(r) : 3 < a ? i(t, o, r) : i(t, o)) || r);
  }
  return 3 < a && r && Object.defineProperty(t, o, r), r;
};

Object.defineProperty(o, "__esModule", {
  value: !0
});
var r,
    s = e("AppCommon"),
    c = e("ListenID"),
    l = e("Cfg"),
    p = e("AIBuild"),
    t = cc._decorator,
    e = t.ccclass,
    e = (t.property, r = p["default"], i(d, r), d.prototype.initState = function (e, t) {
  var o = this;
  this._AiParameter = t, this.ower = e, this.initPolicy(), t && (cc.log("初始化所有状态:", t.name, t.id), this.schedule(this.newThink, 1), this.setAIState(p.BuildAI_Type.Check), this._isActive = !0, s["default"].CONFIG_INFO.AITag && cc.resources.load("prefab/AITest/AITag", cc.Prefab, function (e, t) {
    t = cc.instantiate(t);
    t.setParent(o.node), t._components[0].initFun.AITag(o.ower);
  }), this.buildMax = JSON.parse(t.buildingMax), this.ower.myDoor.node.on(c.ListenID.Send_Hurt, this.getHurt, this));
}, d.prototype.initPolicy = function () {
  var e,
      t = this.ower.myBed.myTerritoryMap;

  for (e in t) {
    for (var o in t[e]) {
      var n = t[e][o];
      this.pointSeting[n.name ? "attack" : "other"].push({
        x: e,
        y: o,
        sort: +n.name || 0
      });
    }
  }

  this.pointSeting.attack = s["default"].arrCompare(this.pointSeting.attack, "sort", 0), this.getPolicy.resource[0] = this.ower.myBed.attribute.buildingID;
}, d.prototype.newThink = function () {
  if (this._isActive && !s["default"].GScene.isPause && this.currentState == p.BuildAI_Type.Check) {
    this._thinkNum++;
    var e = void 0,
        t = void 0;

    if (this.searchRole(), this.checkSConstruct(), 1 != this._thinkNum) {
      if (2 == this._thinkNum) return e = l.Cfg.Building1.get(s["default"].GetArrTarge([261, 271])), a = this.checkSpace("other", e), void this.newOperation({
        type: p.BuildAIOperation_Type.Build,
        pos: a,
        arcCfg: e
      });
      var o,
          n = this.checkAdvantage(),
          i = this.getWeight(this.getPolicy.first, this._AiParameter["type" + n]);
      i && this.checkPolicy(i.id) && (o = this.getPolicy[i.id], (n = this.getWeight(o, this._AiParameter[i.id + n])) && ("number" == typeof n.id ? t = s["default"].MapClr.arcIDList[n.id].id : 0 < n.id.length && (t = s["default"].MapClr.arcIDList[s["default"].GetArrTarge(n.id)].id), t && (e = l.Cfg.Building1.get(t), this.checkLimt(e) || !this.checkRoomIsSpace() ? (n = this.getNotMaxArc(e)) ? (t = l.Cfg.Building1.get(+n.attribute.data.id + 1)) && this.checkOperation({
        type: p.BuildAIOperation_Type.Up,
        arcTag: n,
        arcCfg: t
      }) : this.renounceTarget(i.id, e) : (a = this.checkSpace(i.id, e)) && this.checkOperation({
        type: p.BuildAIOperation_Type.Build,
        pos: a,
        arcCfg: e
      }))));
    } else {
      var e = l.Cfg.Building1.get(50),
          a = this.checkSpace("attack", e);
      this.newOperation({
        type: p.BuildAIOperation_Type.Build,
        pos: a,
        arcCfg: e
      });
    }
  }
}, d.prototype.checkSConstruct = function () {
  var e,
      n = this,
      i = s["default"].gettimestamp() - this.ower._initTime,
      a = this;

  for (e in this.getPolicy.specialtower) {
    var t = function (e) {
      var t = a.getPolicy.specialtower[e];
      if (!t) return "continue";

      if (i > a._AiParameter.specialtower[e]) {
        var o = l.Cfg.Building1.get(s["default"].MapClr.arcIDList[t].id);
        return a.unlockSConstruct(o, function () {
          n.renounceTarget("specialtower", o);
        }), {
          value: void 0
        };
      }
    }(e);

    if ("object" == typeof t) return t.value;
  }
}, d.prototype.checkAdvantage = function () {
  var e,
      t = this._enemy.myBed.myTerritoryMap,
      o = 0,
      n = 0;

  for (e in t) {
    for (var i in t[e]) {
      i = t[e][i];
      i.arc && 0 <= [17, 18, 19].indexOf(i.arc.attribute.buildingType) && (o += (i = l.Cfg.Ghost1.get(i.arc.attribute.data.parameter[0])).hp, n += i.atk);
    }
  }

  return this.ower.myCapabilities.hp / n > o / (this.ower.myCapabilities.atk || .1) ? 1 : 2;
}, d.prototype.searchRole = function () {
  if (!this._enemy) for (var e in s["default"].MapClr.roleList) {
    e = s["default"].MapClr.roleList[e];
    if (e.roleID != this.ower.roleID) return void (this._enemy = e);
  }
}, a([e], d));

function d() {
  var e = null !== r && r.apply(this, arguments) || this;
  return e._isActive = !1, e.statesList = [], e.toleranceTime = 30, e.pointSeting = {
    attack: [],
    other: []
  }, e.getPolicy = {
    first: ["resource", "defend", "attack", "monster"],
    resource: [1, 5, 6, 13],
    defend: [4, 10, 12],
    attack: [3, [18, 19, 20]],
    monster: [21, 22, 23],
    specialtower: [24, 25]
  }, e._thinkNum = 0, e._time = 0, e;
}

o["default"] = e;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0c1xcQUlCdWlsZF9NMi5qcyJdLCJuYW1lcyI6WyJlIiwicmVxdWlyZSIsInQiLCJtb2R1bGUiLCJvIiwiZXhwb3J0cyIsIm4iLCJpIiwiX19leHRlbmRzIiwiT2JqZWN0Iiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJBcnJheSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImNvbnN0cnVjdG9yIiwiY3JlYXRlIiwiYSIsIl9fZGVjb3JhdGUiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJyIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiUmVmbGVjdCIsImRlY29yYXRlIiwicyIsImRlZmluZVByb3BlcnR5IiwidmFsdWUiLCJjIiwibCIsInAiLCJjYyIsIl9kZWNvcmF0b3IiLCJjY2NsYXNzIiwicHJvcGVydHkiLCJkIiwiaW5pdFN0YXRlIiwiX0FpUGFyYW1ldGVyIiwib3dlciIsImluaXRQb2xpY3kiLCJsb2ciLCJuYW1lIiwiaWQiLCJzY2hlZHVsZSIsIm5ld1RoaW5rIiwic2V0QUlTdGF0ZSIsIkJ1aWxkQUlfVHlwZSIsIkNoZWNrIiwiX2lzQWN0aXZlIiwiQ09ORklHX0lORk8iLCJBSVRhZyIsInJlc291cmNlcyIsImxvYWQiLCJQcmVmYWIiLCJpbnN0YW50aWF0ZSIsInNldFBhcmVudCIsIm5vZGUiLCJfY29tcG9uZW50cyIsImluaXRGdW4iLCJidWlsZE1heCIsIkpTT04iLCJwYXJzZSIsImJ1aWxkaW5nTWF4IiwibXlEb29yIiwib24iLCJMaXN0ZW5JRCIsIlNlbmRfSHVydCIsImdldEh1cnQiLCJteUJlZCIsIm15VGVycml0b3J5TWFwIiwicG9pbnRTZXRpbmciLCJwdXNoIiwieCIsInkiLCJzb3J0IiwiYXR0YWNrIiwiYXJyQ29tcGFyZSIsImdldFBvbGljeSIsInJlc291cmNlIiwiYXR0cmlidXRlIiwiYnVpbGRpbmdJRCIsIkdTY2VuZSIsImlzUGF1c2UiLCJjdXJyZW50U3RhdGUiLCJfdGhpbmtOdW0iLCJzZWFyY2hSb2xlIiwiY2hlY2tTQ29uc3RydWN0IiwiQ2ZnIiwiQnVpbGRpbmcxIiwiZ2V0IiwiR2V0QXJyVGFyZ2UiLCJjaGVja1NwYWNlIiwibmV3T3BlcmF0aW9uIiwidHlwZSIsIkJ1aWxkQUlPcGVyYXRpb25fVHlwZSIsIkJ1aWxkIiwicG9zIiwiYXJjQ2ZnIiwiY2hlY2tBZHZhbnRhZ2UiLCJnZXRXZWlnaHQiLCJmaXJzdCIsImNoZWNrUG9saWN5IiwiTWFwQ2xyIiwiYXJjSURMaXN0IiwiY2hlY2tMaW10IiwiY2hlY2tSb29tSXNTcGFjZSIsImdldE5vdE1heEFyYyIsImRhdGEiLCJjaGVja09wZXJhdGlvbiIsIlVwIiwiYXJjVGFnIiwicmVub3VuY2VUYXJnZXQiLCJnZXR0aW1lc3RhbXAiLCJfaW5pdFRpbWUiLCJzcGVjaWFsdG93ZXIiLCJ1bmxvY2tTQ29uc3RydWN0IiwiX2VuZW15IiwiYXJjIiwiaW5kZXhPZiIsImJ1aWxkaW5nVHlwZSIsIkdob3N0MSIsInBhcmFtZXRlciIsImhwIiwiYXRrIiwibXlDYXBhYmlsaXRpZXMiLCJyb2xlTGlzdCIsInJvbGVJRCIsImFwcGx5Iiwic3RhdGVzTGlzdCIsInRvbGVyYW5jZVRpbWUiLCJvdGhlciIsImRlZmVuZCIsIm1vbnN0ZXIiLCJfdGltZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxJQUFJQSxDQUFDLEdBQUNDLE9BQU47QUFDQSxJQUFJQyxDQUFDLEdBQUNDLE1BQU47QUFDQSxJQUFJQyxDQUFDLEdBQUNDLE9BQU47QUFDQTs7QUFBYSxJQUFJQyxFQUFKO0FBQUEsSUFBTUMsQ0FBQyxHQUFDLFVBQU0sU0FBS0MsU0FBWCxLQUF1QkYsRUFBQyxHQUFDLFdBQVNOLENBQVQsRUFBV0UsQ0FBWCxFQUFhO0FBQUMsU0FBTSxDQUFDSSxFQUFDLEdBQUNHLE1BQU0sQ0FBQ0MsY0FBUCxJQUF1QjtBQUFDQyxJQUFBQSxTQUFTLEVBQUM7QUFBWCxlQUF5QkMsS0FBekIsSUFBZ0MsVUFBU1osQ0FBVCxF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LEVBQVAsQ0FBekQ7QUFBb0VxRCxJQUFBQSxNQUFNLEVBQUMsQ0FBQyxDQUFELEVBQUcsRUFBSCxFQUFNLEVBQU4sQ0FBM0U7QUFBcUZ4RCxJQUFBQSxNQUFNLEVBQUMsQ0FBQyxDQUFELEVBQUcsQ0FBQyxFQUFELEVBQUksRUFBSixFQUFPLEVBQVAsQ0FBSCxDQUE1RjtBQUEyR3lELElBQUFBLE9BQU8sRUFBQyxDQUFDLEVBQUQsRUFBSSxFQUFKLEVBQU8sRUFBUCxDQUFuSDtBQUE4SGxCLElBQUFBLFlBQVksRUFBQyxDQUFDLEVBQUQsRUFBSSxFQUFKO0FBQTNJLEdBQWpHLEVBQXFQbkgsQ0FBQyxDQUFDcUYsU0FBRixHQUFZLENBQWpRLEVBQW1RckYsQ0FBQyxDQUFDc0ksS0FBRixHQUFRLENBQTNRLEVBQTZRdEksQ0FBcFI7QUFBc1I7O0FBQUFJLENBQUMsV0FBRCxHQUFVSixDQUFWIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgZT1yZXF1aXJlO1xudmFyIHQ9bW9kdWxlO1xudmFyIG89ZXhwb3J0cztcblwidXNlIHN0cmljdFwiO3ZhciBuLGk9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fChuPWZ1bmN0aW9uKGUsdCl7cmV0dXJuKG49T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBvIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsbykmJihlW29dPXRbb10pfSkoZSx0KX0sZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBvKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfW4oZSx0KSxlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihvLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgbyl9KSxhPXRoaXMmJnRoaXMuX19kZWNvcmF0ZXx8ZnVuY3Rpb24oZSx0LG8sbil7dmFyIGksYT1hcmd1bWVudHMubGVuZ3RoLHI9YTwzP3Q6bnVsbD09PW4/bj1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsbyk6bjtpZihcIm9iamVjdFwiPT10eXBlb2YgUmVmbGVjdCYmXCJmdW5jdGlvblwiPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSlyPVJlZmxlY3QuZGVjb3JhdGUoZSx0LG8sbik7ZWxzZSBmb3IodmFyIHM9ZS5sZW5ndGgtMTswPD1zO3MtLSkoaT1lW3NdKSYmKHI9KGE8Mz9pKHIpOjM8YT9pKHQsbyxyKTppKHQsbykpfHxyKTtyZXR1cm4gMzxhJiZyJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxvLHIpLHJ9O09iamVjdC5kZWZpbmVQcm9wZXJ0eShvLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciByLHM9ZShcIkFwcENvbW1vblwiKSxjPWUoXCJMaXN0ZW5JRFwiKSxsPWUoXCJDZmdcIikscD1lKFwiQUlCdWlsZFwiKSx0PWNjLl9kZWNvcmF0b3IsZT10LmNjY2xhc3MsZT0odC5wcm9wZXJ0eSxyPXAuZGVmYXVsdCxpKGQsciksZC5wcm90b3R5cGUuaW5pdFN0YXRlPWZ1bmN0aW9uKGUsdCl7dmFyIG89dGhpczt0aGlzLl9BaVBhcmFtZXRlcj10LHRoaXMub3dlcj1lLHRoaXMuaW5pdFBvbGljeSgpLHQmJihjYy5sb2coXCLliJ3lp4vljJbmiYDmnInnirbmgIE6XCIsdC5uYW1lLHQuaWQpLHRoaXMuc2NoZWR1bGUodGhpcy5uZXdUaGluaywxKSx0aGlzLnNldEFJU3RhdGUocC5CdWlsZEFJX1R5cGUuQ2hlY2spLHRoaXMuX2lzQWN0aXZlPSEwLHMuZGVmYXVsdC5DT05GSUdfSU5GTy5BSVRhZyYmY2MucmVzb3VyY2VzLmxvYWQoXCJwcmVmYWIvQUlUZXN0L0FJVGFnXCIsY2MuUHJlZmFiLGZ1bmN0aW9uKGUsdCl7dD1jYy5pbnN0YW50aWF0ZSh0KTt0LnNldFBhcmVudChvLm5vZGUpLHQuX2NvbXBvbmVudHNbMF0uaW5pdEZ1bi5BSVRhZyhvLm93ZXIpfSksdGhpcy5idWlsZE1heD1KU09OLnBhcnNlKHQuYnVpbGRpbmdNYXgpLHRoaXMub3dlci5teURvb3Iubm9kZS5vbihjLkxpc3RlbklELlNlbmRfSHVydCx0aGlzLmdldEh1cnQsdGhpcykpfSxkLnByb3RvdHlwZS5pbml0UG9saWN5PWZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzLm93ZXIubXlCZWQubXlUZXJyaXRvcnlNYXA7Zm9yKGUgaW4gdClmb3IodmFyIG8gaW4gdFtlXSl7dmFyIG49dFtlXVtvXTt0aGlzLnBvaW50U2V0aW5nW24ubmFtZT9cImF0dGFja1wiOlwib3RoZXJcIl0ucHVzaCh7eDplLHk6byxzb3J0OituLm5hbWV8fDB9KX10aGlzLnBvaW50U2V0aW5nLmF0dGFjaz1zLmRlZmF1bHQuYXJyQ29tcGFyZSh0aGlzLnBvaW50U2V0aW5nLmF0dGFjayxcInNvcnRcIiwwKSx0aGlzLmdldFBvbGljeS5yZXNvdXJjZVswXT10aGlzLm93ZXIubXlCZWQuYXR0cmlidXRlLmJ1aWxkaW5nSUR9LGQucHJvdG90eXBlLm5ld1RoaW5rPWZ1bmN0aW9uKCl7aWYodGhpcy5faXNBY3RpdmUmJiFzLmRlZmF1bHQuR1NjZW5lLmlzUGF1c2UmJnRoaXMuY3VycmVudFN0YXRlPT1wLkJ1aWxkQUlfVHlwZS5DaGVjayl7dGhpcy5fdGhpbmtOdW0rKzt2YXIgZT12b2lkIDAsdD12b2lkIDA7aWYodGhpcy5zZWFyY2hSb2xlKCksdGhpcy5jaGVja1NDb25zdHJ1Y3QoKSwxIT10aGlzLl90aGlua051bSl7aWYoMj09dGhpcy5fdGhpbmtOdW0pcmV0dXJuIGU9bC5DZmcuQnVpbGRpbmcxLmdldChzLmRlZmF1bHQuR2V0QXJyVGFyZ2UoWzI2MSwyNzFdKSksYT10aGlzLmNoZWNrU3BhY2UoXCJvdGhlclwiLGUpLHZvaWQgdGhpcy5uZXdPcGVyYXRpb24oe3R5cGU6cC5CdWlsZEFJT3BlcmF0aW9uX1R5cGUuQnVpbGQscG9zOmEsYXJjQ2ZnOmV9KTt2YXIgbyxuPXRoaXMuY2hlY2tBZHZhbnRhZ2UoKSxpPXRoaXMuZ2V0V2VpZ2h0KHRoaXMuZ2V0UG9saWN5LmZpcnN0LHRoaXMuX0FpUGFyYW1ldGVyW1widHlwZVwiK25dKTtpJiZ0aGlzLmNoZWNrUG9saWN5KGkuaWQpJiYobz10aGlzLmdldFBvbGljeVtpLmlkXSwobj10aGlzLmdldFdlaWdodChvLHRoaXMuX0FpUGFyYW1ldGVyW2kuaWQrbl0pKSYmKFwibnVtYmVyXCI9PXR5cGVvZiBuLmlkP3Q9cy5kZWZhdWx0Lk1hcENsci5hcmNJRExpc3Rbbi5pZF0uaWQ6MDxuLmlkLmxlbmd0aCYmKHQ9cy5kZWZhdWx0Lk1hcENsci5hcmNJRExpc3Rbcy5kZWZhdWx0LkdldEFyclRhcmdlKG4uaWQpXS5pZCksdCYmKGU9bC5DZmcuQnVpbGRpbmcxLmdldCh0KSx0aGlzLmNoZWNrTGltdChlKXx8IXRoaXMuY2hlY2tSb29tSXNTcGFjZSgpPyhuPXRoaXMuZ2V0Tm90TWF4QXJjKGUpKT8odD1sLkNmZy5CdWlsZGluZzEuZ2V0KCtuLmF0dHJpYnV0ZS5kYXRhLmlkKzEpKSYmdGhpcy5jaGVja09wZXJhdGlvbih7dHlwZTpwLkJ1aWxkQUlPcGVyYXRpb25fVHlwZS5VcCxhcmNUYWc6bixhcmNDZmc6dH0pOnRoaXMucmVub3VuY2VUYXJnZXQoaS5pZCxlKTooYT10aGlzLmNoZWNrU3BhY2UoaS5pZCxlKSkmJnRoaXMuY2hlY2tPcGVyYXRpb24oe3R5cGU6cC5CdWlsZEFJT3BlcmF0aW9uX1R5cGUuQnVpbGQscG9zOmEsYXJjQ2ZnOmV9KSkpKX1lbHNle3ZhciBlPWwuQ2ZnLkJ1aWxkaW5nMS5nZXQoNTApLGE9dGhpcy5jaGVja1NwYWNlKFwiYXR0YWNrXCIsZSk7dGhpcy5uZXdPcGVyYXRpb24oe3R5cGU6cC5CdWlsZEFJT3BlcmF0aW9uX1R5cGUuQnVpbGQscG9zOmEsYXJjQ2ZnOmV9KX19fSxkLnByb3RvdHlwZS5jaGVja1NDb25zdHJ1Y3Q9ZnVuY3Rpb24oKXt2YXIgZSxuPXRoaXMsaT1zLmRlZmF1bHQuZ2V0dGltZXN0YW1wKCktdGhpcy5vd2VyLl9pbml0VGltZSxhPXRoaXM7Zm9yKGUgaW4gdGhpcy5nZXRQb2xpY3kuc3BlY2lhbHRvd2VyKXt2YXIgdD1mdW5jdGlvbihlKXt2YXIgdD1hLmdldFBvbGljeS5zcGVjaWFsdG93ZXJbZV07aWYoIXQpcmV0dXJuXCJjb250aW51ZVwiO2lmKGk+YS5fQWlQYXJhbWV0ZXIuc3BlY2lhbHRvd2VyW2VdKXt2YXIgbz1sLkNmZy5CdWlsZGluZzEuZ2V0KHMuZGVmYXVsdC5NYXBDbHIuYXJjSURMaXN0W3RdLmlkKTtyZXR1cm4gYS51bmxvY2tTQ29uc3RydWN0KG8sZnVuY3Rpb24oKXtuLnJlbm91bmNlVGFyZ2V0KFwic3BlY2lhbHRvd2VyXCIsbyl9KSx7dmFsdWU6dm9pZCAwfX19KGUpO2lmKFwib2JqZWN0XCI9PXR5cGVvZiB0KXJldHVybiB0LnZhbHVlfX0sZC5wcm90b3R5cGUuY2hlY2tBZHZhbnRhZ2U9ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXMuX2VuZW15Lm15QmVkLm15VGVycml0b3J5TWFwLG89MCxuPTA7Zm9yKGUgaW4gdClmb3IodmFyIGkgaW4gdFtlXSl7aT10W2VdW2ldO2kuYXJjJiYwPD1bMTcsMTgsMTldLmluZGV4T2YoaS5hcmMuYXR0cmlidXRlLmJ1aWxkaW5nVHlwZSkmJihvKz0oaT1sLkNmZy5HaG9zdDEuZ2V0KGkuYXJjLmF0dHJpYnV0ZS5kYXRhLnBhcmFtZXRlclswXSkpLmhwLG4rPWkuYXRrKX1yZXR1cm4gdGhpcy5vd2VyLm15Q2FwYWJpbGl0aWVzLmhwL24+by8odGhpcy5vd2VyLm15Q2FwYWJpbGl0aWVzLmF0a3x8LjEpPzE6Mn0sZC5wcm90b3R5cGUuc2VhcmNoUm9sZT1mdW5jdGlvbigpe2lmKCF0aGlzLl9lbmVteSlmb3IodmFyIGUgaW4gcy5kZWZhdWx0Lk1hcENsci5yb2xlTGlzdCl7ZT1zLmRlZmF1bHQuTWFwQ2xyLnJvbGVMaXN0W2VdO2lmKGUucm9sZUlEIT10aGlzLm93ZXIucm9sZUlEKXJldHVybiB2b2lkKHRoaXMuX2VuZW15PWUpfX0sYShbZV0sZCkpO2Z1bmN0aW9uIGQoKXt2YXIgZT1udWxsIT09ciYmci5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXM7cmV0dXJuIGUuX2lzQWN0aXZlPSExLGUuc3RhdGVzTGlzdD1bXSxlLnRvbGVyYW5jZVRpbWU9MzAsZS5wb2ludFNldGluZz17YXR0YWNrOltdLG90aGVyOltdfSxlLmdldFBvbGljeT17Zmlyc3Q6W1wicmVzb3VyY2VcIixcImRlZmVuZFwiLFwiYXR0YWNrXCIsXCJtb25zdGVyXCJdLHJlc291cmNlOlsxLDUsNiwxM10sZGVmZW5kOls0LDEwLDEyXSxhdHRhY2s6WzMsWzE4LDE5LDIwXV0sbW9uc3RlcjpbMjEsMjIsMjNdLHNwZWNpYWx0b3dlcjpbMjQsMjVdfSxlLl90aGlua051bT0wLGUuX3RpbWU9MCxlfW8uZGVmYXVsdD1lIl19