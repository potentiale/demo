
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/AISummoned.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '393d7CbXZxK5KqGuZ4SrHdg', 'AISummoned');
// scripts/AISummoned.js

"use strict";

var e = require;
var t = module;
var o = exports;
"use strict";

var _n,
    i = void 0 && (void 0).__extends || (_n = function n(e, t) {
  return (_n = Object.setPrototypeOf || {
    __proto__: []
  } instanceof Array && function (e, t) {
    e.__proto__ = t;
  } || function (e, t) {
    for (var o in t) {
      Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]);
    }
  })(e, t);
}, function (e, t) {
  function o() {
    this.constructor = e;
  }

  _n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o());
}),
    a = void 0 && (void 0).__decorate || function (e, t, o, n) {
  var i,
      a = arguments.length,
      r = a < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n;
  if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) r = Reflect.decorate(e, t, o, n);else for (var s = e.length - 1; 0 <= s; s--) {
    (i = e[s]) && (r = (a < 3 ? i(r) : 3 < a ? i(t, o, r) : i(t, o)) || r);
  }
  return 3 < a && r && Object.defineProperty(t, o, r), r;
};

Object.defineProperty(o, "__esModule", {
  value: !0
});
var r,
    s = e("AppCommon"),
    c = e("ListenID"),
    l = e("ElementBase"),
    p = e("AIState"),
    d = e("FSMBase"),
    t = cc._decorator,
    e = t.ccclass,
    e = (t.property, r = d["default"], i(u, r), u.prototype.initState = function (e) {
  this.ower = e;
  e = this.ower;
  this._AiParameter = new p.AiParameter(), this._AiParameter.moveSpeed = e.moveSpeed, this._AiParameter.AttackRange = e.attackRange, this.statesList[p.StateType.Idle] = new p.IdleState(this), this.statesList[p.StateType.Move] = new y(this), this.statesList[p.StateType.Attack] = new g(this), this._isActive = !0, this.setAIState(p.StateType.Idle);
}, u.prototype.update = function (e) {
  s["default"].GScene.isPause || this._isActive && this.ower._isActive && this.currentStateClr.OnUpdate(e);
}, a([e], u));

function u() {
  var e = null !== r && r.apply(this, arguments) || this;
  return e._time = 0, e;
}

o["default"] = e;
var f,
    h,
    m = cc.v2(),
    y = (h = p.MoveState, i(v, h), v.prototype.OnUpdate = function (e) {
  var t,
      o = this._myTarget;
  if (!o.target || o.target._life <= 0) for (var n in s["default"].MapClr.monsterList) {
    n = s["default"].MapClr.monsterList[n];

    if (n && 0 < n._life && n._owerID != this._manager.ower._owerID) {
      o.target = n;
      break;
    }
  }
  o.target && o.target.node && (this.letV2.set(o.target.node.position), t = this._manager.node.position, this.letV2.x > o.node.x ? o.mySkeleton.node.scaleX = -1 : o.mySkeleton.node.scaleX = 1, cc.Vec2.subtract(m, this.letV2, t), cc.Vec2.normalize(m, m), cc.Vec2.multiplyScalar(m, m, this._AiParameter.moveSpeed * e), cc.Vec2.add(m, m, t), this._manager.node.setPosition(m), s["default"].getDistanceSqrt(this.letV2, m) <= Math.pow(this._AiParameter.AttackRange, 2) && this._manager.setAIState(p.StateType.Attack), o.getZIndex());
}, v),
    g = (f = p.AttackState, i(_, f), _.prototype.OnEnter = function () {
  this._myTarget.setAnimation("idle", !0), this._curAttackDelta <= 0 && (this._curAttackDelta = this._target.attackDelta), this._attackDur = 0;
}, _.prototype.OnUpdate = function (e) {
  if (!this._target.target || this._target.target._life <= 0) this._manager.setAIState(p.StateType.Move);else {
    var t;
    if (this._target.target.node.x > this._target.node.x ? this._target.mySkeleton.node.scaleX = -1 : this._target.mySkeleton.node.scaleX = 1, 0 <= this._curAttackDelta) if (this._curAttackDelta -= e, this._curAttackDelta < 0 && (t = this._myTarget.setAnimation("attack", !1), this._attackDur = t ? t.animation.duration : .2, this._attackTimes = this._attackDur - .2), s["default"].getDistanceSqrt(this._target.target.node.position, this._target.node.position) > Math.pow(this._AiParameter.AttackRange, 2)) return void this._manager.setAIState(p.StateType.Move);
    0 < this._attackDur && (this._attackDur -= e, this._attackTimes -= e, this._attackTimes <= 0 && (s["default"].MapClr.newEffects(this._target.target.node.position, "attack"), this._target.target.node.emit(c.ListenID.Send_Hurt, new l.HurtData(-this._target.attackNum, this._myTarget._owerID, this._target.type)), this._attackTimes = this._attackDur + 1), this._attackDur <= 0 && (s["default"].getDistanceSqrt(this._target.target.node.position, this._target.node.position) > Math.pow(this._AiParameter.AttackRange, 2) ? this._manager.setAIState(p.StateType.Move) : (this._curAttackDelta = this._target.attackDelta, this._myTarget.setAnimation("idle", !0))));
  }
}, _.prototype.OnExit = function () {}, _);

function _() {
  var e = null !== f && f.apply(this, arguments) || this;
  return e._curAttackDelta = 0, e._target = e._myTarget, e._attackDur = 0, e._attackTimes = 0, e;
}

function v() {
  return null !== h && h.apply(this, arguments) || this;
}

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0c1xcQUlTdW1tb25lZC5qcyJdLCJuYW1lcyI6WyJlIiwicmVxdWlyZSIsInQiLCJtb2R1bGUiLCJvIiwiZXhwb3J0cyIsIm4iLCJpIiwiX19leHRlbmRzIiwiT2JqZWN0Iiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJBcnJheSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImNvbnN0cnVjdG9yIiwiY3JlYXRlIiwiYSIsIl9fZGVjb3JhdGUiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJyIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiUmVmbGVjdCIsImRlY29yYXRlIiwicyIsImRlZmluZVByb3BlcnR5IiwidmFsdWUiLCJjIiwibCIsInAiLCJkIiwiY2MiLCJfZGVjb3JhdG9yIiwiY2NjbGFzcyIsInByb3BlcnR5IiwidSIsImluaXRTdGF0ZSIsIm93ZXIiLCJfQWlQYXJhbWV0ZXIiLCJBaVBhcmFtZXRlciIsIm1vdmVTcGVlZCIsIkF0dGFja1JhbmdlIiwiYXR0YWNrUmFuZ2UiLCJzdGF0ZXNMaXN0IiwiU3RhdGVUeXBlIiwiSWRsZSIsIklkbGVTdGF0ZSIsIk1vdmUiLCJ5IiwiQXR0YWNrIiwiZyIsIl9pc0FjdGl2ZSIsInNldEFJU3RhdGUiLCJ1cGRhdGUiLCJHU2NlbmUiLCJpc1BhdXNlIiwiY3VycmVudFN0YXRlQ2xyIiwiT25VcGRhdGUiLCJhcHBseSIsIl90aW1lIiwiZiIsImgiLCJtIiwidjIiLCJNb3ZlU3RhdGUiLCJ2IiwiX215VGFyZ2V0IiwidGFyZ2V0IiwiX2xpZmUiLCJNYXBDbHIiLCJtb25zdGVyTGlzdCIsIl9vd2VySUQiLCJfbWFuYWdlciIsIm5vZGUiLCJsZXRWMiIsInNldCIsInBvc2l0aW9uIiwieCIsIm15U2tlbGV0b24iLCJzY2FsZVgiLCJWZWMyIiwic3VidHJhY3QiLCJub3JtYWxpemUiLCJtdWx0aXBseVNjYWxhciIsImFkZCIsInNldFBvc2l0aW9uIiwiZ2V0RGlzdGFuY2VTcXJ0IiwiTWF0aCIsInBvdyIsImdldFpJbmRleCIsIkF0dGFja1N0YXRlIiwiXyIsIk9uRW50ZXIiLCJzZXRBbmltYXRpb24iLCJfY3VyQXR0YWNrRGVsdGEiLCJfdGFyZ2V0IiwiYXR0YWNrRGVsdGEiLCJfYXR0YWNrRHVyIiwiYW5pbWF0aW9uIiwiZHVyYXRpb24iLCJfYXR0YWNrVGltZXMiLCJuZXdFZmZlY3RzIiwiZW1pdCIsIkxpc3RlbklEIiwiU2VuZF9IdXJ0IiwiSHVydERhdGEiLCJhdHRhY2tOdW0iLCJ0eXBlIiwiT25FeGl0Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLElBQUlBLENBQUMsR0FBR0MsT0FBUjtBQUNBLElBQUlDLENBQUMsR0FBR0MsTUFBUjtBQUNBLElBQUlDLENBQUMsR0FBR0MsT0FBUjtBQUNBOztBQUNBLElBQUlDLEVBQUo7QUFBQSxJQUFPQyxDQUFDLEdBQUcsVUFBUSxTQUFLQyxTQUFiLEtBQTJCRixFQUFDLEdBQUcsV0FBU04sQ0FBVCxFQUFZRSxDQUFaLEVBQWU7QUFDakQsU0FBTyxDQUFDSSxFQUFDLEdBQUdHLE1BQU0sQ0FBQ0MsY0FBUCxJQUF5QjtBQUFFQyxJQUFBQSxTQUFTLEVBQUU7QUFBYixlQUN0QkMsS0FEc0IsSUFDYixVQUFTWixDQUFULEVBQVlFLENBQVosRUFBZTtBQUFFRixJQUFBQSxDQUFDLENBQUNXLFNBQUYsR0FBY1QsQ0FBZDtBQUFpQixHQUQ5QyxJQUNrRCxVQUFTRixDQUFULEVBQVlFLENBQVosRUFBZTtBQUFFLFNBQUssSUFBSUUsQ0FBVCxJQUFjRixDQUFkO0FBQWlCTyxNQUFBQSxNQUFNLENBQUNJLFNBQVAsQ0FBaUJDLGNBQWpCLENBQWdDQyxJQUFoQyxDQUFxQ2IsQ0FBckMsRUFBd0NFLENBQXhDLE1BQStDSixDQUFDLENBQUNJLENBQUQsQ0FBRCxHQUFPRixDQUFDLENBQUNFLENBQUQsQ0FBdkQ7QUFBakI7QUFBOEUsR0FEdEosRUFDd0pKLENBRHhKLEVBQzJKRSxDQUQzSixDQUFQO0FBRUgs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QyxDQUFDaUcsT0FBRixHQUFZakcsQ0FBQyxDQUFDb0UsU0FBckMsRUFBZ0RwRSxDQUFDLENBQUNtRyxVQUFGLEdBQWUsQ0FBL0QsRUFBa0VuRyxDQUFDLENBQUNzRyxZQUFGLEdBQWlCLENBQW5GLEVBQXNGdEcsQ0FBN0Y7QUFBZ0c7O0FBRXZLLFNBQVNtRSxDQUFULEdBQWE7QUFBRSxTQUFPLFNBQVNKLENBQVQsSUFBY0EsQ0FBQyxDQUFDSCxLQUFGLENBQVEsSUFBUixFQUFjeEMsU0FBZCxDQUFkLElBQTBDLElBQWpEO0FBQXVEIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgZSA9IHJlcXVpcmU7XG52YXIgdCA9IG1vZHVsZTtcbnZhciBvID0gZXhwb3J0cztcblwidXNlIHN0cmljdFwiO1xudmFyIG4sIGkgPSB0aGlzICYmIHRoaXMuX19leHRlbmRzIHx8IChuID0gZnVuY3Rpb24oZSwgdCkge1xuICAgICAgICByZXR1cm4gKG4gPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgeyBfX3Byb3RvX186IFtdIH1cbiAgICAgICAgICAgIGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24oZSwgdCkgeyBlLl9fcHJvdG9fXyA9IHQgfSB8fCBmdW5jdGlvbihlLCB0KSB7IGZvciAodmFyIG8gaW4gdCkgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsIG8pICYmIChlW29dID0gdFtvXSkgfSkoZSwgdClcbiAgICB9LCBmdW5jdGlvbihlLCB0KSB7XG4gICAgICAgIGZ1bmN0aW9uIG8oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBlIH1cbiAgICAgICAgbihlLCB0KSwgZS5wcm90b3R5cGUgPSBudWxsID09PSB0ID8gT2JqZWN0LmNyZWF0ZSh0KSA6IChvLnByb3RvdHlwZSA9IHQucHJvdG90eXBlLCBuZXcgbylcbiAgICB9KSxcbiAgICBhID0gdGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUgfHwgZnVuY3Rpb24oZSwgdCwgbywgbikge1xuICAgICAgICB2YXIgaSwgYSA9IGFyZ3VtZW50cy5sZW5ndGgsXG4gICAgICAgICAgICByID0gYSA8IDMgPyB0IDogbnVsbCA9PT0gbiA/IG4gPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsIG8pIDogbjtcbiAgICAgICAgaWYgKFwib2JqZWN0XCIgPT0gdHlwZW9mIFJlZmxlY3QgJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKSByID0gUmVmbGVjdC5kZWNvcmF0ZShlLCB0LCBvLCBuKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgZm9yICh2YXIgcyA9IGUubGVuZ3RoIC0gMTsgMCA8PSBzOyBzLS0pKGkgPSBlW3NdKSAmJiAociA9IChhIDwgMyA/IGkocikgOiAzIDwgYSA/IGkodCwgbywgcikgOiBpKHQsIG8pKSB8fCByKTtcbiAgICAgICAgcmV0dXJuIDMgPCBhICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIG8sIHIpLCByXG4gICAgfTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogITAgfSk7XG52YXIgciwgcyA9IGUoXCJBcHBDb21tb25cIiksXG4gICAgYyA9IGUoXCJMaXN0ZW5JRFwiKSxcbiAgICBsID0gZShcIkVsZW1lbnRCYXNlXCIpLFxuICAgIHAgPSBlKFwiQUlTdGF0ZVwiKSxcbiAgICBkID0gZShcIkZTTUJhc2VcIiksXG4gICAgdCA9IGNjLl9kZWNvcmF0b3IsXG4gICAgZSA9IHQuY2NjbGFzcyxcbiAgICBlID0gKHQucHJvcGVydHksIHIgPSBkLmRlZmF1bHQsIGkodSwgciksIHUucHJvdG90eXBlLmluaXRTdGF0ZSA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgdGhpcy5vd2VyID0gZTtcbiAgICAgICAgZSA9IHRoaXMub3dlcjtcbiAgICAgICAgdGhpcy5fQWlQYXJhbWV0ZXIgPSBuZXcgcC5BaVBhcmFtZXRlciwgdGhpcy5fQWlQYXJhbWV0ZXIubW92ZVNwZWVkID0gZS5tb3ZlU3BlZWQsIHRoaXMuX0FpUGFyYW1ldGVyLkF0dGFja1JhbmdlID0gZS5hdHRhY2tSYW5nZSwgdGhpcy5zdGF0ZXNMaXN0W3AuU3RhdGVUeXBlLklkbGVdID0gbmV3IHAuSWRsZVN0YXRlKHRoaXMpLCB0aGlzLnN0YXRlc0xpc3RbcC5TdGF0ZVR5cGUuTW92ZV0gPSBuZXcgeSh0aGlzKSwgdGhpcy5zdGF0ZXNMaXN0W3AuU3RhdGVUeXBlLkF0dGFja10gPSBuZXcgZyh0aGlzKSwgdGhpcy5faXNBY3RpdmUgPSAhMCwgdGhpcy5zZXRBSVN0YXRlKHAuU3RhdGVUeXBlLklkbGUpXG4gICAgfSwgdS5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24oZSkgeyBzLmRlZmF1bHQuR1NjZW5lLmlzUGF1c2UgfHwgdGhpcy5faXNBY3RpdmUgJiYgdGhpcy5vd2VyLl9pc0FjdGl2ZSAmJiB0aGlzLmN1cnJlbnRTdGF0ZUNsci5PblVwZGF0ZShlKSB9LCBhKFtlXSwgdSkpO1xuXG5mdW5jdGlvbiB1KCkgeyB2YXIgZSA9IG51bGwgIT09IHIgJiYgci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7IHJldHVybiBlLl90aW1lID0gMCwgZSB9XG5vLmRlZmF1bHQgPSBlO1xudmFyIGYsIGgsIG0gPSBjYy52MigpLFxuICAgIHkgPSAoaCA9IHAuTW92ZVN0YXRlLCBpKHYsIGgpLCB2LnByb3RvdHlwZS5PblVwZGF0ZSA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgdmFyIHQsIG8gPSB0aGlzLl9teVRhcmdldDtcbiAgICAgICAgaWYgKCFvLnRhcmdldCB8fCBvLnRhcmdldC5fbGlmZSA8PSAwKVxuICAgICAgICAgICAgZm9yICh2YXIgbiBpbiBzLmRlZmF1bHQuTWFwQ2xyLm1vbnN0ZXJMaXN0KSB7IG4gPSBzLmRlZmF1bHQuTWFwQ2xyLm1vbnN0ZXJMaXN0W25dOyBpZiAobiAmJiAwIDwgbi5fbGlmZSAmJiBuLl9vd2VySUQgIT0gdGhpcy5fbWFuYWdlci5vd2VyLl9vd2VySUQpIHsgby50YXJnZXQgPSBuOyBicmVhayB9IH1cbiAgICAgICAgby50YXJnZXQgJiYgby50YXJnZXQubm9kZSAmJiAodGhpcy5sZXRWMi5zZXQoby50YXJnZXQubm9kZS5wb3NpdGlvbiksIHQgPSB0aGlzLl9tYW5hZ2VyLm5vZGUucG9zaXRpb24sIHRoaXMubGV0VjIueCA+IG8ubm9kZS54ID8gby5teVNrZWxldG9uLm5vZGUuc2NhbGVYID0gLTEgOiBvLm15U2tlbGV0b24ubm9kZS5zY2FsZVggPSAxLCBjYy5WZWMyLnN1YnRyYWN0KG0sIHRoaXMubGV0VjIsIHQpLCBjYy5WZWMyLm5vcm1hbGl6ZShtLCBtKSwgY2MuVmVjMi5tdWx0aXBseVNjYWxhcihtLCBtLCB0aGlzLl9BaVBhcmFtZXRlci5tb3ZlU3BlZWQgKiBlKSwgY2MuVmVjMi5hZGQobSwgbSwgdCksIHRoaXMuX21hbmFnZXIubm9kZS5zZXRQb3NpdGlvbihtKSwgcy5kZWZhdWx0LmdldERpc3RhbmNlU3FydCh0aGlzLmxldFYyLCBtKSA8PSBNYXRoLnBvdyh0aGlzLl9BaVBhcmFtZXRlci5BdHRhY2tSYW5nZSwgMikgJiYgdGhpcy5fbWFuYWdlci5zZXRBSVN0YXRlKHAuU3RhdGVUeXBlLkF0dGFjayksIG8uZ2V0WkluZGV4KCkpXG4gICAgfSwgdiksXG4gICAgZyA9IChmID0gcC5BdHRhY2tTdGF0ZSwgaShfLCBmKSwgXy5wcm90b3R5cGUuT25FbnRlciA9IGZ1bmN0aW9uKCkgeyB0aGlzLl9teVRhcmdldC5zZXRBbmltYXRpb24oXCJpZGxlXCIsICEwKSwgdGhpcy5fY3VyQXR0YWNrRGVsdGEgPD0gMCAmJiAodGhpcy5fY3VyQXR0YWNrRGVsdGEgPSB0aGlzLl90YXJnZXQuYXR0YWNrRGVsdGEpLCB0aGlzLl9hdHRhY2tEdXIgPSAwIH0sIF8ucHJvdG90eXBlLk9uVXBkYXRlID0gZnVuY3Rpb24oZSkge1xuICAgICAgICBpZiAoIXRoaXMuX3RhcmdldC50YXJnZXQgfHwgdGhpcy5fdGFyZ2V0LnRhcmdldC5fbGlmZSA8PSAwKSB0aGlzLl9tYW5hZ2VyLnNldEFJU3RhdGUocC5TdGF0ZVR5cGUuTW92ZSk7XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIHQ7XG4gICAgICAgICAgICBpZiAodGhpcy5fdGFyZ2V0LnRhcmdldC5ub2RlLnggPiB0aGlzLl90YXJnZXQubm9kZS54ID8gdGhpcy5fdGFyZ2V0Lm15U2tlbGV0b24ubm9kZS5zY2FsZVggPSAtMSA6IHRoaXMuX3RhcmdldC5teVNrZWxldG9uLm5vZGUuc2NhbGVYID0gMSwgMCA8PSB0aGlzLl9jdXJBdHRhY2tEZWx0YSlcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fY3VyQXR0YWNrRGVsdGEgLT0gZSwgdGhpcy5fY3VyQXR0YWNrRGVsdGEgPCAwICYmICh0ID0gdGhpcy5fbXlUYXJnZXQuc2V0QW5pbWF0aW9uKFwiYXR0YWNrXCIsICExKSwgdGhpcy5fYXR0YWNrRHVyID0gdCA/IHQuYW5pbWF0aW9uLmR1cmF0aW9uIDogLjIsIHRoaXMuX2F0dGFja1RpbWVzID0gdGhpcy5fYXR0YWNrRHVyIC0gLjIpLCBzLmRlZmF1bHQuZ2V0RGlzdGFuY2VTcXJ0KHRoaXMuX3RhcmdldC50YXJnZXQubm9kZS5wb3NpdGlvbiwgdGhpcy5fdGFyZ2V0Lm5vZGUucG9zaXRpb24pID4gTWF0aC5wb3codGhpcy5fQWlQYXJhbWV0ZXIuQXR0YWNrUmFuZ2UsIDIpKSByZXR1cm4gdm9pZCB0aGlzLl9tYW5hZ2VyLnNldEFJU3RhdGUocC5TdGF0ZVR5cGUuTW92ZSk7XG4gICAgICAgICAgICAwIDwgdGhpcy5fYXR0YWNrRHVyICYmICh0aGlzLl9hdHRhY2tEdXIgLT0gZSwgdGhpcy5fYXR0YWNrVGltZXMgLT0gZSwgdGhpcy5fYXR0YWNrVGltZXMgPD0gMCAmJiAocy5kZWZhdWx0Lk1hcENsci5uZXdFZmZlY3RzKHRoaXMuX3RhcmdldC50YXJnZXQubm9kZS5wb3NpdGlvbiwgXCJhdHRhY2tcIiksIHRoaXMuX3RhcmdldC50YXJnZXQubm9kZS5lbWl0KGMuTGlzdGVuSUQuU2VuZF9IdXJ0LCBuZXcgbC5IdXJ0RGF0YSgtdGhpcy5fdGFyZ2V0LmF0dGFja051bSwgdGhpcy5fbXlUYXJnZXQuX293ZXJJRCwgdGhpcy5fdGFyZ2V0LnR5cGUpKSwgdGhpcy5fYXR0YWNrVGltZXMgPSB0aGlzLl9hdHRhY2tEdXIgKyAxKSwgdGhpcy5fYXR0YWNrRHVyIDw9IDAgJiYgKHMuZGVmYXVsdC5nZXREaXN0YW5jZVNxcnQodGhpcy5fdGFyZ2V0LnRhcmdldC5ub2RlLnBvc2l0aW9uLCB0aGlzLl90YXJnZXQubm9kZS5wb3NpdGlvbikgPiBNYXRoLnBvdyh0aGlzLl9BaVBhcmFtZXRlci5BdHRhY2tSYW5nZSwgMikgPyB0aGlzLl9tYW5hZ2VyLnNldEFJU3RhdGUocC5TdGF0ZVR5cGUuTW92ZSkgOiAodGhpcy5fY3VyQXR0YWNrRGVsdGEgPSB0aGlzLl90YXJnZXQuYXR0YWNrRGVsdGEsIHRoaXMuX215VGFyZ2V0LnNldEFuaW1hdGlvbihcImlkbGVcIiwgITApKSkpXG4gICAgICAgIH1cbiAgICB9LCBfLnByb3RvdHlwZS5PbkV4aXQgPSBmdW5jdGlvbigpIHt9LCBfKTtcblxuZnVuY3Rpb24gXygpIHsgdmFyIGUgPSBudWxsICE9PSBmICYmIGYuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOyByZXR1cm4gZS5fY3VyQXR0YWNrRGVsdGEgPSAwLCBlLl90YXJnZXQgPSBlLl9teVRhcmdldCwgZS5fYXR0YWNrRHVyID0gMCwgZS5fYXR0YWNrVGltZXMgPSAwLCBlIH1cblxuZnVuY3Rpb24gdigpIHsgcmV0dXJuIG51bGwgIT09IGggJiYgaC5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXMgfSJdfQ==