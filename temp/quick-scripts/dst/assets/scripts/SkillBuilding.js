
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/SkillBuilding.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '322cea1GCNG4Y24fzrCfDaf', 'SkillBuilding');
// scripts/SkillBuilding.js

"use strict";

var e = require;
var t = module;
var o = exports;
"use strict";

var _n,
    i = void 0 && (void 0).__extends || (_n = function n(e, t) {
  return (_n = Object.setPrototypeOf || {
    __proto__: []
  } instanceof Array && function (e, t) {
    e.__proto__ = t;
  } || function (e, t) {
    for (var o in t) {
      Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]);
    }
  })(e, t);
}, function (e, t) {
  function o() {
    this.constructor = e;
  }

  _n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o());
}),
    a = void 0 && (void 0).__decorate || function (e, t, o, n) {
  var i,
      a = arguments.length,
      r = a < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n;
  if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) r = Reflect.decorate(e, t, o, n);else for (var s = e.length - 1; 0 <= s; s--) {
    (i = e[s]) && (r = (a < 3 ? i(r) : 3 < a ? i(t, o, r) : i(t, o)) || r);
  }
  return 3 < a && r && Object.defineProperty(t, o, r), r;
};

Object.defineProperty(o, "__esModule", {
  value: !0
});
var r,
    s = e("AppCommon"),
    c = e("CCTool"),
    l = e("ListenID"),
    p = e("ConstructBase"),
    d = e("ElementBase"),
    u = cc._decorator,
    t = u.ccclass,
    e = u.menu,
    e = (u.property, r = p["default"], i(f, r), f.prototype.onInit = function () {
  this._isHaveUpDate = !1, this.initSkillFun[this.attribute.buildingType] && this.initSkillFun[this.attribute.buildingType]();
}, f.prototype.deleteEffects = function (e) {
  e && e.active && (e._pool ? e._pool.ReturnPool(e) : (this.isEffectsUpCall = null, e.destroy(), e.removeFromParent(!1)));
}, f.prototype.onVanish = function () {
  this.deleteEffects(this.myEffects), this.onVanishFun[this.attribute.buildingType] && this.onVanishFun[this.attribute.buildingType]();
}, f.prototype.update = function (e) {
  s["default"].GScene.isPause || (this.isEffectsUpCall && this.isEffectsUpCall(), this.CDManage && this.CDManage.OnUpdate(e));
}, a([t, e("gameElement/SkillBuilding")], f));

function f() {
  var i = null !== r && r.apply(this, arguments) || this;
  return i.initSkillFun = {
    6: function _() {
      var e = i.attribute.data.parameter,
          t = i.ower.myDoor;
      i.schedule(function () {
        i._isActive && t.setLife(t.attribute.data.hp * e[1]);
      }, e[0]);
    },
    7: function _() {
      var t = s["default"].MapClr.monsterList[0],
          o = i.attribute.data.parameter;
      s["default"].MapClr.myMap.node.on(l.ListenID.Monster_Skill, function () {
        i._isActive && i.ower.roleID == t.myFSM.target.roleID && s["default"].GetProbability(o[0]) && s["default"].MapClr.newEffects(t.node.position, "ghosthand", function (e) {
          t.node && (e.zIndex = t.node.zIndex + 1, i.myEffects = e, t.setControlBody(o[1], function () {
            i.deleteEffects(e);
          }));
        });
      }, i);
    },
    8: function _() {
      var t = i.ower.myDoor,
          e = i.attribute.data.parameter;
      i.CDManage = new c.CCTool.CDManage({
        "default": e[2]
      }), i.myEffects || s["default"].MapClr.newEffects(t.node.position, "sheild", function (e) {
        t.node && (e.setParent(t.node), e.setPosition(0, 0), e.zIndex = t.node.zIndex + 3, (i.myEffects = e).active = !1);
      }), t.node.on(l.ListenID.Send_Hurt, function () {
        i._isActive && !i.myEffects.active && t._lifeRatio < e[0] && i.CDManage.Check() && (i.CDManage.Set(), i.myEffects.active = !0, t.setInvincible(e[1], function () {
          cc.log("无敌结束"), i.myEffects.active = !1;
        }));
      }, i);
    },
    9: function _() {
      i.ower._canStealMoney = !0;
    },
    10: function _() {
      i.ower._atkSpeedDown = i.attribute.data.parameter[0];
      var t = i.ower.myDoor;
      s["default"].MapClr.newEffects(t.node.position, "ice", function (e) {
        e.setParent(t.node), e.setPosition(0, 0), e.zIndex = t.node.zIndex + 1, i.myEffects = e;
      });
    },
    11: function _() {
      var t = s["default"].MapClr.monsterList[0],
          e = i.attribute.data.parameter;
      i.CDManage = new c.CCTool.CDManage({
        "default": e[0]
      }), t.node.on(l.ListenID.Monster_Flee, function () {
        i._isActive && i.ower.roleID == t.myAtkTargetID && s["default"].GetProbability(e[0]) && i.CDManage.Check() && (i.CDManage.Set(), c.CCTool.Audio.CameraPlayer(i.node.position, "Cobweb"), s["default"].MapClr.newBullet(i.node.position, {
          tag: t,
          img: "cobweb01",
          speed: 1500,
          owerID: i._owerID,
          hurtData: new d.HurtData(0),
          call: function call() {
            s["default"].MapClr.newEffects(t.node.position, "cobweb02", function (e) {
              t.node && (e.setParent(t.node), e.setPosition(0, 0), e.zIndex = t.node.zIndex + 1, i.myEffects = e);
            }), t.setControlBody(e[1], function () {
              cc.log("控制结束"), i.deleteEffects(i.myEffects);
            });
          }
        }));
      }, i);
    },
    12: function _() {
      var t = i.ower.myDoor,
          o = i.attribute.data.parameter;
      s["default"].MapClr.newEffects(t.node.position, "thorn", function (e) {
        e.setParent(t.node), e.setPosition(0, 0), e.zIndex = t.node.zIndex + 2, i.myEffects = e;
      }), t.node.on(l.ListenID.Send_Hurt, function () {
        var e;
        i._isActive && (e = s["default"].MapClr.monsterList[0]).node.emit(l.ListenID.Send_Hurt, new d.HurtData(-e.attribute.data.hp * o[0], i.ower.roleID, i.ower.type));
      }, i);
    },
    13: function _() {
      var n = s["default"].MapClr.monsterList[0],
          e = i.attribute.data.parameter;
      i.CDManage = new c.CCTool.CDManage({
        "default": e[2]
      }), n.node.on(l.ListenID.Send_Hurt, function () {
        i._isActive && n._lifeRatio < e[0] && i.ower.roleID == n.myAtkTargetID && i.CDManage.Check() && (i.CDManage.Set(), s["default"].MapClr.newEffects(i.node.position, "elec", function (o) {
          n.node && (c.CCTool.Audio.CameraPlayer(i.node.position, "Laser"), o.zIndex = n.node.zIndex + 2, i.myEffects = o, i.isEffectsUpCall = function () {
            var e = s["default"].getAngle(i.node.position, n.node.position) + 90,
                t = s["default"].getDistance(i.node.position, n.node.position);
            o.angle = e, o.height = t;
          }, n.node.emit(l.ListenID.Send_Hurt, new d.HurtData(-n.attribute.data.hp * e[1], i.ower.roleID, i.ower.type)), i.scheduleOnce(function () {
            i.deleteEffects(i.myEffects);
          }, .5));
        }));
      }, i);
    },
    14: function _() {},
    15: function _() {},
    16: function _() {}
  }, i.onVanishFun = {
    9: function _() {
      i.ower._canStealMoney = !1;
    },
    10: function _() {
      i.ower._atkSpeedDown = 0;
    }
  }, i;
}

o["default"] = e;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0c1xcU2tpbGxCdWlsZGluZy5qcyJdLCJuYW1lcyI6WyJlIiwicmVxdWlyZSIsInQiLCJtb2R1bGUiLCJvIiwiZXhwb3J0cyIsIm4iLCJpIiwiX19leHRlbmRzIiwiT2JqZWN0Iiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJBcnJheSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImNvbnN0cnVjdG9yIiwiY3JlYXRlIiwiYSIsIl9fZGVjb3JhdGUiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJyIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiUmVmbGVjdCIsImRlY29yYXRlIiwicyIsImRlZmluZVByb3BlcnR5IiwidmFsdWUiLCJjIiwibCIsInAiLCJkIiwidSIsImNjIiwiX2RlY29yYXRvciIsImNjY2xhc3MiLCJtZW51IiwicHJvcGVydHkiLCJmIiwib25Jbml0IiwiX2lzSGF2ZVVwRGF0ZSIsImluaXRTa2lsbEZ1biIsImF0dHJpYnV0ZSIsImJ1aWxkaW5nVHlwZSIsImRlbGV0ZUVmZmVjdHMiLCJhY3RpdmUiLCJfcG9vbCIsIlJldHVyblBvb2wiLCJpc0VmZmVjdHNVcENhbGwiLCJkZXN0cm95IiwicmVtb3ZlRnJvbVBhcmVudCIsIm9uVmFuaXNoIiwibXlFZmZlY3RzIiwib25WYW5pc2hGdW4iLCJ1cGRhdGUiLCJHU2NlbmUiLCJpc1BhdXNlIiwiQ0RNYW5hZ2UiLCJPblVwZGF0ZSIsImFwcGx5IiwiZGF0YSIsInBhcmFtZXRlciIsIm93ZXIiLCJteURvb3IiLCJzY2hlZHVsZSIsIl9pc0FjdGl2ZSIsInNldExpZmUiLCJocCIsIk1hcENsciIsIm1vbnN0ZXJMaXN0IiwibXlNYXAiLCJub2RlIiwib24iLCJMaXN0ZW5JRCIsIk1vbnN0ZXJfU2tpbGwiLCJyb2xlSUQiLCJteUZTTSIsInRhcmdldCIsIkdldFByb2JhYmlsaXR5IiwibmV3RWZmZWN0cyIsInBvc2l0aW9uIiwiekluZGV4Iiwic2V0Q29udHJvbEJvZHkiLCJDQ1Rvb2wiLCJzZXRQYXJlbnQiLCJzZXRQb3NpdGlvbiIsIlNlbmRfSHVydCIsIl9saWZlUmF0aW8iLCJDaGVjayIsIlNldCIsInNldEludmluY2libGUiLCJsb2ciLCJfY2FuU3RlYWxNb25leSIsIl9hdGtTcGVlZERvd24iLCJNb25zdGVyX0ZsZWUiLCJteUF0a1RhcmdldElEIiwiQXVkaW8iLCJDYW1lcmFQbGF5ZXIiLCJuZXdCdWxsZXQiLCJ0YWciLCJpbWciLCJzcGVlZCIsIm93ZXJJRCIsIl9vd2VySUQiLCJodXJ0RGF0YSIsIkh1cnREYXRhIiwiZW1pdCIsInR5cGUiLCJnZXRBbmdsZSIsImdldERpc3RhbmNlIiwiYW5nbGUiLCJoZWlnaHQiLCJzY2hlZHVsZU9uY2UiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsSUFBSUEsQ0FBQyxHQUFHQyxPQUFSO0FBQ0EsSUFBSUMsQ0FBQyxHQUFHQyxNQUFSO0FBQ0EsSUFBSUMsQ0FBQyxHQUFHQyxPQUFSO0FBQ0E7O0FBQ0EsSUFBSUMsRUFBSjtBQUFBLElBQU9DLENBQUMsR0FBRyxVQUFRLFNBQUtDLFNBQWIsS0FBMkJGLEVBQUMsR0FBRyxXQUFTTixDQUFULEVBQVlFLENBQVosRUFBZTtBQUNqRCxTQUFPLENBQUNJLEVBQUMsR0FBR0csTUFBTSxDQUFDQyxjQUFQLElBQXlCO0FBQUVDLElBQUFBLFNBQVMsRUFBRTtBQUFiLGVBQ3RCQyxLQURzQixJQUNiLFVBQVNaLENBQVQsRUFBWUUsQ0FBWixFQUFlO0FBQUVGLElBQUFBLENBQUMsQ0FBQ1csU0FBRixHQUFjVCxDQUFkO0FBQWlCLEdBRDlDLElBQ2tELFVBQVNGLENBQVQsRUFBWUUsQ0FBWixFQUFlO0FBQUUsU0FBSyxJQUFJRSxDQUFULElBQWNGLENBQWQ7QUFBaUJPLE1BQUFBLE1BQU0sQ0FBQ0ksU0FBUCxDQUFpQkMsY0FBakIsQ0FBZ0NDLElBQWhDLENBQXFDYixDQUFyQyxFQUF3Q0UsQ0FBeEMsTUFBK0NKLENBQUMsQ0FBQ0ksQ0FBRCxD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LEdBL0RaLEVBa0VKdkYsQ0FsRUg7QUFtRUg7O0FBQ0RILENBQUMsV0FBRCxHQUFZSixDQUFaIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgZSA9IHJlcXVpcmU7XG52YXIgdCA9IG1vZHVsZTtcbnZhciBvID0gZXhwb3J0cztcblwidXNlIHN0cmljdFwiO1xudmFyIG4sIGkgPSB0aGlzICYmIHRoaXMuX19leHRlbmRzIHx8IChuID0gZnVuY3Rpb24oZSwgdCkge1xuICAgICAgICByZXR1cm4gKG4gPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgeyBfX3Byb3RvX186IFtdIH1cbiAgICAgICAgICAgIGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24oZSwgdCkgeyBlLl9fcHJvdG9fXyA9IHQgfSB8fCBmdW5jdGlvbihlLCB0KSB7IGZvciAodmFyIG8gaW4gdCkgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsIG8pICYmIChlW29dID0gdFtvXSkgfSkoZSwgdClcbiAgICB9LCBmdW5jdGlvbihlLCB0KSB7XG4gICAgICAgIGZ1bmN0aW9uIG8oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBlIH1cbiAgICAgICAgbihlLCB0KSwgZS5wcm90b3R5cGUgPSBudWxsID09PSB0ID8gT2JqZWN0LmNyZWF0ZSh0KSA6IChvLnByb3RvdHlwZSA9IHQucHJvdG90eXBlLCBuZXcgbylcbiAgICB9KSxcbiAgICBhID0gdGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUgfHwgZnVuY3Rpb24oZSwgdCwgbywgbikge1xuICAgICAgICB2YXIgaSwgYSA9IGFyZ3VtZW50cy5sZW5ndGgsXG4gICAgICAgICAgICByID0gYSA8IDMgPyB0IDogbnVsbCA9PT0gbiA/IG4gPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsIG8pIDogbjtcbiAgICAgICAgaWYgKFwib2JqZWN0XCIgPT0gdHlwZW9mIFJlZmxlY3QgJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKSByID0gUmVmbGVjdC5kZWNvcmF0ZShlLCB0LCBvLCBuKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgZm9yICh2YXIgcyA9IGUubGVuZ3RoIC0gMTsgMCA8PSBzOyBzLS0pKGkgPSBlW3NdKSAmJiAociA9IChhIDwgMyA/IGkocikgOiAzIDwgYSA/IGkodCwgbywgcikgOiBpKHQsIG8pKSB8fCByKTtcbiAgICAgICAgcmV0dXJuIDMgPCBhICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIG8sIHIpLCByXG4gICAgfTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogITAgfSk7XG52YXIgciwgcyA9IGUoXCJBcHBDb21tb25cIiksXG4gICAgYyA9IGUoXCJDQ1Rvb2xcIiksXG4gICAgbCA9IGUoXCJMaXN0ZW5JRFwiKSxcbiAgICBwID0gZShcIkNvbnN0cnVjdEJhc2VcIiksXG4gICAgZCA9IGUoXCJFbGVtZW50QmFzZVwiKSxcbiAgICB1ID0gY2MuX2RlY29yYXRvcixcbiAgICB0ID0gdS5jY2NsYXNzLFxuICAgIGUgPSB1Lm1lbnUsXG4gICAgZSA9ICh1LnByb3BlcnR5LCByID0gcC5kZWZhdWx0LCBpKGYsIHIpLCBmLnByb3RvdHlwZS5vbkluaXQgPSBmdW5jdGlvbigpIHsgdGhpcy5faXNIYXZlVXBEYXRlID0gITEsIHRoaXMuaW5pdFNraWxsRnVuW3RoaXMuYXR0cmlidXRlLmJ1aWxkaW5nVHlwZV0gJiYgdGhpcy5pbml0U2tpbGxGdW5bdGhpcy5hdHRyaWJ1dGUuYnVpbGRpbmdUeXBlXSgpIH0sIGYucHJvdG90eXBlLmRlbGV0ZUVmZmVjdHMgPSBmdW5jdGlvbihlKSB7IGUgJiYgZS5hY3RpdmUgJiYgKGUuX3Bvb2wgPyBlLl9wb29sLlJldHVyblBvb2woZSkgOiAodGhpcy5pc0VmZmVjdHNVcENhbGwgPSBudWxsLCBlLmRlc3Ryb3koKSwgZS5yZW1vdmVGcm9tUGFyZW50KCExKSkpIH0sIGYucHJvdG90eXBlLm9uVmFuaXNoID0gZnVuY3Rpb24oKSB7IHRoaXMuZGVsZXRlRWZmZWN0cyh0aGlzLm15RWZmZWN0cyksIHRoaXMub25WYW5pc2hGdW5bdGhpcy5hdHRyaWJ1dGUuYnVpbGRpbmdUeXBlXSAmJiB0aGlzLm9uVmFuaXNoRnVuW3RoaXMuYXR0cmlidXRlLmJ1aWxkaW5nVHlwZV0oKSB9LCBmLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbihlKSB7IHMuZGVmYXVsdC5HU2NlbmUuaXNQYXVzZSB8fCAodGhpcy5pc0VmZmVjdHNVcENhbGwgJiYgdGhpcy5pc0VmZmVjdHNVcENhbGwoKSwgdGhpcy5DRE1hbmFnZSAmJiB0aGlzLkNETWFuYWdlLk9uVXBkYXRlKGUpKSB9LCBhKFt0LCBlKFwiZ2FtZUVsZW1lbnQvU2tpbGxCdWlsZGluZ1wiKV0sIGYpKTtcblxuZnVuY3Rpb24gZigpIHtcbiAgICB2YXIgaSA9IG51bGwgIT09IHIgJiYgci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgcmV0dXJuIGkuaW5pdFNraWxsRnVuID0ge1xuICAgICAgICA2OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBlID0gaS5hdHRyaWJ1dGUuZGF0YS5wYXJhbWV0ZXIsXG4gICAgICAgICAgICAgICAgdCA9IGkub3dlci5teURvb3I7XG4gICAgICAgICAgICBpLnNjaGVkdWxlKGZ1bmN0aW9uKCkgeyBpLl9pc0FjdGl2ZSAmJiB0LnNldExpZmUodC5hdHRyaWJ1dGUuZGF0YS5ocCAqIGVbMV0pIH0sIGVbMF0pXG4gICAgICAgIH0sXG4gICAgICAgIDc6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHQgPSBzLmRlZmF1bHQuTWFwQ2xyLm1vbnN0ZXJMaXN0WzBdLFxuICAgICAgICAgICAgICAgIG8gPSBpLmF0dHJpYnV0ZS5kYXRhLnBhcmFtZXRlcjtcbiAgICAgICAgICAgIHMuZGVmYXVsdC5NYXBDbHIubXlNYXAubm9kZS5vbihsLkxpc3RlbklELk1vbnN0ZXJfU2tpbGwsIGZ1bmN0aW9uKCkgeyBpLl9pc0FjdGl2ZSAmJiBpLm93ZXIucm9sZUlEID09IHQubXlGU00udGFyZ2V0LnJvbGVJRCAmJiBzLmRlZmF1bHQuR2V0UHJvYmFiaWxpdHkob1swXSkgJiYgcy5kZWZhdWx0Lk1hcENsci5uZXdFZmZlY3RzKHQubm9kZS5wb3NpdGlvbiwgXCJnaG9zdGhhbmRcIiwgZnVuY3Rpb24oZSkgeyB0Lm5vZGUgJiYgKGUuekluZGV4ID0gdC5ub2RlLnpJbmRleCArIDEsIGkubXlFZmZlY3RzID0gZSwgdC5zZXRDb250cm9sQm9keShvWzFdLCBmdW5jdGlvbigpIHsgaS5kZWxldGVFZmZlY3RzKGUpIH0pKSB9KSB9LCBpKVxuICAgICAgICB9LFxuICAgICAgICA4OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciB0ID0gaS5vd2VyLm15RG9vcixcbiAgICAgICAgICAgICAgICBlID0gaS5hdHRyaWJ1dGUuZGF0YS5wYXJhbWV0ZXI7XG4gICAgICAgICAgICBpLkNETWFuYWdlID0gbmV3IGMuQ0NUb29sLkNETWFuYWdlKHtcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZVsyXVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIGkubXlFZmZlY3RzIHx8IHMuZGVmYXVsdC5NYXBDbHIubmV3RWZmZWN0cyh0Lm5vZGUucG9zaXRpb24sIFwic2hlaWxkXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdC5ub2RlICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIGUuc2V0UGFyZW50KHQubm9kZSksXG4gICAgICAgICAgICAgICAgICAgICAgICBlLnNldFBvc2l0aW9uKDAsIDApLFxuICAgICAgICAgICAgICAgICAgICAgICAgZS56SW5kZXggPSB0Lm5vZGUuekluZGV4ICsgMyxcbiAgICAgICAgICAgICAgICAgICAgICAgIChpLm15RWZmZWN0cyA9IGUpLmFjdGl2ZSA9ICExKVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIHQubm9kZS5vbihsLkxpc3RlbklELlNlbmRfSHVydCwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIGkuX2lzQWN0aXZlICYmICFpLm15RWZmZWN0cy5hY3RpdmUgJiYgdC5fbGlmZVJhdGlvIDwgZVswXSAmJiBpLkNETWFuYWdlLkNoZWNrKCkgJiYgKGkuQ0RNYW5hZ2UuU2V0KCksIGkubXlFZmZlY3RzLmFjdGl2ZSA9ICEwLCB0LnNldEludmluY2libGUoZVsxXSwgZnVuY3Rpb24oKSB7IGNjLmxvZyhcIuaXoOaVjOe7k+adn1wiKSwgaS5teUVmZmVjdHMuYWN0aXZlID0gITEgfSkpXG4gICAgICAgICAgICAgICAgfSwgaSlcbiAgICAgICAgfSxcbiAgICAgICAgOTogZnVuY3Rpb24oKSB7IGkub3dlci5fY2FuU3RlYWxNb25leSA9ICEwIH0sXG4gICAgICAgIDEwOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGkub3dlci5fYXRrU3BlZWREb3duID0gaS5hdHRyaWJ1dGUuZGF0YS5wYXJhbWV0ZXJbMF07XG4gICAgICAgICAgICB2YXIgdCA9IGkub3dlci5teURvb3I7XG4gICAgICAgICAgICBzLmRlZmF1bHQuTWFwQ2xyLm5ld0VmZmVjdHModC5ub2RlLnBvc2l0aW9uLCBcImljZVwiLCBmdW5jdGlvbihlKSB7IGUuc2V0UGFyZW50KHQubm9kZSksIGUuc2V0UG9zaXRpb24oMCwgMCksIGUuekluZGV4ID0gdC5ub2RlLnpJbmRleCArIDEsIGkubXlFZmZlY3RzID0gZSB9KVxuICAgICAgICB9LFxuICAgICAgICAxMTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgdCA9IHMuZGVmYXVsdC5NYXBDbHIubW9uc3Rlckxpc3RbMF0sXG4gICAgICAgICAgICAgICAgZSA9IGkuYXR0cmlidXRlLmRhdGEucGFyYW1ldGVyO1xuICAgICAgICAgICAgaS5DRE1hbmFnZSA9IG5ldyBjLkNDVG9vbC5DRE1hbmFnZSh7IGRlZmF1bHQ6IGVbMF0gfSksIHQubm9kZS5vbihsLkxpc3RlbklELk1vbnN0ZXJfRmxlZSwgZnVuY3Rpb24oKSB7IGkuX2lzQWN0aXZlICYmIGkub3dlci5yb2xlSUQgPT0gdC5teUF0a1RhcmdldElEICYmIHMuZGVmYXVsdC5HZXRQcm9iYWJpbGl0eShlWzBdKSAmJiBpLkNETWFuYWdlLkNoZWNrKCkgJiYgKGkuQ0RNYW5hZ2UuU2V0KCksIGMuQ0NUb29sLkF1ZGlvLkNhbWVyYVBsYXllcihpLm5vZGUucG9zaXRpb24sIFwiQ29id2ViXCIpLCBzLmRlZmF1bHQuTWFwQ2xyLm5ld0J1bGxldChpLm5vZGUucG9zaXRpb24sIHsgdGFnOiB0LCBpbWc6IFwiY29id2ViMDFcIiwgc3BlZWQ6IDE1MDAsIG93ZXJJRDogaS5fb3dlcklELCBodXJ0RGF0YTogbmV3IGQuSHVydERhdGEoMCksIGNhbGw6IGZ1bmN0aW9uKCkgeyBzLmRlZmF1bHQuTWFwQ2xyLm5ld0VmZmVjdHModC5ub2RlLnBvc2l0aW9uLCBcImNvYndlYjAyXCIsIGZ1bmN0aW9uKGUpIHsgdC5ub2RlICYmIChlLnNldFBhcmVudCh0Lm5vZGUpLCBlLnNldFBvc2l0aW9uKDAsIDApLCBlLnpJbmRleCA9IHQubm9kZS56SW5kZXggKyAxLCBpLm15RWZmZWN0cyA9IGUpIH0pLCB0LnNldENvbnRyb2xCb2R5KGVbMV0sIGZ1bmN0aW9uKCkgeyBjYy5sb2coXCLmjqfliLbnu5PmnZ9cIiksIGkuZGVsZXRlRWZmZWN0cyhpLm15RWZmZWN0cykgfSkgfSB9KSkgfSwgaSlcbiAgICAgICAgfSxcbiAgICAgICAgMTI6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHQgPSBpLm93ZXIubXlEb29yLFxuICAgICAgICAgICAgICAgIG8gPSBpLmF0dHJpYnV0ZS5kYXRhLnBhcmFtZXRlcjtcbiAgICAgICAgICAgIHMuZGVmYXVsdC5NYXBDbHIubmV3RWZmZWN0cyh0Lm5vZGUucG9zaXRpb24sIFwidGhvcm5cIiwgZnVuY3Rpb24oZSkgeyBlLnNldFBhcmVudCh0Lm5vZGUpLCBlLnNldFBvc2l0aW9uKDAsIDApLCBlLnpJbmRleCA9IHQubm9kZS56SW5kZXggKyAyLCBpLm15RWZmZWN0cyA9IGUgfSksIHQubm9kZS5vbihsLkxpc3RlbklELlNlbmRfSHVydCwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyIGU7XG4gICAgICAgICAgICAgICAgaS5faXNBY3RpdmUgJiYgKGUgPSBzLmRlZmF1bHQuTWFwQ2xyLm1vbnN0ZXJMaXN0WzBdKS5ub2RlLmVtaXQobC5MaXN0ZW5JRC5TZW5kX0h1cnQsIG5ldyBkLkh1cnREYXRhKC1lLmF0dHJpYnV0ZS5kYXRhLmhwICogb1swXSwgaS5vd2VyLnJvbGVJRCwgaS5vd2VyLnR5cGUpKVxuICAgICAgICAgICAgfSwgaSlcbiAgICAgICAgfSxcbiAgICAgICAgMTM6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIG4gPSBzLmRlZmF1bHQuTWFwQ2xyLm1vbnN0ZXJMaXN0WzBdLFxuICAgICAgICAgICAgICAgIGUgPSBpLmF0dHJpYnV0ZS5kYXRhLnBhcmFtZXRlcjtcbiAgICAgICAgICAgIGkuQ0RNYW5hZ2UgPSBuZXcgYy5DQ1Rvb2wuQ0RNYW5hZ2UoeyBkZWZhdWx0OiBlWzJdIH0pLCBuLm5vZGUub24obC5MaXN0ZW5JRC5TZW5kX0h1cnQsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGkuX2lzQWN0aXZlICYmIG4uX2xpZmVSYXRpbyA8IGVbMF0gJiYgaS5vd2VyLnJvbGVJRCA9PSBuLm15QXRrVGFyZ2V0SUQgJiYgaS5DRE1hbmFnZS5DaGVjaygpICYmIChpLkNETWFuYWdlLlNldCgpLCBzLmRlZmF1bHQuTWFwQ2xyLm5ld0VmZmVjdHMoaS5ub2RlLnBvc2l0aW9uLCBcImVsZWNcIiwgZnVuY3Rpb24obykge1xuICAgICAgICAgICAgICAgICAgICBuLm5vZGUgJiYgKGMuQ0NUb29sLkF1ZGlvLkNhbWVyYVBsYXllcihpLm5vZGUucG9zaXRpb24sIFwiTGFzZXJcIiksIG8uekluZGV4ID0gbi5ub2RlLnpJbmRleCArIDIsIGkubXlFZmZlY3RzID0gbywgaS5pc0VmZmVjdHNVcENhbGwgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gcy5kZWZhdWx0LmdldEFuZ2xlKGkubm9kZS5wb3NpdGlvbiwgbi5ub2RlLnBvc2l0aW9uKSArIDkwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgPSBzLmRlZmF1bHQuZ2V0RGlzdGFuY2UoaS5ub2RlLnBvc2l0aW9uLCBuLm5vZGUucG9zaXRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgby5hbmdsZSA9IGUsIG8uaGVpZ2h0ID0gdFxuICAgICAgICAgICAgICAgICAgICB9LCBuLm5vZGUuZW1pdChsLkxpc3RlbklELlNlbmRfSHVydCwgbmV3IGQuSHVydERhdGEoLW4uYXR0cmlidXRlLmRhdGEuaHAgKiBlWzFdLCBpLm93ZXIucm9sZUlELCBpLm93ZXIudHlwZSkpLCBpLnNjaGVkdWxlT25jZShmdW5jdGlvbigpIHsgaS5kZWxldGVFZmZlY3RzKGkubXlFZmZlY3RzKSB9LCAuNSkpXG4gICAgICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICB9LCBpKVxuICAgICAgICB9LFxuICAgICAgICAxNDogZnVuY3Rpb24oKSB7fSxcbiAgICAgICAgMTU6IGZ1bmN0aW9uKCkge30sXG4gICAgICAgIDE2OiBmdW5jdGlvbigpIHt9XG4gICAgfSwgaS5vblZhbmlzaEZ1biA9IHtcbiAgICAgICAgOTogZnVuY3Rpb24oKSB7IGkub3dlci5fY2FuU3RlYWxNb25leSA9ICExIH0sXG4gICAgICAgIDEwOiBmdW5jdGlvbigpIHsgaS5vd2VyLl9hdGtTcGVlZERvd24gPSAwIH1cbiAgICB9LCBpXG59XG5vLmRlZmF1bHQgPSBlIl19