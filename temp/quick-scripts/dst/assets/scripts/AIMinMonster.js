
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/AIMinMonster.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '8b4e6lBVEdD+p7h5Tf8lKsV', 'AIMinMonster');
// scripts/AIMinMonster.js

"use strict";

var e = require;
var t = module;
var o = exports;
"use strict";

var _n,
    i = void 0 && (void 0).__extends || (_n = function n(e, t) {
  return (_n = Object.setPrototypeOf || {
    __proto__: []
  } instanceof Array && function (e, t) {
    e.__proto__ = t;
  } || function (e, t) {
    for (var o in t) {
      Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]);
    }
  })(e, t);
}, function (e, t) {
  function o() {
    this.constructor = e;
  }

  _n(e, t), e.prototype = null === t ? Object.create(t) : (o.prototype = t.prototype, new o());
}),
    a = void 0 && (void 0).__decorate || function (e, t, o, n) {
  var i,
      a = arguments.length,
      r = a < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, o) : n;
  if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) r = Reflect.decorate(e, t, o, n);else for (var s = e.length - 1; 0 <= s; s--) {
    (i = e[s]) && (r = (a < 3 ? i(r) : 3 < a ? i(t, o, r) : i(t, o)) || r);
  }
  return 3 < a && r && Object.defineProperty(t, o, r), r;
};

Object.defineProperty(o, "__esModule", {
  value: !0
});
var r,
    s = e("AppCommon"),
    c = e("CCTool"),
    l = e("GameScene"),
    p = e("AIState"),
    d = e("FSMBase"),
    t = cc._decorator,
    e = t.ccclass,
    e = (t.property, r = d["default"], i(u, r), u.prototype.initState = function (e, t) {
  var o = this;
  this._AiParameter = new p.AiParameter(), this._AiParameter.moveSpeed = t.MoveSpeedGhost, this._AiParameter.AttackRange = t.AttackRangeGhost, this.ower = e, this.statesList[p.StateType.Idle] = new p.IdleState(this), this.statesList[p.StateType.Move] = new p.MoveState(this), this.statesList[p.StateType.Die] = new p.DieState(this), this.statesList[p.StateType.Attack] = new p.AttackState(this), this.setAIState(p.StateType.Idle), this.CDManage = new c.CCTool.CDManage(), this.CDManage.UpCDFun = {
    atk: function atk() {
      return 1 / (o.ower.attribute.data.atkspeed - o.ower.attribute.data.atkspeed * (o.target ? o.target._atkSpeedDown : 0) + o.ower.isRageAtkSpeed);
    },
    think: function think() {
      return 1;
    },
    atkDialogue: function atkDialogue() {
      return 10;
    }
  }, this.CDManage.Init();
}, u.prototype.newThink = function () {
  this.CDManage.Check("think") && (this.CDManage.Set("think"), this.searchPath());
}, u.prototype.searchPath = function () {
  if (this.currentState == p.StateType.Idle) {
    if (!this.target || this.target._life <= 0) for (var e in s["default"].MapClr.roleList) {
      e = s["default"].MapClr.roleList[e];

      if (e.roleID != this.ower._owerID && 0 < e._life) {
        this.target = e, this.getPath(s["default"].MapClr.getMapPos(this.target.node.position));
        break;
      }
    }
    return this.setAIState(p.StateType.Move), !0;
  }
}, u.prototype.renounceTarget = function () {
  this.target = null, this.path.length = 0, this.ower.mySkeleton.timeScale = 1, this.setAIState(p.StateType.Idle);
}, u.prototype.checkDoor = function () {
  if (!(this.target._life <= 0)) {
    var e = this.target.myDoor;

    if (e._isActive) {
      if (s["default"].getDistance(this.node.position, e.node.position) < this._AiParameter.AttackRange) return this.sendAttack(e.node), !0;
    } else this.path = [this.target.node.position.clone()];
  }
}, u.prototype.checkPointAttaTarget = function () {
  var e = s["default"].MapClr.getMapPos(this.node.position),
      t = null === (t = this.target.myBed) || void 0 === t ? void 0 : t.myTerritoryMap;

  if (t && t[e.x] && t[e.x][e.y]) {
    e = t[e.x][e.y].arc;

    if (e && e._isActive && e.node && e.node.isValid && s["default"].getDistance(this.node.position, e.node.position) < this._AiParameter.AttackRange) {
      if (this.CDManage.Check("atk") || this.currentState != p.StateType.Move) return this.sendAttack(e.node), !0;
      this.ower.mySkeleton.timeScale = 1, this.setAIState(p.StateType.Idle);
    }
  }
}, u.prototype.checkRole = function () {
  if (!(this.target._life <= 0)) {
    var e = this.target;
    return 0 < e._life && s["default"].getDistance(this.node.position, e.node.position) < this._AiParameter.AttackRange ? (this.sendAttack(e.node), !0) : void 0;
  }
}, u.prototype.onMoveEnd = function () {
  this.ower.mySkeleton.timeScale = 1, this.setAIState(p.StateType.Idle), this.CDManage.Clear("atk");
}, u.prototype.sendAttack = function (e) {
  this.CDManage.Check("atk") && (this.CDManage.Set("atk"), this.ower.mySkeleton.timeScale = 1 / this.CDManage.limt.atk, this.ower.mySkeleton.node.scaleX = this.node.x > e.x ? 1 : -1, this.setAIState(p.StateType.Attack), this.ower.setHurt(e));
}, u.prototype.update = function (e) {
  if (!s["default"].GScene.isPause && this.ower._isActive) {
    if (this._time += e, s["default"].GScene._GameState == l.GAME_STATE.Game && (this.CDManage.OnUpdate(e), this.newThink(e), .2 < this._time)) {
      if (this.CDManage.Up("atk"), this.checkDoor()) return;
      if (this.checkPointAttaTarget()) return;
      if (this.checkRole()) return;
      [p.StateType.Move, p.StateType.Idle].indexOf(this.currentState) < 0 && this.setAIState(p.StateType.Idle), this._time = 0;
    }

    this.currentStateClr.OnUpdate(e);
  }
}, u.prototype.setIdleDialogue = function () {
  var e = this.DialogueList[p.StateType.Idle][this.DialogueNum];
  e ? (s["default"].MapClr.newDialogue(this.node, cc.v2(20, 150), e, 2.5), this.DialogueNum++) : this.DialogueNum = 0;
}, u.prototype.setAtkDialogue = function () {
  this.CDManage.Check("atkDialogue") && (this.CDManage.Set("atkDialogue"), s["default"].MapClr.newDialogue(this.node, cc.v2(20, 150), s["default"].GetArrTarge(this.DialogueList[p.StateType.Attack]), 3));
}, a([e], u));

function u() {
  var e,
      t = null !== r && r.apply(this, arguments) || this;
  return t.statesList = [], t._time = 0, t.DialogueNum = 0, t.DialogueList = ((e = {})[p.StateType.Idle] = [], e[p.StateType.Attack] = [], e[p.StateType.Escape] = [], e[p.StateType.Treat] = [], e.kill = [], e), t;
}

o["default"] = e;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0c1xcQUlNaW5Nb25zdGVyLmpzIl0sIm5hbWVzIjpbImUiLCJyZXF1aXJlIiwidCIsIm1vZHVsZSIsIm8iLCJleHBvcnRzIiwibiIsImkiLCJfX2V4dGVuZHMiLCJPYmplY3QiLCJzZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsIkFycmF5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiY29uc3RydWN0b3IiLCJjcmVhdGUiLCJhIiwiX19kZWNvcmF0ZSIsImFyZ3VtZW50cyIsImxlbmd0aCIsInIiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJSZWZsZWN0IiwiZGVjb3JhdGUiLCJzIiwiZGVmaW5lUHJvcGVydHkiLCJ2YWx1ZSIsImMiLCJsIiwicCIsImQiLCJjYyIsIl9kZWNvcmF0b3IiLCJjY2NsYXNzIiwicHJvcGVydHkiLCJ1IiwiaW5pdFN0YXRlIiwiX0FpUGFyYW1ldGVyIiwiQWlQYXJhbWV0ZXIiLCJtb3ZlU3BlZWQiLCJNb3ZlU3BlZWRHaG9zdCIsIkF0dGFja1JhbmdlIiwiQXR0YWNrUmFuZ2VHaG9zdCIsIm93ZXIiLCJzdGF0ZXNMaXN0IiwiU3RhdGVUeXBlIiwiSWRsZSIsIklkbGVTdGF0ZSIsIk1vdmUiLCJNb3ZlU3RhdGUiLCJEaWUiLCJEaWVTdGF0ZSIsIkF0dGFjayIsIkF0dGFja1N0YXRlIiwic2V0QUlTdGF0ZSIsIkNETWFuYWdlIiwiQ0NUb29sIiwiVXBDREZ1biIsImF0ayIsImF0dHJpYnV0ZSIsImRhdGEiLCJhdGtzcGVlZCIsInRhcmdldCIsIl9hdGtTcGVlZERvd24iLCJpc1JhZ2VBdGtTcGVlZCIsInRoaW5rIiwiYXRrRGlhbG9ndWUiLCJJbml0IiwibmV3VGhpbmsiLCJDaGVjayIsIlNldCIsInNlYXJjaFBhdGgiLCJjdXJyZW50U3RhdGUiLCJfbGlmZSIsIk1hcENsciIsInJvbGVMaXN0Iiwicm9sZUlEIiwiX293ZXJJRCIsImdldFBhdGgiLCJnZXRNYXBQb3MiLCJub2RlIiwicG9zaXRpb24iLCJyZW5vdW5jZVRhcmdldCIsInBhdGgiLCJteVNrZWxldG9uIiwidGltZVNjYWxlIiwiY2hlY2tEb29yIiwibXlEb29yIiwiX2lzQWN0aXZlIiwiZ2V0RGlzdGFuY2UiLCJzZW5kQXR0YWNrIiwiY2xvbmUiLCJjaGVja1BvaW50QXR0YVRhcmdldCIsIm15QmVkIiwibXlUZXJyaXRvcnlNYXAiLCJ4IiwieSIsImFyYyIsImlzVmFsaWQiLCJjaGVja1JvbGUiLCJvbk1vdmVFbmQiLCJDbGVhciIsImxpbXQiLCJzY2FsZVgiLCJzZXRIdXJ0IiwidXBkYXRlIiwiR1NjZW5lIiwiaXNQYXVzZSIsIl90aW1lIiwiX0dhbWVTdGF0ZSIsIkdBTUVfU1RBVEUiLCJHYW1lIiwiT25VcGRhdGUiLCJVcCIsImluZGV4T2YiLCJjdXJyZW50U3RhdGVDbHIiLCJzZXRJZGxlRGlhbG9ndWUiLCJEaWFsb2d1ZUxpc3QiLCJEaWFsb2d1ZU51bSIsIm5ld0RpYWxvZ3VlIiwidjIiLCJzZXRBdGtEaWFsb2d1ZSIsIkdldEFyclRhcmdlIiwiYXBwbHkiLCJFc2NhcGUiLCJUcmVhdCIsImtpbGwiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsSUFBSUEsQ0FBQyxHQUFDQyxPQUFOO0FBQ0EsSUFBSUMsQ0FBQyxHQUFDQyxNQUFOO0FBQ0EsSUFBSUMsQ0FBQyxHQUFDQyxPQUFOO0FBQ0E7O0FBQWEsSUFBSUMsRUFBSjtBQUFBLElBQU1DLENBQUMsR0FBQyxVQUFNLFNBQUtDLFNBQVgsS0FBdUJGLEVBQUMsR0FBQyxXQUFTTixDQUFULEVBQVdFLENBQVgsRUFBYTtBQUFDLFNBQU0sQ0FBQ0ksRUFBQyxHQUFDRyxNQUFNLENBQUNDLGNBQVAsSUFBdUI7QUFBQ0MsSUFBQUEsU0FBUyxFQUFDO0FBQVgsZUFBeUJDLEtBQXpCLElBQWdDLFVBQVNaLENBQVQsRUFBV0UsQ0FBWCxFQUFhO0FBQUNGLElBQUFBLENBQUMsQ0FBQ1csU0FBRixHQUFZVCxDQUFaO0FBQWMsR0FBbkYsSUFBcUYsVUFB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QW5CLElBQXlCLEVBQXpCLEVBQTRCaEQsQ0FBQyxDQUFDK0IsQ0FBQyxDQUFDZ0IsU0FBRixDQUFZTyxNQUFiLENBQUQsR0FBc0IsRUFBbEQsRUFBcUR0RCxDQUFDLENBQUMrQixDQUFDLENBQUNnQixTQUFGLENBQVkrRSxNQUFiLENBQUQsR0FBc0IsRUFBM0UsRUFBOEU5SCxDQUFDLENBQUMrQixDQUFDLENBQUNnQixTQUFGLENBQVlnRixLQUFiLENBQUQsR0FBcUIsRUFBbkcsRUFBc0cvSCxDQUFDLENBQUNnSSxJQUFGLEdBQU8sRUFBN0csRUFBZ0hoSSxDQUFoSSxDQUExQyxFQUE2S0UsQ0FBcEw7QUFBc0w7O0FBQUFFLENBQUMsV0FBRCxHQUFVSixDQUFWIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgZT1yZXF1aXJlO1xudmFyIHQ9bW9kdWxlO1xudmFyIG89ZXhwb3J0cztcblwidXNlIHN0cmljdFwiO3ZhciBuLGk9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fChuPWZ1bmN0aW9uKGUsdCl7cmV0dXJuKG49T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBvIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsbykmJihlW29dPXRbb10pfSkoZSx0KX0sZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBvKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfW4oZSx0KSxlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihvLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgbyl9KSxhPXRoaXMmJnRoaXMuX19kZWNvcmF0ZXx8ZnVuY3Rpb24oZSx0LG8sbil7dmFyIGksYT1hcmd1bWVudHMubGVuZ3RoLHI9YTwzP3Q6bnVsbD09PW4/bj1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsbyk6bjtpZihcIm9iamVjdFwiPT10eXBlb2YgUmVmbGVjdCYmXCJmdW5jdGlvblwiPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSlyPVJlZmxlY3QuZGVjb3JhdGUoZSx0LG8sbik7ZWxzZSBmb3IodmFyIHM9ZS5sZW5ndGgtMTswPD1zO3MtLSkoaT1lW3NdKSYmKHI9KGE8Mz9pKHIpOjM8YT9pKHQsbyxyKTppKHQsbykpfHxyKTtyZXR1cm4gMzxhJiZyJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxvLHIpLHJ9O09iamVjdC5kZWZpbmVQcm9wZXJ0eShvLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciByLHM9ZShcIkFwcENvbW1vblwiKSxjPWUoXCJDQ1Rvb2xcIiksbD1lKFwiR2FtZVNjZW5lXCIpLHA9ZShcIkFJU3RhdGVcIiksZD1lKFwiRlNNQmFzZVwiKSx0PWNjLl9kZWNvcmF0b3IsZT10LmNjY2xhc3MsZT0odC5wcm9wZXJ0eSxyPWQuZGVmYXVsdCxpKHUsciksdS5wcm90b3R5cGUuaW5pdFN0YXRlPWZ1bmN0aW9uKGUsdCl7dmFyIG89dGhpczt0aGlzLl9BaVBhcmFtZXRlcj1uZXcgcC5BaVBhcmFtZXRlcix0aGlzLl9BaVBhcmFtZXRlci5tb3ZlU3BlZWQ9dC5Nb3ZlU3BlZWRHaG9zdCx0aGlzLl9BaVBhcmFtZXRlci5BdHRhY2tSYW5nZT10LkF0dGFja1JhbmdlR2hvc3QsdGhpcy5vd2VyPWUsdGhpcy5zdGF0ZXNMaXN0W3AuU3RhdGVUeXBlLklkbGVdPW5ldyBwLklkbGVTdGF0ZSh0aGlzKSx0aGlzLnN0YXRlc0xpc3RbcC5TdGF0ZVR5cGUuTW92ZV09bmV3IHAuTW92ZVN0YXRlKHRoaXMpLHRoaXMuc3RhdGVzTGlzdFtwLlN0YXRlVHlwZS5EaWVdPW5ldyBwLkRpZVN0YXRlKHRoaXMpLHRoaXMuc3RhdGVzTGlzdFtwLlN0YXRlVHlwZS5BdHRhY2tdPW5ldyBwLkF0dGFja1N0YXRlKHRoaXMpLHRoaXMuc2V0QUlTdGF0ZShwLlN0YXRlVHlwZS5JZGxlKSx0aGlzLkNETWFuYWdlPW5ldyBjLkNDVG9vbC5DRE1hbmFnZSx0aGlzLkNETWFuYWdlLlVwQ0RGdW49e2F0azpmdW5jdGlvbigpe3JldHVybiAxLyhvLm93ZXIuYXR0cmlidXRlLmRhdGEuYXRrc3BlZWQtby5vd2VyLmF0dHJpYnV0ZS5kYXRhLmF0a3NwZWVkKihvLnRhcmdldD9vLnRhcmdldC5fYXRrU3BlZWREb3duOjApK28ub3dlci5pc1JhZ2VBdGtTcGVlZCl9LHRoaW5rOmZ1bmN0aW9uKCl7cmV0dXJuIDF9LGF0a0RpYWxvZ3VlOmZ1bmN0aW9uKCl7cmV0dXJuIDEwfX0sdGhpcy5DRE1hbmFnZS5Jbml0KCl9LHUucHJvdG90eXBlLm5ld1RoaW5rPWZ1bmN0aW9uKCl7dGhpcy5DRE1hbmFnZS5DaGVjayhcInRoaW5rXCIpJiYodGhpcy5DRE1hbmFnZS5TZXQoXCJ0aGlua1wiKSx0aGlzLnNlYXJjaFBhdGgoKSl9LHUucHJvdG90eXBlLnNlYXJjaFBhdGg9ZnVuY3Rpb24oKXtpZih0aGlzLmN1cnJlbnRTdGF0ZT09cC5TdGF0ZVR5cGUuSWRsZSl7aWYoIXRoaXMudGFyZ2V0fHx0aGlzLnRhcmdldC5fbGlmZTw9MClmb3IodmFyIGUgaW4gcy5kZWZhdWx0Lk1hcENsci5yb2xlTGlzdCl7ZT1zLmRlZmF1bHQuTWFwQ2xyLnJvbGVMaXN0W2VdO2lmKGUucm9sZUlEIT10aGlzLm93ZXIuX293ZXJJRCYmMDxlLl9saWZlKXt0aGlzLnRhcmdldD1lLHRoaXMuZ2V0UGF0aChzLmRlZmF1bHQuTWFwQ2xyLmdldE1hcFBvcyh0aGlzLnRhcmdldC5ub2RlLnBvc2l0aW9uKSk7YnJlYWt9fXJldHVybiB0aGlzLnNldEFJU3RhdGUocC5TdGF0ZVR5cGUuTW92ZSksITB9fSx1LnByb3RvdHlwZS5yZW5vdW5jZVRhcmdldD1mdW5jdGlvbigpe3RoaXMudGFyZ2V0PW51bGwsdGhpcy5wYXRoLmxlbmd0aD0wLHRoaXMub3dlci5teVNrZWxldG9uLnRpbWVTY2FsZT0xLHRoaXMuc2V0QUlTdGF0ZShwLlN0YXRlVHlwZS5JZGxlKX0sdS5wcm90b3R5cGUuY2hlY2tEb29yPWZ1bmN0aW9uKCl7aWYoISh0aGlzLnRhcmdldC5fbGlmZTw9MCkpe3ZhciBlPXRoaXMudGFyZ2V0Lm15RG9vcjtpZihlLl9pc0FjdGl2ZSl7aWYocy5kZWZhdWx0LmdldERpc3RhbmNlKHRoaXMubm9kZS5wb3NpdGlvbixlLm5vZGUucG9zaXRpb24pPHRoaXMuX0FpUGFyYW1ldGVyLkF0dGFja1JhbmdlKXJldHVybiB0aGlzLnNlbmRBdHRhY2soZS5ub2RlKSwhMH1lbHNlIHRoaXMucGF0aD1bdGhpcy50YXJnZXQubm9kZS5wb3NpdGlvbi5jbG9uZSgpXX19LHUucHJvdG90eXBlLmNoZWNrUG9pbnRBdHRhVGFyZ2V0PWZ1bmN0aW9uKCl7dmFyIGU9cy5kZWZhdWx0Lk1hcENsci5nZXRNYXBQb3ModGhpcy5ub2RlLnBvc2l0aW9uKSx0PW51bGw9PT0odD10aGlzLnRhcmdldC5teUJlZCl8fHZvaWQgMD09PXQ/dm9pZCAwOnQubXlUZXJyaXRvcnlNYXA7aWYodCYmdFtlLnhdJiZ0W2UueF1bZS55XSl7ZT10W2UueF1bZS55XS5hcmM7aWYoZSYmZS5faXNBY3RpdmUmJmUubm9kZSYmZS5ub2RlLmlzVmFsaWQmJnMuZGVmYXVsdC5nZXREaXN0YW5jZSh0aGlzLm5vZGUucG9zaXRpb24sZS5ub2RlLnBvc2l0aW9uKTx0aGlzLl9BaVBhcmFtZXRlci5BdHRhY2tSYW5nZSl7aWYodGhpcy5DRE1hbmFnZS5DaGVjayhcImF0a1wiKXx8dGhpcy5jdXJyZW50U3RhdGUhPXAuU3RhdGVUeXBlLk1vdmUpcmV0dXJuIHRoaXMuc2VuZEF0dGFjayhlLm5vZGUpLCEwO3RoaXMub3dlci5teVNrZWxldG9uLnRpbWVTY2FsZT0xLHRoaXMuc2V0QUlTdGF0ZShwLlN0YXRlVHlwZS5JZGxlKX19fSx1LnByb3RvdHlwZS5jaGVja1JvbGU9ZnVuY3Rpb24oKXtpZighKHRoaXMudGFyZ2V0Ll9saWZlPD0wKSl7dmFyIGU9dGhpcy50YXJnZXQ7cmV0dXJuIDA8ZS5fbGlmZSYmcy5kZWZhdWx0LmdldERpc3RhbmNlKHRoaXMubm9kZS5wb3NpdGlvbixlLm5vZGUucG9zaXRpb24pPHRoaXMuX0FpUGFyYW1ldGVyLkF0dGFja1JhbmdlPyh0aGlzLnNlbmRBdHRhY2soZS5ub2RlKSwhMCk6dm9pZCAwfX0sdS5wcm90b3R5cGUub25Nb3ZlRW5kPWZ1bmN0aW9uKCl7dGhpcy5vd2VyLm15U2tlbGV0b24udGltZVNjYWxlPTEsdGhpcy5zZXRBSVN0YXRlKHAuU3RhdGVUeXBlLklkbGUpLHRoaXMuQ0RNYW5hZ2UuQ2xlYXIoXCJhdGtcIil9LHUucHJvdG90eXBlLnNlbmRBdHRhY2s9ZnVuY3Rpb24oZSl7dGhpcy5DRE1hbmFnZS5DaGVjayhcImF0a1wiKSYmKHRoaXMuQ0RNYW5hZ2UuU2V0KFwiYXRrXCIpLHRoaXMub3dlci5teVNrZWxldG9uLnRpbWVTY2FsZT0xL3RoaXMuQ0RNYW5hZ2UubGltdC5hdGssdGhpcy5vd2VyLm15U2tlbGV0b24ubm9kZS5zY2FsZVg9dGhpcy5ub2RlLng+ZS54PzE6LTEsdGhpcy5zZXRBSVN0YXRlKHAuU3RhdGVUeXBlLkF0dGFjayksdGhpcy5vd2VyLnNldEh1cnQoZSkpfSx1LnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oZSl7aWYoIXMuZGVmYXVsdC5HU2NlbmUuaXNQYXVzZSYmdGhpcy5vd2VyLl9pc0FjdGl2ZSl7aWYodGhpcy5fdGltZSs9ZSxzLmRlZmF1bHQuR1NjZW5lLl9HYW1lU3RhdGU9PWwuR0FNRV9TVEFURS5HYW1lJiYodGhpcy5DRE1hbmFnZS5PblVwZGF0ZShlKSx0aGlzLm5ld1RoaW5rKGUpLC4yPHRoaXMuX3RpbWUpKXtpZih0aGlzLkNETWFuYWdlLlVwKFwiYXRrXCIpLHRoaXMuY2hlY2tEb29yKCkpcmV0dXJuO2lmKHRoaXMuY2hlY2tQb2ludEF0dGFUYXJnZXQoKSlyZXR1cm47aWYodGhpcy5jaGVja1JvbGUoKSlyZXR1cm47W3AuU3RhdGVUeXBlLk1vdmUscC5TdGF0ZVR5cGUuSWRsZV0uaW5kZXhPZih0aGlzLmN1cnJlbnRTdGF0ZSk8MCYmdGhpcy5zZXRBSVN0YXRlKHAuU3RhdGVUeXBlLklkbGUpLHRoaXMuX3RpbWU9MH10aGlzLmN1cnJlbnRTdGF0ZUNsci5PblVwZGF0ZShlKX19LHUucHJvdG90eXBlLnNldElkbGVEaWFsb2d1ZT1mdW5jdGlvbigpe3ZhciBlPXRoaXMuRGlhbG9ndWVMaXN0W3AuU3RhdGVUeXBlLklkbGVdW3RoaXMuRGlhbG9ndWVOdW1dO2U/KHMuZGVmYXVsdC5NYXBDbHIubmV3RGlhbG9ndWUodGhpcy5ub2RlLGNjLnYyKDIwLDE1MCksZSwyLjUpLHRoaXMuRGlhbG9ndWVOdW0rKyk6dGhpcy5EaWFsb2d1ZU51bT0wfSx1LnByb3RvdHlwZS5zZXRBdGtEaWFsb2d1ZT1mdW5jdGlvbigpe3RoaXMuQ0RNYW5hZ2UuQ2hlY2soXCJhdGtEaWFsb2d1ZVwiKSYmKHRoaXMuQ0RNYW5hZ2UuU2V0KFwiYXRrRGlhbG9ndWVcIikscy5kZWZhdWx0Lk1hcENsci5uZXdEaWFsb2d1ZSh0aGlzLm5vZGUsY2MudjIoMjAsMTUwKSxzLmRlZmF1bHQuR2V0QXJyVGFyZ2UodGhpcy5EaWFsb2d1ZUxpc3RbcC5TdGF0ZVR5cGUuQXR0YWNrXSksMykpfSxhKFtlXSx1KSk7ZnVuY3Rpb24gdSgpe3ZhciBlLHQ9bnVsbCE9PXImJnIuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzO3JldHVybiB0LnN0YXRlc0xpc3Q9W10sdC5fdGltZT0wLHQuRGlhbG9ndWVOdW09MCx0LkRpYWxvZ3VlTGlzdD0oKGU9e30pW3AuU3RhdGVUeXBlLklkbGVdPVtdLGVbcC5TdGF0ZVR5cGUuQXR0YWNrXT1bXSxlW3AuU3RhdGVUeXBlLkVzY2FwZV09W10sZVtwLlN0YXRlVHlwZS5UcmVhdF09W10sZS5raWxsPVtdLGUpLHR9by5kZWZhdWx0PWUiXX0=