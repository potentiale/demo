{"version":3,"sources":["assets\\scripts\\AIBuild.js"],"names":["e","require","t","module","o","exports","n","i","__extends","Object","setPrototypeOf","__proto__","Array","prototype","hasOwnProperty","call","constructor","create","a","__decorate","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","s","defineProperty","value","BuildAIOperation_Type","BuildAI_Type","c","l","p","d","u","Not","Check","Idle","Doit","Build","Up","Sell","f","cc","_decorator","ccclass","property","h","initState","_AiParameter","ower","initPolicy","log","name","id","schedule","newThink","GetRandomNum","setAIState","_isActive","CONFIG_INFO","AITag","resources","load","Prefab","instantiate","setParent","node","_components","initFun","buildMax","JSON","parse","buildingMax","myDoor","on","ListenID","Send_Hurt","getHurt","onDisable","unscheduleAllCallbacks","myBed","myTerritoryMap","pointSeting","push","x","y","sort","attack","arrCompare","getPolicy","resource","attribute","buildingID","skillManage","getType","CDManage","InitItem","GScene","isPause","useSkill","currentState","MapClr","monsterList","data","myCapabilities","hp","atk","_life","getWeight","first","checkPolicy","arcIDList","GetArrTarge","Cfg","Building1","get","checkLimt","checkRoomIsSpace","getNotMaxArc","checkOperation","type","arcTag","arcCfg","renounceTarget","checkSpace","pos","checkNeetTiem","time","newOperation","toleranceTime","setWaiting","indexOf","arc","buildingType","buildID","splice","myBuildNum","maximum","checkMax","isMax","index","lv","wallet","costCoin","coin","outputCoin","costPower","power","outputPower","Math","ceil","max","_lifeRatio","num","videoUpLv","upAttribute","waitingBuild","scheduleOnce","setConsume","newBuild","unlockSConstruct","SConstruct","getComponent","unlock","MainView","gameMsg","strReplace","matchData","setCoin","setPower","w","weightGetValue","exitAI","enabled","destroy","apply","statesList","other","defend","_time"],"mappings":"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","sourceRoot":"/","sourcesContent":["var e=require;\nvar t=module;\nvar o=exports;\n\"use strict\";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;0<=s;s--)(i=e[s])&&(r=(a<3?i(r):3<a?i(t,o,r):i(t,o))||r);return 3<a&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,\"__esModule\",{value:!0}),o.BuildAIOperation_Type=o.BuildAI_Type=void 0;var r,s,c=e(\"AppCommon\"),l=e(\"ListenID\"),p=e(\"FSMBase\"),d=e(\"Cfg\"),u=e(\"ConstructVideoUnlock\");(t=r=o.BuildAI_Type||(o.BuildAI_Type={}))[t.Not=0]=\"Not\",t[t.Check=1]=\"Check\",t[t.Idle=2]=\"Idle\",t[t.Doit=3]=\"Doit\",(e=s=o.BuildAIOperation_Type||(o.BuildAIOperation_Type={}))[e.Not=0]=\"Not\",e[e.Build=1]=\"Build\",e[e.Up=2]=\"Up\",e[e.Sell=3]=\"Sell\";var f,t=cc._decorator,e=t.ccclass,e=(t.property,f=p.default,i(h,f),h.prototype.initState=function(e,t){var o=this;this._AiParameter=t,this.ower=e,this.initPolicy(),t&&(cc.log(\"初始化所有状态:\",t.name,t.id),this.schedule(this.newThink,1+c.default.GetRandomNum(0,5)/10),this.setAIState(r.Check),this._isActive=!0,c.default.CONFIG_INFO.AITag&&cc.resources.load(\"prefab/AITest/AITag\",cc.Prefab,function(e,t){t=cc.instantiate(t);t.setParent(o.node),t._components[0].initFun.AITag(o.ower)}),this.buildMax=JSON.parse(t.buildingMax),this.ower.myDoor.node.on(l.ListenID.Send_Hurt,this.getHurt,this))},h.prototype.onDisable=function(){this.unscheduleAllCallbacks()},h.prototype.initPolicy=function(){var e,t=this.ower.myBed.myTerritoryMap;for(e in t)for(var o in t[e]){var n=t[e][o];this.pointSeting[n.name?\"attack\":\"other\"].push({x:e,y:o,sort:+n.name||0})}this.pointSeting.attack=c.default.arrCompare(this.pointSeting.attack,\"sort\",0),this.getPolicy.resource[0]=this.ower.myBed.attribute.buildingID;var i=this.ower.skillManage.getType(2);this.ower.CDManage.InitItem(i,180)},h.prototype.newThink=function(){var e,t,o,n;this._isActive&&!c.default.GScene.isPause&&(this.ower.skillManage.useSkill(this.ower.skillManage.getType(4)),this.currentState==r.Check)&&(e=c.default.MapClr.monsterList[0].attribute.data,n=0<this.ower.myCapabilities.hp/e.atk-c.default.MapClr.monsterList[0]._life/(this.ower.myCapabilities.atk||.1)?1:2,(o=this.getWeight(this.getPolicy.first,this._AiParameter[\"type\"+n]))&&this.checkPolicy(o.id)&&(t=this.getPolicy[o.id],(e=this.getWeight(t,this._AiParameter[o.id+n]))&&(t=void 0,\"number\"==typeof e.id?t=c.default.MapClr.arcIDList[e.id].id:0<e.id.length&&(t=c.default.MapClr.arcIDList[c.default.GetArrTarge(e.id)].id),t&&(n=d.Cfg.Building1.get(t),this.checkLimt(n)||!this.checkRoomIsSpace()?(e=this.getNotMaxArc(n))?(t=d.Cfg.Building1.get(+e.attribute.data.id+1))&&this.checkOperation({type:s.Up,arcTag:e,arcCfg:t}):this.renounceTarget(o.id,n):(o=this.checkSpace(o.id,n))&&this.checkOperation({type:s.Build,pos:o,arcCfg:n})))))},h.prototype.checkOperation=function(e){var t=this.checkNeetTiem(e.arcCfg);e.time=t+2,t<0?this.newOperation(e):t<this.toleranceTime?this.setWaiting(e):this.ower.skillManage.useSkill(this.ower.skillManage.getType(2))},h.prototype.checkPolicy=function(e){for(var t in this.getPolicy[e]){if(\"number\"==typeof this.getPolicy[e][t]&&0!=this.getPolicy[e][t])return!0;if(\"object\"==typeof this.getPolicy[e][t])for(var o in this.getPolicy[e][t])if(0!=this.getPolicy[e][t][o])return!0}var n=this.getPolicy.first.indexOf(e);return this.getPolicy.first[n]=0,!1},h.prototype.checkRoomIsSpace=function(){var e,t=this.ower.myBed.myTerritoryMap;for(e in t)for(var o in t[e])if(!t[e][o].arc)return!0;return!1},h.prototype.checkSpace=function(e){function t(e){for(var t in o.pointSeting[e]){t=o.pointSeting[e][t];if(!n[t.x][t.y].arc)return n[t.x][t.y]}return null}var o=this,n=this.ower.myBed.myTerritoryMap;return t(\"attack\"==(e=void 0===e?\"other\":e)?\"attack\":\"other\")||t(\"attack\"==e?\"other\":\"attack\")},h.prototype.renounceTarget=function(e,t){if(\"attack\"==e&&2!=t.buildingType){var o=this.getPolicy.attack[1].indexOf(t.buildID);return o<0?cc.log(\"attack没有目标\",t):void this.getPolicy.attack[1].splice(o,1)}o=this.getPolicy[e].indexOf(t.buildID);if(o<0)return cc.log(\"没有目标\",t);this.getPolicy[e][o]=0},h.prototype.checkLimt=function(e){return 0<=[1,3].indexOf(e.buildingType)||this.ower.myBuildNum[e.buildingType]>=this.buildMax[e.buildingType]||e.maximum&&this.ower.myBuildNum[e.buildingType]>=e.maximum},h.prototype.checkMax=function(e){return e.attribute.isMax},h.prototype.getNotMaxArc=function(e){var t,o=this.ower.myBed.myTerritoryMap,n=[],i=[];for(t in o)for(var a in o[t]){a=o[t][a];a.arc&&a.arc._isActive&&a.arc.attribute&&a.arc.attribute.buildingType==e.buildingType&&(this.checkMax(a.arc)||(i.push({index:n.length,lv:a.arc.attribute.lv}),n.push(a.arc)))}return 0==n.length?null:n[(i=c.default.arrCompare(i,\"lv\",0))[0].index]},h.prototype.checkNeetTiem=function(e){var t,o=this.ower.wallet,n=this.ower.myCapabilities,i=[];return e.costCoin&&(t=(e.costCoin-o.coin)/(n.outputCoin||.1),i.push(t)),e.costPower&&(n=(e.costPower-o.power)/(n.outputPower||.1),i.push(n)),2<=i.length?Math.ceil(Math.max(i[0],i[1])):Math.ceil(i[0])},h.prototype.getHurt=function(e){this.ower.myDoor._isActive&&(this.ower.myDoor._lifeRatio<.8&&this.ower.skillManage.useSkill(1),this.ower.myDoor._lifeRatio<.1&&this.ower.skillManage.useSkill(this.ower.skillManage.getType(3)),2*-e.num>=this.ower.myDoor._life&&0==this.videoUpLv[3]&&!this.ower.myDoor.attribute.isMax&&(this.videoUpLv[3]++,this.ower.myDoor.upAttribute()),this.ower.skillManage.useSkill(this.ower.skillManage.getType(6)))},h.prototype.setWaiting=function(e){var t=this;this.waitingBuild=e.arcCfg,this.setAIState(r.Idle),this.scheduleOnce(function(){t.newOperation(e),t.waitingBuild=null},e.time)},h.prototype.newOperation=function(e){var t=this;e.type==s.Build?this.setConsume(e.arcCfg,function(){c.default.MapClr.newBuild(e.arcCfg,e.pos,t.ower)}):e.type==s.Up&&this.setConsume(e.arcCfg,function(){e.arcTag.upAttribute()}),this.setAIState(r.Check)},h.prototype.unlockSConstruct=function(e,t){for(var o in this.ower.myBed.SConstruct){o=this.ower.myBed.SConstruct[o];if(o.attribute.buildingType==e.buildingType)return o.getComponent(u.default).unlock(),t&&t(),void c.default.MainView.gameMsg(c.default.strReplace(\" %1d完成%2d的建造\",this.ower.matchData.name,e.name))}},h.prototype.setConsume=function(e,t){var o=this.ower.wallet;return e.costCoin&&e.costCoin>o.coin?cc.log(\"AI金币不足\",e.costCoin,o.coin):e.costPower&&e.costPower>o.power?cc.log(\"AI水滴不足\",e.costPower,o.power):(e.costCoin&&this.ower.setCoin(-e.costCoin),e.costPower&&this.ower.setPower(-e.costPower),void t())},h.prototype.getWeight=function(e,t){var o,n=[],i=!0;for(o in t)n.push({id:e[o],w:e[o]?t[o]:0}),0!=e[o]&&(i=!1);return i?null:c.default.weightGetValue(n)},h.prototype.setAIState=function(e){this.currentState=e},h.prototype.exitAI=function(){this._isActive=!1,this.enabled=!1,this.destroy()},a([e],h));function h(){var e=null!==f&&f.apply(this,arguments)||this;return e._isActive=!1,e.statesList=[],e.toleranceTime=30,e.pointSeting={attack:[],other:[]},e.getPolicy={first:[\"resource\",\"defend\",\"attack\"],resource:[1,5,6,13],defend:[4,10,12],attack:[3,[11,14,15,16,17,18,19,20]]},e.videoUpLv={3:0},e._time=0,e}o.default=e"]}