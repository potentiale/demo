{"version":3,"sources":["assets\\scripts\\GridView.js"],"names":["e","require","t","module","o","exports","n","i","__extends","Object","setPrototypeOf","__proto__","Array","prototype","hasOwnProperty","call","constructor","create","a","__decorate","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","s","defineProperty","value","GRID_TYPE","c","l","p","d","u","f","h","m","cc","_decorator","y","ccclass","property","menu","GRID_HORIZONTAL","GRID_VERTICAL","g","Component","_","addNodeCreateEvent","pool_array","firstLoad","push","scrollToCell","layout_obj","getPosByIndex","item_size","grid_view_type","v2","x","key_count","scrollview","scrollToPercentHorizontal","getMaxScrollOffset","scrollToOffset","doFresh","moveToTop","Vec2","ZERO","loadData","init","data_list","count","getBoundingRect","content","height","width","node","parent_size","onLoadData","onEnable","_scrollEnabled","_unregisterEvent","onDestroy","clear","dataCallBack","_freshWorks","has_init","on","onScrolling","getComponent","Widget","updateAlignment","instantiate","templete","enabled","parent","scale","destroy","horizontal","vertical","TwoDHorizontalLayoutObject","vertical_layout_type","vertical_layout","viewport_length","TwoDLayoutObject","horizontal_layout_type","horizontal_layout","enableAutoScale","_autoScaleComponent","AutoScaleComponent","itemSize","parentSize","type","space","keyCount","getScale","_scaleRatio","item_anchor_point","data","getAnchorPoint","Math","ceil","template","max_count","name","onInit","getCurVisibleIndex","and","last_visible_range","Invert","isNullRange","floor","left","right","getObj","active","removeWork","freshArea","compareSection","freshFinish","freshItemInFrames","addWork","_onSiblingIndexChanged","removeComponent","calculatePos","onRefresh","setPosition","MathSection","MathUtils","Clamp","refresh","Enum","tooltip","LAYOUT_HORIZONTAL_TYPE","LAYOUT_VERTICAL_TYPE","ScrollView","Prefab","Integer","min","Node","readonly","apply","CENTER","TOP","PoolArray","GridViewFreshWork"],"mappings":"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","sourceRoot":"/","sourcesContent":["var e=require;\nvar t=module;\nvar o=exports;\n\"use strict\";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;0<=s;s--)(i=e[s])&&(r=(a<3?i(r):3<a?i(t,o,r):i(t,o))||r);return 3<a&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,\"__esModule\",{value:!0}),o.GRID_TYPE=void 0;var r,s=e(\"PoolArray\"),c=e(\"GridViewCell\"),l=e(\"TwoDLayoutObject\"),p=e(\"TwoDHorizontalLayoutObject\"),d=e(\"MathSection\"),u=e(\"MathUtils\"),f=e(\"AutoScaleComponent\"),h=e(\"GridViewFreshWork\"),m=cc._decorator,y=m.ccclass,t=m.property,e=m.menu;(m=r=o.GRID_TYPE||(o.GRID_TYPE={}))[m.GRID_HORIZONTAL=0]=\"GRID_HORIZONTAL\",m[m.GRID_VERTICAL=1]=\"GRID_VERTICAL\";var g,e=(g=cc.Component,i(_,g),_.prototype.addNodeCreateEvent=function(e){this.pool_array.firstLoad.push(e)},_.prototype.scrollToCell=function(e){var t=this.layout_obj.getPosByIndex(e),o=this.layout_obj.item_size,n=null;switch(this.grid_view_type){case r.GRID_HORIZONTAL:(n=cc.v2(t.x/this.layout_obj.key_count+.5*o.x,0)).x<=o.x&&(n.x=0),this.scrollview.scrollToPercentHorizontal(n.x/this.scrollview.getMaxScrollOffset().x,.15);break;case r.GRID_VERTICAL:n=cc.v2(0,-t.y-.5*o.y),this.scrollview.scrollToOffset(n,.1);break;default:n=cc.v2(0,0),this.scrollview.scrollToOffset(n)}this.doFresh()},_.prototype.moveToTop=function(){null!==this.scrollview&&this.scrollview.scrollToOffset(cc.Vec2.ZERO,.1)},_.prototype.loadData=function(e){this.init(),e.length>=this.data_list.length||this.moveToTop(),this.data_list=e,this.layout_obj.count=this.data_list.length;var t=cc.Vec2.ZERO;switch(this.grid_view_type){case r.GRID_VERTICAL:var o=this.layout_obj.getBoundingRect().y;this.content.height=o,this.content.width=this.node.width,t.x=this.node.width,t.y=o;break;case r.GRID_HORIZONTAL:o=this.layout_obj.getBoundingRect().x;this.content.width=o,this.content.height=this.node.height,t.x=o,t.y=this.node.height}this.layout_obj.parent_size=t,this.onLoadData(),this.doFresh()},_.prototype.onLoadData=function(){},_.prototype.onEnable=function(){null!==this.scrollview&&(this._scrollEnabled||this.scrollview._unregisterEvent())},_.prototype.onDestroy=function(){this.pool_array.clear(),this.dataCallBack=null,this._freshWorks.clear()},_.prototype.init=function(){var n=this;if(!this.has_init){this.has_init=!0,this.node.on(\"scrolling\",this.onScrolling,this),this.node.getComponent(cc.Widget)&&this.node.getComponent(cc.Widget).updateAlignment();var e=cc.instantiate(this.templete),t=e.getComponent(cc.Widget);t&&!0===t.enabled&&(e.parent=this.node,t.updateAlignment());var o=e.width*e.scale,t=e.height*e.scale;e.destroy();var i=0,o=new cc.Vec2(o,t);switch(this.grid_view_type){case r.GRID_HORIZONTAL:null!==this.scrollview&&(this.scrollview.horizontal=!0,this.scrollview.vertical=!1),this.layout_obj=new p.TwoDHorizontalLayoutObject,this.layout_obj.vertical_layout_type=this.vertical_layout,this.viewport_length=this.node.width;break;case r.GRID_VERTICAL:null!==this.scrollview&&(this.scrollview.horizontal=!1,this.scrollview.vertical=!0),this.layout_obj=new l.TwoDLayoutObject,this.layout_obj.horizontal_layout_type=this.horizontal_layout,this.viewport_length=this.node.height}switch(this.enableAutoScale&&null===this._autoScaleComponent&&(this._autoScaleComponent=new f.AutoScaleComponent,this._autoScaleComponent.itemSize=o,this._autoScaleComponent.parentSize=new cc.Vec2(this.node.width,this.node.height),this._autoScaleComponent.type=this.grid_view_type,this._autoScaleComponent.space=this.space,this._autoScaleComponent.keyCount=this.key_count,t=this._autoScaleComponent.getScale(),this._scaleRatio=t),this.layout_obj.key_count=this.key_count,this.layout_obj.space=this.space,this.layout_obj.item_anchor_point=this.templete.data.getAnchorPoint(),this.layout_obj.item_size=o,this.grid_view_type){case r.GRID_HORIZONTAL:i=this.layout_obj.item_size.x+this.space.x;break;case r.GRID_VERTICAL:i=this.layout_obj.item_size.y+this.space.y}o=(Math.ceil(this.viewport_length/i)+1)*this.key_count;this.pool_array.parent=this.content,this.pool_array.template=this.templete,this.pool_array.max_count=o,this.pool_array.firstLoad.push(function(e,t,o){e.name=n.templete.name+\"_\"+o,e.scale*=n._scaleRatio,e.getComponent(c.default).onInit()})}},_.prototype.doFresh=function(){var e=this.getCurVisibleIndex(),t=e.and(this.last_visible_range),o=t.Invert(this.last_visible_range);if(!o.isNullRange())for(var n=Math.floor(o.left),i=Math.floor(o.right),a=n;a<=i;a++)this.pool_array.getObj(a,!1).active=!1,this._freshWorks.removeWork(a);this.freshArea(e,this.compareSection(e,t)),this.freshFinish(e)},_.prototype.freshItemInFrames=function(o){var n=this;this._freshWorks.addWork(o,function(){var e=n.pool_array.getObj(o,!1);e.active=!0,e._onSiblingIndexChanged();var t=e.getComponent(cc.Widget);t&&(e.removeComponent(t),e.width=n.layout_obj.item_size.x,e.height=n.layout_obj.item_size.y),n.calculatePos(e,o);t=n.data_list[o];null!==n.dataCallBack&&n.dataCallBack(e,t,o);e=e.getComponent(c.default);null!==e&&e.onRefresh(t,o)})},_.prototype.freshArea=function(e,t){if(!e.isNullRange()){var o=Math.floor(e.left),n=Math.floor(e.right);if(0<=t)for(var i=o;i<=n;i++){var a=i;this.freshItemInFrames(a)}else for(i=n;o<=i;i--)a=i,this.freshItemInFrames(a)}},_.prototype.freshFinish=function(e){this.last_visible_range=e},_.prototype.calculatePos=function(e,t){t=this.layout_obj.getPosByIndex(t);e.setPosition(t.x,t.y,0)},_.prototype.getCurVisibleIndex=function(){var e=new d.MathSection,t=0,o=0,n=0;this.grid_view_type===r.GRID_VERTICAL?(t=this.content.y,o=this.layout_obj.item_size.y+this.layout_obj.space.y,n=this.content.height):this.grid_view_type===r.GRID_HORIZONTAL&&(t=-this.content.x,o=this.layout_obj.item_size.x+this.layout_obj.space.x,n=this.content.width);var i=new d.MathSection;i.left=t,i.right=i.left+this.viewport_length;t=new d.MathSection;t.left=0,t.right=t.left+n;i=i.and(t);return i.isNullRange()||0===i.length()||i.left===i.right||(t=Math.floor(i.left/o),e.left=this.key_count*t,o=Math.ceil(i.right/o),e.right=o*this.key_count-1,e.right=u.MathUtils.Clamp(e.right,0,this.layout_obj.count-1)),e},_.prototype.onScrolling=function(){this.refresh()},_.prototype.refresh=function(){var e=this.getCurVisibleIndex(),t=e.and(this.last_visible_range),o=t.Invert(this.last_visible_range);if(!o.isNullRange())for(var n=Math.floor(o.left),i=Math.floor(o.right),a=n;a<=i;a++)this.pool_array.getObj(a,!1).active=!1,this._freshWorks.removeWork(a);n=t.Invert(e);n.isNullRange()||this.freshArea(n,this.compareSection(n,t)),this.freshFinish(e)},_.prototype.compareSection=function(e,t){return e.isNullRange()||!t.isNullRange()&&e.left<t.left?-1:1},a([t({type:cc.Enum(r),tooltip:\"水平/竖直\"})],_.prototype,\"grid_view_type\",void 0),a([t({type:cc.Enum(l.LAYOUT_HORIZONTAL_TYPE),tooltip:\"水平对齐方式 - 左 / 中 / 右\"})],_.prototype,\"horizontal_layout\",void 0),a([t({type:cc.Enum(l.LAYOUT_VERTICAL_TYPE),tooltip:\"竖直对齐方式 - 上 / 中 / 下\"})],_.prototype,\"vertical_layout\",void 0),a([t({tooltip:\"cell之间的水平/竖直间距\"})],_.prototype,\"space\",void 0),a([t({type:cc.ScrollView})],_.prototype,\"scrollview\",void 0),a([t({type:cc.Prefab,tooltip:\"cell的预制物\"})],_.prototype,\"templete\",void 0),a([t({type:cc.Integer,min:1,tooltip:\"行列数,当GRID_TYPE为水平时,值只会为1\"})],_.prototype,\"key_count\",void 0),a([t({type:cc.Node,tooltip:\"\",readonly:!0})],_.prototype,\"content\",void 0),a([t],_.prototype,\"enableAutoScale\",void 0),a([y,e(\"UtilComponent/GridView\")],_));function _(){var e=null!==g&&g.apply(this,arguments)||this;return e.grid_view_type=r.GRID_VERTICAL,e.horizontal_layout=l.LAYOUT_HORIZONTAL_TYPE.CENTER,e.vertical_layout=l.LAYOUT_VERTICAL_TYPE.TOP,e.space=cc.Vec2.ZERO,e.scrollview=null,e.templete=null,e.key_count=1,e.content=null,e.enableAutoScale=!0,e.dataCallBack=null,e.viewport_length=0,e.data_list=[],e.layout_obj=null,e._autoScaleComponent=null,e._scaleRatio=1,e.last_visible_range=new d.MathSection,e.pool_array=new s.PoolArray,e.has_init=!1,e._scrollEnabled=!0,e._freshWorks=new h.GridViewFreshWork,e}o.default=e"]}