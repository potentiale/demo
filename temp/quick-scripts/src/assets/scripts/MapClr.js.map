{"version":3,"sources":["assets\\scripts\\MapClr.js"],"names":["e","require","t","module","o","exports","n","i","__extends","Object","setPrototypeOf","__proto__","Array","prototype","hasOwnProperty","call","constructor","create","a","__decorate","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","s","defineProperty","value","c","l","p","d","u","f","h","m","y","g","_","v","C","S","b","T","A","M","cc","_decorator","ccclass","property","Component","w","onLoad","window","MapClr","modelManage","ModelManage","start","classificationArray","Cfg","Building1","getAll","shopItemIdList","Shop","arcIDList","_maxLevel","arcTypeList","resources","load","Prefab","BulletPool","CCTool","GamePool","Bullet_2Pool","DialoguePool","LabelPool","touchMoveCamera","node","getComponent","setTouchMoveCamera","clearObj","monsterList","roleList","bedList","doorList","buildingList","myegg","myMap","ObjBox","active","unscheduleAllCallbacks","GScene","GamePopBox","clearMap","destroyAllChildren","player","setPhysics","setCollision","initMap","log","Node","setParent","setPosition","Vec2","ZERO","newPlayer","instantiate","_pos","x","roleID","id","init","newMonster","newNPC","name","type","newDoor","getObjectGroup","getObjects","getChildByName","destroy","getPoint","addSelf","v2","width","height","newBed","newSpecialtower","split","get","getTMapPosition","offset","tileSize","newBuildBase","_roomID","initAttribute","setState","SConstruct","push","newEgg","Number","baseId","buildingType","getV2Pos","newBuild","myBed","setTerritoryMapItem","isPlayer","Notifier","send","ListenID","Task_UpdateTask","TaskType","GetBuilding","buildId","attribute","data","newBullet","GetFormPool","setBullet","System","InCamera","opacity","tween","to","newBullet2","setBullet_2","newDialogue","CONFIG_INFO","Ischeckdialog","set","newEffects","zIndex","newTrack","setNode","newMonitor","stop","sequence","delay","isPause","repeatForever","update","onUpdate","newLabelTips","Color","GREEN","GameLabelBox","scale","children","_components","string","SpriteFrame","spriteFrame","parallel","by","ReturnPool","newWallColl","MapCollisionBox","addChild","setAnchorPoint","group","addComponent","RigidBody","RigidBodyType","Static","points","PhysicsPolygonCollider","PhysicsBoxCollider","size","apply","getPathfindingMap","getLayer","getTiles","toString","pathfindingMap","mapSize","splice","map","enabled","shakeMax","GameCamera","shakeTween","t_x","t_y","repeat","moveTo","position","getWorldPos","convertToWorldSpaceAR","winSize","sub","getPath","aStar","find_path","console","getMapPos","Math","floor","deleteNode","_pool","removeFromParent","RoleBox","MatchRoleData","AiBossData"],"mappings":"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","sourceRoot":"/","sourcesContent":["var e=require;\nvar t=module;\nvar o=exports;\n\"use strict\";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;0<=s;s--)(i=e[s])&&(r=(a<3?i(r):3<a?i(t,o,r):i(t,o))||r);return 3<a&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,\"__esModule\",{value:!0});var r,c=e(\"AppCommon\"),s=e(\"CCTool\"),l=e(\"AStar\"),p=e(\"ListenID\"),d=e(\"Notifier\"),u=e(\"Cfg\"),f=e(\"Dialogue\"),h=e(\"TrackItem\"),m=e(\"TaskCtrl\"),y=e(\"TouchMoveCamera\"),g=e(\"Bed\"),_=e(\"Bullet\"),v=e(\"ConstructBase\"),C=e(\"Door\"),S=e(\"EggBase\"),b=e(\"LivingThingBase\"),T=e(\"Npc\"),A=e(\"Role\"),M=e(\"ModelManage\"),t=cc._decorator,e=t.ccclass,t=t.property,e=(r=cc.Component,i(w,r),w.prototype.onLoad=function(){window.MapClr=this,(c.default.MapClr=this).modelManage=new M.ModelManage},w.prototype.start=function(){var e,o=this,t=c.default.classificationArray(u.Cfg.Building1.getAll(),\"buildID\");for(e in this.shopItemIdList=c.default.classificationArray(u.Cfg.Shop.getAll(),\"itemID\"),this.arcIDList={},t)this.arcIDList[e]=t[e][0],this.arcIDList[e]._maxLevel=t[e].length;this.arcTypeList=c.default.classificationArray(this.arcIDList,\"buildingType\"),cc.resources.load(\"prefab/game/Element/Bullet\",cc.Prefab,function(e,t){o.BulletPool=new s.CCTool.GamePool(\"Bullet\",t,1,o)}),cc.resources.load(\"prefab/game/Element/Bullet_2\",cc.Prefab,function(e,t){o.Bullet_2Pool=new s.CCTool.GamePool(\"Bullet_2\",t,1,o)}),cc.resources.load(\"prefab/game/ui/Dialogue\",cc.Prefab,function(e,t){o.DialoguePool=new s.CCTool.GamePool(\"Dialogue\",t,1,o)}),cc.resources.load(\"prefab/game/ui/MoneyLabe\",cc.Prefab,function(e,t){o.LabelPool=new s.CCTool.GamePool(\"MoneyLabe\",t,1,o)}),this.touchMoveCamera=this.node.getComponent(y.default),this.setTouchMoveCamera(!1)},w.prototype.clearObj=function(){this.monsterList=[],this.roleList=[],this.bedList=[],this.doorList=[],this.buildingList=[],this.myegg=[],this.myMap=null,this.setTouchMoveCamera(!1),this.ObjBox&&this.ObjBox.active&&(this.unscheduleAllCallbacks(),this.ObjBox.active=!1,c.default.GScene.GamePopBox.active=!1,this.clearMap())},w.prototype.clearMap=function(){this.unscheduleAllCallbacks(),this.node.destroyAllChildren(),this.monsterList.length=0,c.default.GScene.player=null,c.default.GScene.setPhysics(!1),c.default.GScene.setCollision(!1)},w.prototype.initMap=function(e,t){cc.log(\"加载地图\"),this.clearMap(),this.ObjBox=new cc.Node(\"ObjBox\"),this.ObjBox.setParent(this.node),this.ObjBox.setPosition(cc.Vec2.ZERO),this.modelManage.load(e,t)},w.prototype.newPlayer=function(o,n){var i=this;cc.resources.load(\"prefab/game/Element/Player\",cc.Prefab,function(e,t){i.myMap&&((t=cc.instantiate(t)).setParent(i.ObjBox),t.setPosition(o._pos.x,o._pos.y),(t=t.getComponent(A.default)).roleID=+o.id,t.init(),n(t))})},w.prototype.newMonster=function(o,e,n){var i=this;cc.resources.load(\"prefab/game/Element/\"+e,cc.Prefab,function(e,t){i.myMap&&((t=cc.instantiate(t)).setParent(i.ObjBox),t.setPosition(o._pos.x,o._pos.y),(t=t.getComponent(b.default)).init(),n(t))})},w.prototype.newNPC=function(o,n){var i=this;cc.resources.load(\"prefab/game/Element/NPC\",cc.Prefab,function(e,t){i.myMap&&((t=cc.instantiate(t)).setParent(i.ObjBox),t.setPosition(o._pos.x,o._pos.y),(t=t.getComponent(T.default)).init({name:o.type}),n(t))})},w.prototype.newDoor=function(a,r){var s=this,c=this.myMap.getObjectGroup(a).getObjects();this.myMap.node.getChildByName(a).destroy(),cc.resources.load(\"prefab/game/Element/Door\",cc.Prefab,function(e,t){for(var o=0;o<c.length;o++){if(!s.myMap)return;var n=c[o],i=cc.instantiate(t);i.name=a,i.setParent(s.ObjBox),i.setPosition(s.getPoint(n).addSelf(cc.v2(n.width/2,n.height/2))),i.getComponent(C.default).init(n)}r&&r()})},w.prototype.newBed=function(a,r){var s=this,c=this.myMap.getObjectGroup(a).getObjects();this.myMap.node.getChildByName(a).destroy(),cc.resources.load(\"prefab/game/Element/Bed\",cc.Prefab,function(e,t){if(s.myMap){for(var o=0;o<c.length;o++){var n=c[o],i=cc.instantiate(t);i.name=a,i.setParent(s.ObjBox),i.setPosition(s.getPoint(n).addSelf(cc.v2(n.width/2,n.height/2))),i.getComponent(g.default).init(n)}r&&r()}})},w.prototype.newSpecialtower=function(e){var i=this,a=this.myMap.getObjectGroup(e).getObjects();this.myMap.node.getChildByName(e).destroy();var t,r=this;for(t in a)!function(e){var e=a[e],t=e.name.split(\"_\"),o=u.Cfg.Building1.get(t[2]),n=r.getTMapPosition(e.offset,r.myMap.node).addSelf(cc.v2(r.tileSize.width/2,r.tileSize.width/2));r.newBuildBase(o,{x:0,y:0},function(e){e.node.setPosition(n),e._roomID=t[1],e.initAttribute(o),e.setState(!1),i.bedList[t[1]].SConstruct.push(e)})}(t)},w.prototype.newEgg=function(e){var a=this,e=this.myMap.getObjectGroup(e);if(e)for(var t=e.getObjects(),o=0;o<t.length;o++)!function(e){var o=t[e],e=o.name.split(\"_\");if(e.length<=1)return;var n=u.Cfg.Building1.get(e[1]),i=Number(e[1]);cc.resources.load(\"prefab/game/Element/\"+e[0],cc.Prefab,function(e,t){a.myMap&&((t=cc.instantiate(t)).setParent(a.ObjBox),t.setPosition(a.getPoint(o).addSelf(cc.v2(o.width/2,-o.height/2))),t=t.getComponent(S.default),n?t.initAttribute(n,null):t.baseId=i,a.myegg.push(t))})}(o)},w.prototype.newBuildBase=function(e,o,n){var i=this,e=\"Building_\"+e.buildingType;cc.resources.load(\"prefab/game/Element/\"+e,cc.Prefab,function(e,t){i.myMap&&((t=cc.instantiate(t)).setParent(i.ObjBox),t.setPosition(i.getV2Pos(o)),t=t.getComponent(v.default),n&&n(t))})},w.prototype.newBuild=function(t,o,n){this.newBuildBase(t,o,function(e){n.myBed.setTerritoryMapItem(o,e),e.initAttribute(t,n),n.isPlayer&&d.Notifier.send(p.ListenID.Task_UpdateTask,m.TaskType.GetBuilding,{buildId:e.attribute.data.id}),e.setState(!0)})},w.prototype.newBullet=function(e,t){var o;this.myMap&&((o=this.BulletPool.GetFormPool(this.ObjBox)).setPosition(e),o.getComponent(_.default).setBullet(t),s.CCTool.System.InCamera(e)&&(o.opacity=0,cc.tween(o).to(.1,{opacity:255}).start()))},w.prototype.newBullet2=function(e,t){var o;this.myMap&&((o=this.Bullet_2Pool.GetFormPool(this.ObjBox)).setPosition(e),o.getComponent(_.default).setBullet_2(t))},w.prototype.newDialogue=function(e,t,o,n){void 0===n&&(n=3),c.default.CONFIG_INFO.Ischeckdialog&&this.myMap&&((e=this.DialoguePool.GetFormPool(e)).setPosition(t),e.getComponent(f.default).set(o,n))},w.prototype.newEffects=function(o,e,n){var i=this;(n||s.CCTool.System.InCamera(o))&&cc.resources.load(\"effects/\"+e,cc.Prefab,function(e,t){i.myMap&&((t=cc.instantiate(t)).setParent(i.ObjBox),t.setPosition(o),t.zIndex=99,n&&n(t))})},w.prototype.newTrack=function(o,n){var i=this;cc.resources.load(\"prefab/game/ui/TrackItem\",cc.Prefab,function(e,t){i.myMap&&((t=cc.instantiate(t)).getComponent(h.default).setNode(o),t.setParent(c.default.GScene.GamePopBox),n&&n(o))})},w.prototype.newMonitor=function(t,e,o,n){var i=this;void 0===e&&(e={}),void 0===o&&(o=.3),void 0===n&&(n=10);function a(){r.stop()}var r,s=0;return r=cc.tween(e).sequence(cc.tween().delay(o),cc.tween().call(function(){return i.myMap?void(c.default.GScene.isPause||(e=t(),((s+=o)>=n||e)&&a())):a();var e})).repeatForever().start()},w.prototype.update=function(e){c.default.GScene.isPause||this.myMap&&this.modelManage.onUpdate(e)},w.prototype.newLabelTips=function(e,t,o,n){var i,a=this;void 0===o&&(o=cc.Color.GREEN),void 0===n&&(n=\"Fish coin\"),s.CCTool.System.InCamera(t)&&((i=this.LabelPool.GetFormPool(c.default.GScene.GameLabelBox)).setPosition(t),i.opacity=0,i.scale=1,i.children[1]._components[0].string=e,cc.resources.load(\"img/gameResources/\"+n,cc.SpriteFrame,function(e,t){i.children[0]._components[0].spriteFrame=t}),cc.tween(i).to(.1,{opacity:255}).parallel(cc.tween().by(1,{y:130}),cc.tween().delay(.7).to(.3,{scale:0}),cc.tween().delay(.5).to(1,{opacity:0})).call(function(){a.LabelPool.ReturnPool(i)}).start())},w.prototype.newWallColl=function(e){this.MapCollisionBox.destroyAllChildren();for(var t=0;t<e.length;t++){var o=e[t],n=new cc.Node(\"coll_\"+t);this.MapCollisionBox.addChild(n),n.setPosition(this.getTMapPosition(o.offset,this.myMap.node)),n.setAnchorPoint(0,1),n.group=\"Solid\",n.addComponent(cc.RigidBody).type=cc.RigidBodyType.Static;var i=void 0;if(o.points){for(var i=n.addComponent(cc.PhysicsPolygonCollider),a=[],r=0;r<o.points.length;r++)a.push(cc.v2(o.points[r].x,o.points[r].y));i.points=a}else(i=n.addComponent(cc.PhysicsBoxCollider)).size=cc.size(o.width,o.height),i.offset=cc.v2(o.width/2,-o.height/2);i&&i.apply()}},w.prototype.getPathfindingMap=function(){var e=(e=this.myMap.getLayer(\"ground_road\").getTiles()).toString().split(\",\");this.pathfindingMap=null,this.pathfindingMap=[];for(var t=this.mapSize.height-1;0<=t;t--)this.pathfindingMap[t]=e.splice(0,this.mapSize.width),this.pathfindingMap[t]=this.pathfindingMap[t].map(Number);this.myMap.node.getChildByName(\"ground_road\").destroy()},w.prototype.setTouchMoveCamera=function(e){this.touchMoveCamera.enabled=e},w.prototype.shakeMax=function(e,t){var o=(e=void 0===e?c.default.GScene.GameCamera.node:e).x,n=e.y,i=t=void 0===t?1:t;this.shakeTween&&this.shakeTween.stop(),this.shakeTween=cc.tween(e),e.setPosition(e.t_x||o,e.t_y||n),1<=t?this.shakeTween.repeat(t,cc.tween().sequence(cc.moveTo(.03,cc.v2(o+(5+i),n+(i+7))),cc.moveTo(.03,cc.v2(o-(6+i),n+(i+7))),cc.moveTo(.03,cc.v2(o-(13+i),n+(i+3))),cc.moveTo(.03,cc.v2(o+(3+i),n-(6+i))),cc.moveTo(.03,cc.v2(o-(5+i),n+(i+5))),cc.moveTo(.03,cc.v2(o+(2+i),n-(8+i))))):this.shakeTween.to(.03,{position:cc.v2(o+5*i,n+7*i)}).to(.03,{position:cc.v2(o-6*i,n+7*i)}).to(.03,{position:cc.v2(o-13*i,n+3*i)}).to(.03,{position:cc.v2(o+3*i,n-6*i)}).to(.03,{position:cc.v2(o-5*i,n+5*i)}).to(.03,{position:cc.v2(o+2*i,n-8*i)}),this.shakeTween.to(.03,{position:cc.v2(o-(3+i),n-(5+i))}).to(.03,{position:cc.v2(o+(3+i),n+(i+5))}).to(.03,{position:cc.v2(o+(0+i),n+(i+0))}).call(function(){e.setPosition(e.t_x||o,e.t_y||n)}).start()},w.prototype.getPoint=function(e){return cc.v2(e.offset.x-this.myMap.node.width/2,-(e.offset.y-this.myMap.node.height/2))},w.prototype.getWorldPos=function(e){return e.convertToWorldSpaceAR(cc.v2(-cc.winSize.width/2,-cc.winSize.height/2)).sub(c.default.GScene.GameCamera.node.position)},w.prototype.getTMapPosition=function(e,t){return cc.v2(e.x-t.width/2,-e.y+t.height/2)},w.prototype.getPath=function(e,t,o){var n=l.aStar.find_path([e.y,e.x],[t.y,t.x],this.pathfindingMap,o=void 0===o?1:o);if(0==n.length)return console.log(\"没有合适的路径!~~~\"),[];var i,a=[];for(i in n)a.push(this.getV2Pos({x:n[i][1],y:n[i][0]}));return a},w.prototype.getMapPos=function(e){return{x:Math.floor((e.x+this.myMap.node.width/2)/this.tileSize.width),y:Math.floor((e.y+this.myMap.node.height/2)/this.tileSize.height)}},w.prototype.getV2Pos=function(e){return cc.v2((e.x+0)*this.tileSize.width-this.myMap.node.width/2+this.tileSize.width/2,(e.y+0)*this.tileSize.height-this.myMap.node.height/2+this.tileSize.width/2)},w.prototype.deleteNode=function(e){e&&(e._pool?e._pool.ReturnPool(e):(e.destroy(),e.removeFromParent(!1)))},a([t(cc.Node)],w.prototype,\"MapCollisionBox\",void 0),a([t(cc.Node)],w.prototype,\"RoleBox\",void 0),a([e],w));function w(){var e=null!==r&&r.apply(this,arguments)||this;return e.MapCollisionBox=null,e.arcIDList=[],e.arcTypeList=[],e.RoleBox=null,e.roleList=[],e.monsterList=[],e.buildingList=[],e.bedList=[],e.doorList=[],e.myegg=[],e.MatchRoleData=[],e.AiBossData=null,e.shopItemIdList={},e.pathfindingMap=[],e}o.default=e"]}