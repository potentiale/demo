{"version":3,"sources":["assets\\scripts\\AIState.js"],"names":["e","require","t","module","o","exports","n","i","__extends","Object","setPrototypeOf","__proto__","Array","prototype","hasOwnProperty","call","constructor","create","defineProperty","value","DieState","HurtState","AttackState","ChaseState","MoveState","IdleState","ReadyState","AIStateBase","AiParameter","StateType","a","Ready","Idle","Patrol","Move","Chase","React","Escape","Attack","Hurt","Treat","Die","idleTime","moveSpeed","chaseSpeed","AttackRange","r","move","_myTarget","_isControl","letV2","set","_manager","path","node","position","sub","normalize","add","mul","_AiParameter","Math","abs","x","mySkeleton","scaleX","setPosition","getDistance","splice","getZIndex","OnEnter","OnUpdate","OnExit","_timer","cc","v2","ower","s","c","setAnimation","apply","arguments","l","p","d","u","length","onMoveEnd","f","h","m","y","g","_","v","C"],"mappings":"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","sourceRoot":"/","sourcesContent":["var e=require;\nvar t=module;\nvar o=exports;\n\"use strict\";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,\"__esModule\",{value:!0}),o.DieState=o.HurtState=o.AttackState=o.ChaseState=o.MoveState=o.IdleState=o.ReadyState=o.AIStateBase=o.AiParameter=o.StateType=void 0;var a=e(\"AppCommon\");(t=o.StateType||(o.StateType={}))[t.Ready=0]=\"Ready\",t[t.Idle=1]=\"Idle\",t[t.Patrol=2]=\"Patrol\",t[t.Move=3]=\"Move\",t[t.Chase=4]=\"Chase\",t[t.React=5]=\"React\",t[t.Escape=6]=\"Escape\",t[t.Attack=7]=\"Attack\",t[t.Hurt=8]=\"Hurt\",t[t.Treat=9]=\"Treat\",t[t.Die=10]=\"Die\",o.AiParameter=function(){this.idleTime=1,this.moveSpeed=100,this.chaseSpeed=100,this.AttackRange=100};r.prototype.move=function(e){var t,o;this._myTarget._isControl||(this.letV2.set(this._manager.path[0]),t=this._manager.node.position,o=this.letV2.sub(t).normalize(),e=t.add(o.mul(this._AiParameter.moveSpeed*e*2)),.5<Math.abs(o.x)&&(e.x>this._myTarget.node.x?this._myTarget.mySkeleton.node.scaleX=-1:this._myTarget.mySkeleton.node.scaleX=1),this._manager.node.setPosition(e),a.default.getDistance(this.letV2,t)<20&&this._manager.path.splice(0,1),this._myTarget.getZIndex())},r.prototype.OnEnter=function(){},r.prototype.OnUpdate=function(){},r.prototype.OnExit=function(){},e=r;function r(e){this._timer=0,this.letV2=cc.v2(),this._manager=e,this._AiParameter=this._manager._AiParameter,this._myTarget=this._manager.ower}o.AIStateBase=e;var s,t=(i(c,s=e),c.prototype.OnEnter=function(){this._myTarget.setAnimation(\"starttalk\",!0)},c.prototype.OnUpdate=function(){},c.prototype.OnExit=function(){},c);function c(){return null!==s&&s.apply(this,arguments)||this}o.ReadyState=t;var l,t=(i(p,l=e),p.prototype.OnEnter=function(){this._myTarget.setAnimation(\"idle\",!0)},p.prototype.OnUpdate=function(){},p.prototype.OnExit=function(){},p);function p(){return null!==l&&l.apply(this,arguments)||this}o.IdleState=t;var d,t=(i(u,d=e),u.prototype.OnEnter=function(){this._myTarget.setAnimation(\"move\",!0)},u.prototype.OnUpdate=function(e){if(0==this._manager.path.length)return this._manager.onMoveEnd();this.move(e)},u.prototype.OnExit=function(){},u);function u(){return null!==d&&d.apply(this,arguments)||this}o.MoveState=t;var f,t=(i(h,f=e),h.prototype.OnEnter=function(){},h.prototype.OnUpdate=function(){},h.prototype.OnExit=function(){},h);function h(){return null!==f&&f.apply(this,arguments)||this}o.ChaseState=t;var m,t=(i(y,m=e),y.prototype.OnEnter=function(){this._myTarget.setAnimation(\"attack\")},y.prototype.OnUpdate=function(){},y.prototype.OnExit=function(){},y);function y(){return null!==m&&m.apply(this,arguments)||this}o.AttackState=t;var g,t=(i(_,g=e),_.prototype.OnEnter=function(){},_.prototype.OnUpdate=function(){},_.prototype.OnExit=function(){},_);function _(){return null!==g&&g.apply(this,arguments)||this}o.HurtState=t;var v,e=(i(C,v=e),C.prototype.OnEnter=function(){},C.prototype.OnUpdate=function(){},C.prototype.OnExit=function(){},C);function C(){return null!==v&&v.apply(this,arguments)||this}o.DieState=e"]}