{"version":3,"sources":["assets\\scripts\\Special_Fist.js"],"names":["e","require","t","module","o","exports","n","i","__extends","Object","setPrototypeOf","__proto__","Array","prototype","hasOwnProperty","call","constructor","create","a","__decorate","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","s","defineProperty","value","c","l","p","d","u","cc","_decorator","ccclass","menu","property","f","onInit","startPos","x","imgList","node","y","angle","_roomID","effectTrigger","searchRole","weightGetValue","searchRecentMoster","setHurt","MapClr","monsterList","_time","targetX","roleList","roleID","ower","_enemy","myDoor","attribute","data","parameter","getAngle","position","sub","tween","to","CCTool","Audio","CameraPlayer","checkTagIsActive","newEffects","emit","ListenID","Send_Hurt","HurtData","_life","type","GetProbability","instigateMonster","v2","start","_isActive","getMapPos","roomID","getPath","myFSM","path","target","setOwer","update","GScene","isPause","_isHaveUpDate","frequency","apply"],"mappings":"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","sourceRoot":"/","sourcesContent":["var e=require;\nvar t=module;\nvar o=exports;\n\"use strict\";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;0<=s;s--)(i=e[s])&&(r=(a<3?i(r):3<a?i(t,o,r):i(t,o))||r);return 3<a&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,\"__esModule\",{value:!0});var r,s=e(\"AppCommon\"),c=e(\"CCTool\"),l=e(\"ListenID\"),p=e(\"ConstructBase\"),d=e(\"ElementBase\"),u=cc._decorator,t=u.ccclass,e=u.menu,e=(u.property,r=p.default,i(f,r),f.prototype.onInit=function(){this.startPos={x:this.imgList[1].node.x,y:this.imgList[1].node.y},this.imgList[1].node.angle=1==this._roomID?-90:90},f.prototype.effectTrigger=function(){this.searchRole();var e=s.default.weightGetValue(this.searchRecentMoster());e&&(this.setHurt(s.default.MapClr.monsterList[e.i]),this._time=0)},f.prototype.searchRole=function(){if(!this.targetX)for(var e in s.default.MapClr.roleList){e=s.default.MapClr.roleList[e];if(e.roleID!=this.ower.roleID)return void((this._enemy=e).myDoor&&(this.targetX=e.myDoor.node.x))}},f.prototype.setHurt=function(e){var t=this,o=this.attribute.data.parameter,n=s.default.getAngle(e.node.position,this.node.position)-90,i=e.node.position.sub(this.node.position);this.imgList[1].node.angle=n,cc.tween(this.imgList[1].node).to(.1,{position:i}).call(function(){c.CCTool.Audio.CameraPlayer(t.node.position,\"Tower_Attack\"),t.checkTagIsActive(e)&&(s.default.MapClr.newEffects(e.node.position,\"bomb\"),e.node.emit(l.ListenID.Send_Hurt,new d.HurtData(-e._life*o[1],t.ower.roleID,t.ower.type)),s.default.GetProbability(o[2])&&t.instigateMonster(e))}).to(.2,{position:cc.v2(this.startPos.x,this.startPos.y)}).start()},f.prototype.instigateMonster=function(e){e._isActive=!1;var t=s.default.MapClr.getMapPos(cc.v2(this.targetX,e.node.y)),o=s.default.MapClr.getMapPos(this._enemy.myDoor.node.position),n=this.ower.roomID,n=s.default.MapClr.getPath(t,o,n);e.myFSM.path=n,e.myFSM.target=this._enemy,e.setOwer(this.ower),cc.tween(e.node).to(.1,{position:cc.v2(this.targetX,e.node.y)}).call(function(){e._isActive=!0}).start()},f.prototype.update=function(e){s.default.GScene.isPause||this._isHaveUpDate&&(this._time+=e,this._time>this.attribute.data.frequency&&this.effectTrigger())},a([t,e(\"gameElement/Special_Fist\")],f));function f(){var e=null!==r&&r.apply(this,arguments)||this;return e._time=0,e}o.default=e"]}