{"version":3,"sources":["assets\\scripts\\AssetLoader.js"],"names":["e","require","t","module","o","exports","Object","defineProperty","value","assetLoader","LoadResArgs","n","i","a","r","cc","js","isChildClassOf","s","makeLoadResArgs","arguments","length","Log","error","url","Array","urls","Asset","type","AssetManager","Bundle","bundle","onProgess","onCompleted","resources","prototype","_finishItem","loadRes","use","apply","get","startsWith","assetManager","loadRemote","load","preloadRes","preload","loadArray","loadResDir","loadDir","getDirWithPath","map","path","releaseAsset","getResKeeper","_resKeeper"],"mappings":"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","sourceRoot":"/","sourcesContent":["var e=require;\nvar t=module;\nvar o=exports;\n\"use strict\";Object.defineProperty(o,\"__esModule\",{value:!0}),o.assetLoader=o.LoadResArgs=void 0;function n(){}var i=e(\"ResKeeper\"),a=e(\"Log\");o.LoadResArgs=n;var r=(r=cc.js.isChildClassOf)||cc.isChildClassOf,e=(s.makeLoadResArgs=function(){if(arguments.length<1)return a.Log.error(\"_makeLoadResArgs error \"+arguments),null;if(1==arguments.length&&arguments[0]instanceof n)return arguments[0];var e={};if(\"string\"==typeof arguments[0])e.url=arguments[0];else{if(!(arguments[0]instanceof Array))return a.Log.error(\"_makeLoadResArgs error \"+arguments),null;e.urls=arguments[0]}for(var t=1;t<arguments.length;++t)1==t&&r(arguments[t],cc.Asset)?e.type=arguments[t]:t==arguments.length-1&&arguments[t]instanceof cc.AssetManager.Bundle?e.bundle=arguments[t]:\"function\"==typeof arguments[t]&&(t+1<arguments.length&&\"function\"==typeof arguments[t+1]?e.onProgess=arguments[t]:e.onCompleted=arguments[t]);return e.bundle||(e.bundle=cc.resources),e},s.prototype._finishItem=function(){},s.prototype.loadRes=function(){function e(e,t){e||n._finishItem(i.url,i.type,i.use,o),i.onCompleted&&i.onCompleted(e,t)}var o,n=this,i=s.makeLoadResArgs.apply(this,arguments),t=i.bundle.get(i.url,i.type);t?e(null,t):i.url.startsWith(\"https:\")?cc.assetManager.loadRemote(i.url,e):i.bundle.load(i.url,i.type,i.onProgess,e)},s.prototype.preloadRes=function(){function e(e,t){e||n._finishItem(i.url,i.type,i.use,o),i.onCompleted&&i.onCompleted(e,t)}var o,n=this,i=s.makeLoadResArgs.apply(this,arguments),t=i.bundle.get(i.url,i.type);t?e(null,t):i.bundle.preload(i.url,i.type,i.onProgess,e)},s.prototype.loadArray=function(){var n,i=this,a=s.makeLoadResArgs.apply(this,arguments);a.bundle.load(a.urls,a.type,a.onProgess,function(e,t){if(!e)for(var o=0;o<a.urls.length;++o)i._finishItem(a.urls[o],a.type,a.use,n);a.onCompleted&&a.onCompleted(e,t)})},s.prototype.loadResDir=function(){var n,i=this,a=s.makeLoadResArgs.apply(this,arguments);a.bundle.loadDir(a.url,a.type,a.onProgess,function(e,t){var o=a.bundle.getDirWithPath(a.url,a.type);!e&&o&&o.map(function(e){i._finishItem(e.path,a.type,a.use,n)}),a.onCompleted&&a.onCompleted(e,t)})},s.prototype.releaseAsset=function(e){e&&cc.assetManager.releaseAsset(e)},s.prototype.getResKeeper=function(){return this._resKeeper||(this._resKeeper=new i.default),this._resKeeper},s);function s(){this._resKeeper=null}o.default=e,o.assetLoader=new e"]}