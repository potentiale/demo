{"version":3,"sources":["assets\\scripts\\AIBuild_M2.js"],"names":["e","require","t","module","o","exports","n","i","__extends","Object","setPrototypeOf","__proto__","Array","prototype","hasOwnProperty","call","constructor","create","a","__decorate","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","s","defineProperty","value","c","l","p","cc","_decorator","ccclass","property","d","initState","_AiParameter","ower","initPolicy","log","name","id","schedule","newThink","setAIState","BuildAI_Type","Check","_isActive","CONFIG_INFO","AITag","resources","load","Prefab","instantiate","setParent","node","_components","initFun","buildMax","JSON","parse","buildingMax","myDoor","on","ListenID","Send_Hurt","getHurt","myBed","myTerritoryMap","pointSeting","push","x","y","sort","attack","arrCompare","getPolicy","resource","attribute","buildingID","GScene","isPause","currentState","_thinkNum","searchRole","checkSConstruct","Cfg","Building1","get","GetArrTarge","checkSpace","newOperation","type","BuildAIOperation_Type","Build","pos","arcCfg","checkAdvantage","getWeight","first","checkPolicy","MapClr","arcIDList","checkLimt","checkRoomIsSpace","getNotMaxArc","data","checkOperation","Up","arcTag","renounceTarget","gettimestamp","_initTime","specialtower","unlockSConstruct","_enemy","arc","indexOf","buildingType","Ghost1","parameter","hp","atk","myCapabilities","roleList","roleID","apply","statesList","toleranceTime","other","defend","monster","_time"],"mappings":"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","sourceRoot":"/","sourcesContent":["var e=require;\nvar t=module;\nvar o=exports;\n\"use strict\";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;0<=s;s--)(i=e[s])&&(r=(a<3?i(r):3<a?i(t,o,r):i(t,o))||r);return 3<a&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,\"__esModule\",{value:!0});var r,s=e(\"AppCommon\"),c=e(\"ListenID\"),l=e(\"Cfg\"),p=e(\"AIBuild\"),t=cc._decorator,e=t.ccclass,e=(t.property,r=p.default,i(d,r),d.prototype.initState=function(e,t){var o=this;this._AiParameter=t,this.ower=e,this.initPolicy(),t&&(cc.log(\"初始化所有状态:\",t.name,t.id),this.schedule(this.newThink,1),this.setAIState(p.BuildAI_Type.Check),this._isActive=!0,s.default.CONFIG_INFO.AITag&&cc.resources.load(\"prefab/AITest/AITag\",cc.Prefab,function(e,t){t=cc.instantiate(t);t.setParent(o.node),t._components[0].initFun.AITag(o.ower)}),this.buildMax=JSON.parse(t.buildingMax),this.ower.myDoor.node.on(c.ListenID.Send_Hurt,this.getHurt,this))},d.prototype.initPolicy=function(){var e,t=this.ower.myBed.myTerritoryMap;for(e in t)for(var o in t[e]){var n=t[e][o];this.pointSeting[n.name?\"attack\":\"other\"].push({x:e,y:o,sort:+n.name||0})}this.pointSeting.attack=s.default.arrCompare(this.pointSeting.attack,\"sort\",0),this.getPolicy.resource[0]=this.ower.myBed.attribute.buildingID},d.prototype.newThink=function(){if(this._isActive&&!s.default.GScene.isPause&&this.currentState==p.BuildAI_Type.Check){this._thinkNum++;var e=void 0,t=void 0;if(this.searchRole(),this.checkSConstruct(),1!=this._thinkNum){if(2==this._thinkNum)return e=l.Cfg.Building1.get(s.default.GetArrTarge([261,271])),a=this.checkSpace(\"other\",e),void this.newOperation({type:p.BuildAIOperation_Type.Build,pos:a,arcCfg:e});var o,n=this.checkAdvantage(),i=this.getWeight(this.getPolicy.first,this._AiParameter[\"type\"+n]);i&&this.checkPolicy(i.id)&&(o=this.getPolicy[i.id],(n=this.getWeight(o,this._AiParameter[i.id+n]))&&(\"number\"==typeof n.id?t=s.default.MapClr.arcIDList[n.id].id:0<n.id.length&&(t=s.default.MapClr.arcIDList[s.default.GetArrTarge(n.id)].id),t&&(e=l.Cfg.Building1.get(t),this.checkLimt(e)||!this.checkRoomIsSpace()?(n=this.getNotMaxArc(e))?(t=l.Cfg.Building1.get(+n.attribute.data.id+1))&&this.checkOperation({type:p.BuildAIOperation_Type.Up,arcTag:n,arcCfg:t}):this.renounceTarget(i.id,e):(a=this.checkSpace(i.id,e))&&this.checkOperation({type:p.BuildAIOperation_Type.Build,pos:a,arcCfg:e}))))}else{var e=l.Cfg.Building1.get(50),a=this.checkSpace(\"attack\",e);this.newOperation({type:p.BuildAIOperation_Type.Build,pos:a,arcCfg:e})}}},d.prototype.checkSConstruct=function(){var e,n=this,i=s.default.gettimestamp()-this.ower._initTime,a=this;for(e in this.getPolicy.specialtower){var t=function(e){var t=a.getPolicy.specialtower[e];if(!t)return\"continue\";if(i>a._AiParameter.specialtower[e]){var o=l.Cfg.Building1.get(s.default.MapClr.arcIDList[t].id);return a.unlockSConstruct(o,function(){n.renounceTarget(\"specialtower\",o)}),{value:void 0}}}(e);if(\"object\"==typeof t)return t.value}},d.prototype.checkAdvantage=function(){var e,t=this._enemy.myBed.myTerritoryMap,o=0,n=0;for(e in t)for(var i in t[e]){i=t[e][i];i.arc&&0<=[17,18,19].indexOf(i.arc.attribute.buildingType)&&(o+=(i=l.Cfg.Ghost1.get(i.arc.attribute.data.parameter[0])).hp,n+=i.atk)}return this.ower.myCapabilities.hp/n>o/(this.ower.myCapabilities.atk||.1)?1:2},d.prototype.searchRole=function(){if(!this._enemy)for(var e in s.default.MapClr.roleList){e=s.default.MapClr.roleList[e];if(e.roleID!=this.ower.roleID)return void(this._enemy=e)}},a([e],d));function d(){var e=null!==r&&r.apply(this,arguments)||this;return e._isActive=!1,e.statesList=[],e.toleranceTime=30,e.pointSeting={attack:[],other:[]},e.getPolicy={first:[\"resource\",\"defend\",\"attack\",\"monster\"],resource:[1,5,6,13],defend:[4,10,12],attack:[3,[18,19,20]],monster:[21,22,23],specialtower:[24,25]},e._thinkNum=0,e._time=0,e}o.default=e"]}