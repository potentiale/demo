{"version":3,"sources":["assets\\scripts\\AIMinMonster.js"],"names":["e","require","t","module","o","exports","n","i","__extends","Object","setPrototypeOf","__proto__","Array","prototype","hasOwnProperty","call","constructor","create","a","__decorate","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","s","defineProperty","value","c","l","p","d","cc","_decorator","ccclass","property","u","initState","_AiParameter","AiParameter","moveSpeed","MoveSpeedGhost","AttackRange","AttackRangeGhost","ower","statesList","StateType","Idle","IdleState","Move","MoveState","Die","DieState","Attack","AttackState","setAIState","CDManage","CCTool","UpCDFun","atk","attribute","data","atkspeed","target","_atkSpeedDown","isRageAtkSpeed","think","atkDialogue","Init","newThink","Check","Set","searchPath","currentState","_life","MapClr","roleList","roleID","_owerID","getPath","getMapPos","node","position","renounceTarget","path","mySkeleton","timeScale","checkDoor","myDoor","_isActive","getDistance","sendAttack","clone","checkPointAttaTarget","myBed","myTerritoryMap","x","y","arc","isValid","checkRole","onMoveEnd","Clear","limt","scaleX","setHurt","update","GScene","isPause","_time","_GameState","GAME_STATE","Game","OnUpdate","Up","indexOf","currentStateClr","setIdleDialogue","DialogueList","DialogueNum","newDialogue","v2","setAtkDialogue","GetArrTarge","apply","Escape","Treat","kill"],"mappings":"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","sourceRoot":"/","sourcesContent":["var e=require;\nvar t=module;\nvar o=exports;\n\"use strict\";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;0<=s;s--)(i=e[s])&&(r=(a<3?i(r):3<a?i(t,o,r):i(t,o))||r);return 3<a&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,\"__esModule\",{value:!0});var r,s=e(\"AppCommon\"),c=e(\"CCTool\"),l=e(\"GameScene\"),p=e(\"AIState\"),d=e(\"FSMBase\"),t=cc._decorator,e=t.ccclass,e=(t.property,r=d.default,i(u,r),u.prototype.initState=function(e,t){var o=this;this._AiParameter=new p.AiParameter,this._AiParameter.moveSpeed=t.MoveSpeedGhost,this._AiParameter.AttackRange=t.AttackRangeGhost,this.ower=e,this.statesList[p.StateType.Idle]=new p.IdleState(this),this.statesList[p.StateType.Move]=new p.MoveState(this),this.statesList[p.StateType.Die]=new p.DieState(this),this.statesList[p.StateType.Attack]=new p.AttackState(this),this.setAIState(p.StateType.Idle),this.CDManage=new c.CCTool.CDManage,this.CDManage.UpCDFun={atk:function(){return 1/(o.ower.attribute.data.atkspeed-o.ower.attribute.data.atkspeed*(o.target?o.target._atkSpeedDown:0)+o.ower.isRageAtkSpeed)},think:function(){return 1},atkDialogue:function(){return 10}},this.CDManage.Init()},u.prototype.newThink=function(){this.CDManage.Check(\"think\")&&(this.CDManage.Set(\"think\"),this.searchPath())},u.prototype.searchPath=function(){if(this.currentState==p.StateType.Idle){if(!this.target||this.target._life<=0)for(var e in s.default.MapClr.roleList){e=s.default.MapClr.roleList[e];if(e.roleID!=this.ower._owerID&&0<e._life){this.target=e,this.getPath(s.default.MapClr.getMapPos(this.target.node.position));break}}return this.setAIState(p.StateType.Move),!0}},u.prototype.renounceTarget=function(){this.target=null,this.path.length=0,this.ower.mySkeleton.timeScale=1,this.setAIState(p.StateType.Idle)},u.prototype.checkDoor=function(){if(!(this.target._life<=0)){var e=this.target.myDoor;if(e._isActive){if(s.default.getDistance(this.node.position,e.node.position)<this._AiParameter.AttackRange)return this.sendAttack(e.node),!0}else this.path=[this.target.node.position.clone()]}},u.prototype.checkPointAttaTarget=function(){var e=s.default.MapClr.getMapPos(this.node.position),t=null===(t=this.target.myBed)||void 0===t?void 0:t.myTerritoryMap;if(t&&t[e.x]&&t[e.x][e.y]){e=t[e.x][e.y].arc;if(e&&e._isActive&&e.node&&e.node.isValid&&s.default.getDistance(this.node.position,e.node.position)<this._AiParameter.AttackRange){if(this.CDManage.Check(\"atk\")||this.currentState!=p.StateType.Move)return this.sendAttack(e.node),!0;this.ower.mySkeleton.timeScale=1,this.setAIState(p.StateType.Idle)}}},u.prototype.checkRole=function(){if(!(this.target._life<=0)){var e=this.target;return 0<e._life&&s.default.getDistance(this.node.position,e.node.position)<this._AiParameter.AttackRange?(this.sendAttack(e.node),!0):void 0}},u.prototype.onMoveEnd=function(){this.ower.mySkeleton.timeScale=1,this.setAIState(p.StateType.Idle),this.CDManage.Clear(\"atk\")},u.prototype.sendAttack=function(e){this.CDManage.Check(\"atk\")&&(this.CDManage.Set(\"atk\"),this.ower.mySkeleton.timeScale=1/this.CDManage.limt.atk,this.ower.mySkeleton.node.scaleX=this.node.x>e.x?1:-1,this.setAIState(p.StateType.Attack),this.ower.setHurt(e))},u.prototype.update=function(e){if(!s.default.GScene.isPause&&this.ower._isActive){if(this._time+=e,s.default.GScene._GameState==l.GAME_STATE.Game&&(this.CDManage.OnUpdate(e),this.newThink(e),.2<this._time)){if(this.CDManage.Up(\"atk\"),this.checkDoor())return;if(this.checkPointAttaTarget())return;if(this.checkRole())return;[p.StateType.Move,p.StateType.Idle].indexOf(this.currentState)<0&&this.setAIState(p.StateType.Idle),this._time=0}this.currentStateClr.OnUpdate(e)}},u.prototype.setIdleDialogue=function(){var e=this.DialogueList[p.StateType.Idle][this.DialogueNum];e?(s.default.MapClr.newDialogue(this.node,cc.v2(20,150),e,2.5),this.DialogueNum++):this.DialogueNum=0},u.prototype.setAtkDialogue=function(){this.CDManage.Check(\"atkDialogue\")&&(this.CDManage.Set(\"atkDialogue\"),s.default.MapClr.newDialogue(this.node,cc.v2(20,150),s.default.GetArrTarge(this.DialogueList[p.StateType.Attack]),3))},a([e],u));function u(){var e,t=null!==r&&r.apply(this,arguments)||this;return t.statesList=[],t._time=0,t.DialogueNum=0,t.DialogueList=((e={})[p.StateType.Idle]=[],e[p.StateType.Attack]=[],e[p.StateType.Escape]=[],e[p.StateType.Treat]=[],e.kill=[],e),t}o.default=e"]}