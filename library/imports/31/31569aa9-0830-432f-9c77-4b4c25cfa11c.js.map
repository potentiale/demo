{"version":3,"sources":["assets\\scripts\\GameScene.js"],"names":["e","require","t","module","o","exports","n","i","__extends","Object","setPrototypeOf","__proto__","Array","prototype","hasOwnProperty","call","constructor","create","a","__decorate","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","s","defineProperty","value","PLAYER_STATE","GAME_STATE","p","c","l","d","u","f","h","m","y","g","cc","_decorator","ccclass","property","Not","Index","Matching","ReadyAm","CountDown","Game","End","Win","Move","ToBed","_","Component","v","onLoad","GScene","window","app","Cfg","GameTool","CCTool","setPhysics","winSize","width","height","view","setDesignResolutionSize","ResolutionPolicy","FIXED_HEIGHT","resources","load","Prefab","GameElementButPool","GamePool","start","setCountDown","countDownTime","schedule","countDown","setGameStart","_GameState","log","_GameModel","exitGame","MapClr","modelManage","matchingFun","Audio","PlayBgm","data","YunNanBGM","GAME_MODEL","FISH_MODEL","recorderStart","myModel","TaskCtrl","initTask","_PlayerTime","GameStart","unschedule","setPause","playerSendEvent","recorderStop","setPlayerStart","removeAllChild","MainView","PopBox","scheduleOnce","TANG_PING","UI","OpenPop","MO_YU","BOSS_MODEL","GameCamera","node","active","getIndex","myMap","emit","ListenID","GameState","startGame","openGame","initMap","GamePopBox","GamePage","clearObj","setCollision","childrenCount","deleteNode","children","isPause","Math","max","Game_Pause","joyStick","_PlayerState","player","getModeStr","myBed","PlatformFun","SendEvent","myDoor","attribute","lv","myTerritoryMap","arc","buildingType","monsterList","roleList","isAi","_life","PhysicsManager","director","getPhysicsManager","enabled","debugDrawFlags","DrawBits","e_aabbBit","e_jointBit","e_shapeBit","CollisionManager","getCollisionManager","enabledDebugDraw","Camera","Node","apply","MainCamera","GameLabelBox","Player","ShowToast","color"],"mappings":"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","sourceRoot":"/","sourcesContent":["var e=require;\nvar t=module;\nvar o=exports;\n\"use strict\";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;0<=s;s--)(i=e[s])&&(r=(a<3?i(r):3<a?i(t,o,r):i(t,o))||r);return 3<a&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,\"__esModule\",{value:!0}),o.PLAYER_STATE=o.GAME_STATE=void 0;var r,s,p=e(\"AppCommon\"),c=e(\"CCTool\"),l=e(\"GameTool\"),d=e(\"PlatformFun\"),u=e(\"TTGame\"),f=e(\"ListenID\"),h=e(\"Cfg\"),m=e(\"JoyStick\"),y=e(\"ModelManage\"),g=cc._decorator,t=g.ccclass,e=g.property;(g=r=o.GAME_STATE||(o.GAME_STATE={}))[g.Not=0]=\"Not\",g[g.Index=1]=\"Index\",g[g.Matching=2]=\"Matching\",g[g.ReadyAm=3]=\"ReadyAm\",g[g.CountDown=4]=\"CountDown\",g[g.Game=5]=\"Game\",g[g.End=6]=\"End\",g[g.Win=7]=\"Win\",(g=s=o.PLAYER_STATE||(o.PLAYER_STATE={}))[g.Not=0]=\"Not\",g[g.Move=1]=\"Move\",g[g.ToBed=2]=\"ToBed\";var _,t=(_=cc.Component,i(v,_),v.prototype.onLoad=function(){var o=this;p.default.GScene=this,window.app=p.default,window.Cfg=h.Cfg,window.GameTool=l.GameTool,window.CCTool=c.CCTool,this.setPhysics(!0),this.setPhysics(!1),.65<cc.winSize.width/cc.winSize.height&&cc.view.setDesignResolutionSize(750,1334,cc.ResolutionPolicy.FIXED_HEIGHT),cc.resources.load(\"prefab/game/Element/GameElementBut\",cc.Prefab,function(e,t){o.GameElementButPool=new c.CCTool.GamePool(\"GameElementBut\",t,1,o)})},v.prototype.start=function(){},v.prototype.setCountDown=function(e){this.countDownTime=e=void 0===e?30:e,this.schedule(this.countDown,1,this.countDownTime)},v.prototype.setGameStart=function(e,t){var o=this;if(this._GameState==e)return cc.log(\"状态重叠\");switch(this._GameState=e,t&&(this._GameModel=t),cc.log(\"设置游戏状态\"),e){case r.Matching:this.exitGame(),p.default.MapClr.modelManage.matchingFun(this._GameModel),c.CCTool.Audio.PlayBgm(\"Bgm_Matching\");break;case r.ReadyAm:p.default.data.YunNanBGM?(c.CCTool.Audio.PlayBgm(\"Bgm_Battle2\",.4),p.default.data.YunNanBGM=!1):this._GameModel==y.GAME_MODEL.FISH_MODEL?c.CCTool.Audio.PlayBgm(\"Bgm_Battle3\",.4):c.CCTool.Audio.PlayBgm(\"Bgm_Battle\",.4),u.default.recorderStart();break;case r.CountDown:p.default.MapClr.modelManage.myModel.CountDown(),p.default.TaskCtrl.initTask(this._GameModel),this._PlayerTime=0;break;case r.Game:p.default.MapClr.modelManage.myModel.GameStart(),this.unschedule(this.countDown);break;case r.End:case r.Win:this.setPause(),this.playerSendEvent(),u.default.recorderStop(),this.setPlayerStart(s.Not),this.removeAllChild(p.default.MainView.PopBox),this.scheduleOnce(function(){e==r.End||(o._GameModel==y.GAME_MODEL.TANG_PING?c.CCTool.UI.OpenPop(\"prefab/pop/pop_GameWin\"):o._GameModel==y.GAME_MODEL.MO_YU?c.CCTool.UI.OpenPop(\"prefab/pop/pop_GameWin_M2\"):o._GameModel==y.GAME_MODEL.BOSS_MODEL&&c.CCTool.UI.OpenPop(\"prefab/pop/pop_GameWin_M3\")),o._GameModel!=y.GAME_MODEL.FISH_MODEL&&o.exitGame()},this._GameModel==y.GAME_MODEL.BOSS_MODEL?1:2);break;case r.Index:this.setPlayerStart(s.Not),this.GameCamera.node.active=!1,p.default.MainView.getIndex(),this.exitGame(),c.CCTool.Audio.PlayBgm(\"Bgm_Lobby\"),u.default.recorderStop()}p.default.MapClr.myMap&&p.default.MapClr.myMap.node.emit(f.ListenID.GameState)},v.prototype.startGame=function(){var e=this;p.default.MainView.openGame(),p.default.MapClr.initMap(this._GameModel,function(){cc.log(\"地图加载成功\"),e.GamePopBox.active=!0})},v.prototype.exitGame=function(){cc.log(\"[exitGame]退出游戏\"),this.unschedule(this.countDown),this.removeAllChild(p.default.GScene.GamePopBox),this.removeAllChild(p.default.MainView.GamePage),p.default.MapClr.clearObj(),this.setCollision(!1)},v.prototype.removeAllChild=function(e){for(var t=e.childrenCount-1;0<=t;t--)p.default.MapClr.deleteNode(e.children[t])},v.prototype.setPause=function(e){void 0===e&&(e=1),this.isPause=Math.max(0,this.isPause+e),p.default.GScene.node.emit(f.ListenID.Game_Pause,!!this.isPause)},v.prototype.setPlayerStart=function(e){switch(e){case s.Not:this.joyStick.node.active=!1;break;case s.Move:this.joyStick.node.active=!0;break;case s.ToBed:this.joyStick.node.active=!1}this._PlayerState=e},v.prototype.playerSendEvent=function(){var e=this.player,t=this.getModeStr();if(e&&e.myBed){d.PlatformFun.SendEvent(t+\"door_level_\"+e.myDoor.attribute.lv),d.PlatformFun.SendEvent(t+\"desk_level_\"+e.myBed.attribute.lv);var o,n=e.myBed.myTerritoryMap,i=0,a=0;for(o in n)for(var r in n[o])(c=n[o][r]).arc&&(2==c.arc.attribute.buildingType?i=Math.max(i,c.arc.attribute.lv):4==c.arc.attribute.buildingType&&(a=Math.max(a,c.arc.attribute.lv)));d.PlatformFun.SendEvent(t+\"tower_level_\"+i),d.PlatformFun.SendEvent(t+\"miner_level_\"+a)}this._GameModel==y.GAME_MODEL.TANG_PING&&d.PlatformFun.SendEvent(t+\"boss_level_\"+(null===(e=p.default.MapClr.monsterList[0].attribute)||void 0===e?void 0:e.lv));var s,c,l=0;for(s in p.default.MapClr.roleList)(c=p.default.MapClr.roleList[s]).isAi&&c._life<=0&&l++;d.PlatformFun.SendEvent(t+\"killed_\"+l)},v.prototype.getModeStr=function(){return\"m\"+this._GameModel+\"_\"},v.prototype.setPhysics=function(e,t){void 0===t&&(t=!1),this.PhysicsManager||(this.PhysicsManager=cc.director.getPhysicsManager()),this.PhysicsManager.enabled=e,t&&(this.PhysicsManager.debugDrawFlags=cc.PhysicsManager.DrawBits.e_aabbBit|cc.PhysicsManager.DrawBits.e_jointBit|cc.PhysicsManager.DrawBits.e_shapeBit)},v.prototype.setCollision=function(e,t){void 0===t&&(t=!1),this.CollisionManager||(this.CollisionManager=cc.director.getCollisionManager()),this.CollisionManager.enabled=e,this.CollisionManager.enabledDebugDraw=t},a([e(m.default)],v.prototype,\"joyStick\",void 0),a([e(cc.Camera)],v.prototype,\"MainCamera\",void 0),a([e(cc.Camera)],v.prototype,\"GameCamera\",void 0),a([e(cc.Node)],v.prototype,\"GameLabelBox\",void 0),a([e(cc.Node)],v.prototype,\"GamePopBox\",void 0),a([t],v));function v(){var e=null!==_&&_.apply(this,arguments)||this;return e.joyStick=null,e.MainCamera=null,e.GameCamera=null,e.GameLabelBox=null,e.GamePopBox=null,e._GameState=r.Not,e._GameModel=y.GAME_MODEL.TANG_PING,e._PlayerState=s.Not,e._PlayerTime=0,e.isPause=0,e.countDownTime=30,e.countDown=function(){if(e.countDownTime<=10&&c.CCTool.Audio.Player(\"CountDown\"),c.CCTool.UI.ShowToast(e.countDownTime,100,!0,1,cc.winSize.height/2-440,cc.color(\"#fff961\"),p.default.MainView.GamePage,!1),e.countDownTime<=0)return e.setGameStart(r.Game);e.countDownTime--},e}o.default=t"]}