{"version":3,"sources":["assets\\scripts\\ConstructBase.js"],"names":["e","require","t","module","o","exports","n","i","__extends","Object","setPrototypeOf","__proto__","Array","prototype","hasOwnProperty","call","constructor","create","a","__decorate","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","s","defineProperty","value","c","l","p","d","u","f","h","m","y","cc","_decorator","ccclass","menu","property","ElementBase","g","onLoad","GScene","_GameModel","GAME_MODEL","BOSS_MODEL","node","getComponent","RigidBody","addComponent","type","RigidBodyType","Static","PhysicsCircleCollider","radius","on","ListenID","Send_Hurt","getHurt","Game_Pause","onGamePause","initAttribute","imgList","children","Sprite","CCTool","Audio","CameraPlayer","position","setAttribute","mySkeleton","sp","Skeleton","zIndex","MapClr","mapSize","height","Math","floor","tileSize","setOwer","onInit","myMap","Monster_Skill","_isActive","attribute","buildingType","parameter","newEffects","setParent","setPosition","setState","scheduleOnce","deleteNode","last","t_x","x","t_y","ower","_owerID","roleID","isPlayer","schedule","checkLeveUP","newTouchEvent","upCapabilities","longTapEvent","indexOf","_isClickEventOpen","Node","EventType","TOUCH_START","_isPress","getLocation","_pressTime","TOUCH_MOVE","Vec2","squaredDistance","TOUCH_END","data","cameraMoveNum","isMax","UI","ShowToast","onClick","name","buildingID","buildID","lv","level","checkMax","_life","hp","setConstructImg","myCapabilities","upAttribute","log","Cfg","Building1","get","id","Notifier","send","Task_UpdateTask","TaskType","GetBuilding","buildId","myLeveUPNode","active","arcIDList","_maxLevel","unschedule","checkMoney","wallet","frontDoor","myBuildTopId","frontGenerator","costCoin","coin","costPower","power","_isInvincible","emit","Role_State","setLife","setDestroyed","myBed","setTerritoryMapItem","_mapPos","System","InCamera","off","onVanish","destroy","removeFromParent","sell","_isHaveUpDate","roleList","returnCoin","setCoin","newLabelTips","Color","YELLOW","returnPower","setPower","BLUE","OpenPop","frequency","setInvincible","checkTagIsActive","searchRecentMoster","monsterList","getDistance","_attackRadius","push","w","_lifeRatio","arrCompare","update","isPause","_time","effectTrigger","apply","Element_Type","Building"],"mappings":"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","sourceRoot":"/","sourcesContent":["var e=require;\nvar t=module;\nvar o=exports;\n\"use strict\";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;0<=s;s--)(i=e[s])&&(r=(a<3?i(r):3<a?i(t,o,r):i(t,o))||r);return 3<a&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,\"__esModule\",{value:!0});var r,s=e(\"AppCommon\"),c=e(\"CCTool\"),l=e(\"ListenID\"),p=e(\"Notifier\"),d=e(\"Cfg\"),u=e(\"TaskCtrl\"),f=e(\"ModelManage\"),h=e(\"ElementBase\"),m=[20,21],y=cc._decorator,t=y.ccclass,e=y.menu,e=(y.property,r=h.ElementBase,i(g,r),g.prototype.onLoad=function(){s.default.GScene._GameModel===f.GAME_MODEL.BOSS_MODEL&&(this.node.getComponent(cc.RigidBody)||(this.node.addComponent(cc.RigidBody).type=cc.RigidBodyType.Static),this.node.getComponent(cc.PhysicsCircleCollider)||(this.node.addComponent(cc.PhysicsCircleCollider).radius=30)),this.node.on(l.ListenID.Send_Hurt,this.getHurt,this),s.default.GScene.node.on(l.ListenID.Game_Pause,this.onGamePause,this)},g.prototype.initAttribute=function(e,t){var o=this;this.imgList[0]||(this.imgList[0]=this.node.children[0].getComponent(cc.Sprite)),c.CCTool.Audio.CameraPlayer(this.node.position,\"Build\"),this.setAttribute(e),this.mySkeleton=this.node.children[0].getComponent(sp.Skeleton),this.node.zIndex=s.default.MapClr.mapSize.height-(Math.floor(this.node.y/s.default.MapClr.tileSize.height)+s.default.MapClr.mapSize.height/2),t&&this.setOwer(t),this.onInit(),s.default.MapClr.myMap.node.on(l.ListenID.Monster_Skill,function(t){o._isActive&&3==t.type&&o.attribute.buildingType==t.parameter[0]&&s.default.MapClr.newEffects(o.node.position,\"hobbyhorse\",function(e){e.setParent(o.node),e.setPosition(0,0),e.zIndex=o.node.zIndex+1,o.setState(!1),o.scheduleOnce(function(){o.setState(!0),s.default.MapClr.deleteNode(e)},t.last)})},this),this.node.t_x=this.node.x,this.node.t_y=this.node.y},g.prototype.setOwer=function(e){this.ower=e,this._owerID=e.roleID,this.ower.isPlayer?(this.schedule(this.checkLeveUP,1),this.newTouchEvent()):1==this.attribute.buildingType&&this.newTouchEvent(),this.ower.upCapabilities()},g.prototype.longTapEvent=function(){},g.prototype.newTouchEvent=function(){var t,o,n=this;0<=m.indexOf(this.attribute.buildingType)||this._isClickEventOpen||(t=!(this._isClickEventOpen=!0),o=null,this.node.on(cc.Node.EventType.TOUCH_START,function(e){t=!0,n._isPress=!0,o=e.getLocation(),n._pressTime=0},this),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(e){n._isPress&&o&&(e=e.getLocation(),100<=cc.Vec2.squaredDistance(e,o)&&(n._isPress=!1))}),this.node.on(cc.Node.EventType.TOUCH_END,function(){if(n._isPress=!1,t&&!(10<s.default.data.cameraMoveNum)){if(n.ower.isPlayer){if(n.attribute.isMax&&0<=[1,3].indexOf(n.attribute.data.buildingType))return c.CCTool.UI.ShowToast(\"该建筑已满级\")}else if(3==n.attribute.buildingType||1==n.attribute.buildingType)return;n.onClick()}},this))},g.prototype.setAttribute=function(e){this.attribute={name:e.name,buildingType:e.buildingType,buildingID:e.buildID,lv:e.level,data:e},this.attribute.isMax=this.checkMax(),this._life=e.hp||1,this.setConstructImg(),this.ower&&(3==this.attribute.buildingType&&(this.ower.myCapabilities.hp=this._life),this.ower.upCapabilities())},g.prototype.upAttribute=function(e){if(!e&&this.checkMax())return cc.log(\"已经满级\");(e=e||d.Cfg.Building1.get(+this.attribute.data.id+1))&&(this.setAttribute(e),this.ower.isPlayer&&p.Notifier.send(l.ListenID.Task_UpdateTask,u.TaskType.GetBuilding,{buildId:e.id}),c.CCTool.Audio.CameraPlayer(this.node.position,\"Build\"),this.myLeveUPNode&&(this.myLeveUPNode.active=!1))},g.prototype.checkMax=function(){return this.attribute.lv>=s.default.MapClr.arcIDList[this.attribute.buildingID]._maxLevel},g.prototype.checkLeveUP=function(){var t=this;if(this.checkMax())return s.default.MapClr.deleteNode(this.myLeveUPNode),this.unschedule(this.checkLeveUP),void(this.myLeveUPNode=null);var e=d.Cfg.Building1.get(+this.attribute.data.id+1);e&&(this.checkMoney(e)?this.myLeveUPNode?this.myLeveUPNode.active=!0:s.default.MapClr.newEffects(this.node.position,\"levelup\",function(e){e.setParent(t.node),e.setPosition(0,0),e.zIndex=t.node.zIndex+9,t.myLeveUPNode=e}):this.myLeveUPNode&&(this.myLeveUPNode.active=!1))},g.prototype.checkMoney=function(e){var t,o=this.ower.wallet;return!(e.frontDoor&&(!(t=this.ower.myBuildTopId[3])||t<e.frontDoor)||e.frontGenerator&&(!(t=this.ower.myBuildTopId[4])||t<e.frontGenerator)||e.costCoin&&o.coin<e.costCoin||e.costPower&&o.power<e.costPower)},g.prototype.getHurt=function(e){this._isInvincible||this._life<=0||(r.prototype.getHurt.call(this,e),s.default.MapClr.myMap.node.emit(l.ListenID.Role_State,this._owerID,!0))},g.prototype.setLife=function(e){if(!this.attribute||!this.attribute.data)return this._life=0,void this.setDestroyed();r.prototype.setLife.call(this,e),this._life<=0&&this.setDestroyed(),3==this.attribute.buildingType&&(this.ower.myCapabilities.hp=this._life)},g.prototype.setDestroyed=function(){cc.log(\"被破坏\"),this.ower.myBed.setTerritoryMapItem(this._mapPos,null),this.node.active=!1,this.setState(!1),this.ower.upCapabilities(),c.CCTool.System.InCamera(this.node.position)&&s.default.MapClr.newEffects(this.node.position,\"bomb\"),c.CCTool.Audio.CameraPlayer(this.node.position,\"m4_boom\"),this.deleteNode()},g.prototype.deleteNode=function(){this.node.off(l.ListenID.Send_Hurt,this.getHurt,this),this.onVanish(),this.node.destroy(),this.node.removeFromParent(!1)},g.prototype.sell=function(e){this.setState(!1),this._isActive=!1,this._isHaveUpDate=!1,this.ower.myBed.setTerritoryMapItem(this._mapPos,null);var t,e=e?s.default.MapClr.roleList[e]:this.ower;this.attribute.data.returnCoin?(t=this.attribute.data.returnCoin,e.setCoin(t),c.CCTool.System.InCamera(this.node.position)&&s.default.MapClr.newLabelTips(\"+\"+t,this.node.position,cc.Color.YELLOW,\"Fish coin\")):this.attribute.data.returnPower&&(t=this.attribute.data.returnPower,e.setPower(t),c.CCTool.System.InCamera(this.node.position)&&s.default.MapClr.newLabelTips(\"+\"+t,this.node.position,cc.Color.BLUE,\"energy\")),this.ower.upCapabilities(),this.deleteNode(),c.CCTool.Audio.CameraPlayer(this.node.position,\"Build\")},g.prototype.onClick=function(){c.CCTool.UI.OpenPop(\"prefab/pop/pop_BuildingUPLv\",this)},g.prototype.setState=function(e){this._isActive!=e&&(this._isActive=e,this._isHaveUpDate=e&&!!this.attribute.data.frequency)},g.prototype.setInvincible=function(e,t){var o=this;this._isInvincible=!0,this.scheduleOnce(function(){o._isInvincible=!1,t()},e)},g.prototype.checkTagIsActive=function(e){return e&&e.node},g.prototype.searchRecentMoster=function(){var e,t=[];for(e in s.default.MapClr.monsterList){var o,n=s.default.MapClr.monsterList[e];n&&n._owerID!=this._owerID&&n._isActive&&0<n._life&&((o=s.default.getDistance(n.node.position,this.node.position))<this._attackRadius&&t.push({i:e,d:o,w:100*(1-n._lifeRatio)+1}))}return s.default.arrCompare(t,\"d\",0)},g.prototype.update=function(e){s.default.GScene.isPause||(this._isHaveUpDate&&(this._time+=e,this._time>this.attribute.data.frequency&&(this.effectTrigger(),this._time=0)),this._isPress&&(this._pressTime+=e,2<=this._pressTime&&(this._isPress=!1,this.longTapEvent(),this._pressTime=0)))},a([t,e(\"gameElement/ConstructBase\")],g));function g(){var e=null!==r&&r.apply(this,arguments)||this;return e.type=h.Element_Type.Building,e.attribute=null,e._isPress=!1,e._isClickEventOpen=!1,e._time=0,e._pressTime=0,e}o.default=e"]}