{"version":3,"sources":["assets\\scripts\\EggPhone.js"],"names":["e","require","t","module","o","exports","n","i","__extends","Object","setPrototypeOf","__proto__","Array","prototype","hasOwnProperty","call","constructor","create","a","__decorate","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","s","defineProperty","value","c","l","p","d","u","f","h","m","y","g","cc","_decorator","ccclass","property","_","onEnable","Notifier","changeListener","ListenID","Fight_GetHandSuccess","getHandSuccess","onDisable","start","GScene","_GameModel","GAME_MODEL","BOSS_MODEL","schedule","searchPlayer","onTouch","baseId","isTrigger","but","hide","unschedule","newMonster","PlatformFun","SendEvent","MapClr","newEffects","node","position","id","gettimestamp","_pos","x","weightGetValue","_randomMonster","monsterList","Cfg","Ghost1","get","v","attribute","lv","initAttribute","setSkin","RoleBones","addAI","myFSM","addComponent","initState","_GameState","GAME_STATE","Game","myMap","getDistanceSqrt","isShowBut","GameElementButPool","GetFormPool","GamePopBox","getComponent","init","CCTool","UI","OpenPop","setLabel","apply","w"],"mappings":"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","sourceRoot":"/","sourcesContent":["var e=require;\nvar t=module;\nvar o=exports;\n\"use strict\";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;0<=s;s--)(i=e[s])&&(r=(a<3?i(r):3<a?i(t,o,r):i(t,o))||r);return 3<a&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,\"__esModule\",{value:!0});var r,s=e(\"AppCommon\"),c=e(\"CCTool\"),l=e(\"PlatformFun\"),p=e(\"ListenID\"),d=e(\"Notifier\"),u=e(\"Cfg\"),f=e(\"GameScene\"),h=e(\"AIMinMonster\"),m=e(\"ModelManage\"),y=e(\"EggBase\"),g=e(\"GameElementBut\"),t=cc._decorator,e=t.ccclass,e=(t.property,r=y.default,i(_,r),_.prototype.onEnable=function(){d.Notifier.changeListener(!0,p.ListenID.Fight_GetHandSuccess,this.getHandSuccess,this)},_.prototype.onDisable=function(){d.Notifier.changeListener(!1,p.ListenID.Fight_GetHandSuccess,this.getHandSuccess,this)},_.prototype.start=function(){s.default.GScene._GameModel===m.GAME_MODEL.BOSS_MODEL&&this.schedule(this.searchPlayer,.3)},_.prototype.onTouch=function(){},_.prototype.getHandSuccess=function(e){e===this.baseId&&(this.isTrigger=!0,this.but&&this.but.hide(),this.unschedule(this.searchPlayer),this.newMonster(),l.PlatformFun.SendEvent(\"egg_phone\"))},_.prototype.newMonster=function(){var n=this;s.default.MapClr.newEffects(this.node.position,\"delivery_17\");var e={id:s.default.gettimestamp(null,\"ms\"),_pos:{x:this.node.x,y:this.node.y}},i=s.default.weightGetValue(this._randomMonster);s.default.MapClr.newMonster(e,\"MinMonster\",function(e){var t=s.default.MapClr.monsterList[0],o=(o=u.Cfg.Ghost1.get(i.v+t.attribute.lv-1))||u.Cfg.Ghost1.get(i.v);e.initAttribute(o,s.default.MapClr.monsterList[0]),e.setSkin(o.RoleBones,function(){n.addAI(e,o)})})},_.prototype.addAI=function(e,t){e.myFSM=e.addComponent(h.default),e.myFSM.initState(e,t)},_.prototype.searchPlayer=function(){var e,t=this;s.default.GScene._GameState!=f.GAME_STATE.Game||!s.default.MapClr.myMap||!s.default.MapClr.monsterList[0]||this.isTrigger||(e=s.default.getDistanceSqrt(this.node.position,s.default.MapClr.monsterList[0].node.position)<1e4)!=this.isShowBut&&(this.isShowBut=e,this.isShowBut?(e=s.default.GScene.GameElementButPool.GetFormPool(s.default.GScene.GamePopBox),this.but=e.getComponent(g.default),this.but.init(this.node,function(){c.CCTool.UI.OpenPop(\"prefab/pop/pop_GiveBossHand\",t.baseId)}),this.but.setLabel(\"召集\")):(this.but&&this.but.hide(),this.but=null))},a([e],_));function _(){var e=null!==r&&r.apply(this,arguments)||this;return e._randomMonster=[{v:900,w:1},{v:910,w:1},{v:920,w:1}],e.isShowBut=!1,e.but=null,e.isTrigger=!1,e}o.default=e"]}