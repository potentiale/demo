{"version":3,"sources":["assets\\scripts\\SkillRole.js"],"names":["e","require","t","module","o","exports","n","__extends","Object","setPrototypeOf","__proto__","Array","prototype","hasOwnProperty","call","constructor","create","defineProperty","value","SkillRole","i","m","y","a","g","_","r","s","c","SkillManage","l","h","apply","arguments","itemList","cfgTag","skill","ower","myDoor","_lifeRatio","CDManage","Set","id","MapClr","newEffects","node","position","setParent","setPosition","cc","Vec2","ZERO","zIndex","parameter","_life","setLife","attribute","data","hp","last","unschedule","deleteNode","schedule","myMap","emit","ListenID","Role_Skill","roleID","outputRatio","scheduleOnce","isPlayer","CCTool","UI","ShowToast","getDescr","Audio","Player","setInvincible","log","destroy","myBed","length","push","w","v","myTerritoryMap","p","d","arc","Number","buildingType","splice","sort","Math","pow","u","f","weightGetValue","Cfg","Building1","filter","newBuild","x","reduceRationList","set","GScene","_GameState","GAME_STATE","Game","monsterList","_owerID","resources","load","Prefab","console","error","message","parent","instantiate","getComponent","setOwer","moveSpeed","attackRange","attackDelta","attackNum","ceil","fadeTime","setPursuitTarget","lvInfo","GetRandomNum","setCoin","newLabelTips","Color","YELLOW"],"mappings":"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","sourceRoot":"/","sourcesContent":["var e=require;\nvar t=module;\nvar o=exports;\n\"use strict\";var n,t=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,\"__esModule\",{value:!0}),o.SkillRole=void 0;var i,m=e(\"AppCommon\"),y=e(\"CCTool\"),a=e(\"ListenID\"),g=e(\"Cfg\"),_=e(\"Door\"),r=e(\"GameScene\"),s=e(\"Summoned\"),c=e(\"SkillManage\"),t=(i=c.SkillManage,t(l,i),l);function l(){var h=null!==i&&i.apply(this,arguments)||this;return h.itemList=[],h.cfgTag=\"SkillMan\",h.skill={1:function(n){if(h.ower.myDoor&&!(.98<h.ower.myDoor._lifeRatio))return h.ower.CDManage.Set(n.id),m.default.MapClr.newEffects(h.ower.myDoor.node.position,\"repair\",function(e){e.setParent(h.ower.myDoor.node),e.setPosition(cc.Vec2.ZERO),e.zIndex=h.ower.myDoor.node.zIndex+1;var t=0,o=function(){t+=n.parameter[0],h.ower.myDoor._life&&h.ower.myDoor.setLife(h.ower.myDoor.attribute.data.hp*n.parameter[1]),t>=n.last&&(h.ower.unschedule(o),m.default.MapClr.deleteNode(e))};h.ower.schedule(o,n.parameter[0])}),m.default.MapClr.myMap.node.emit(a.ListenID.Role_Skill,n,h.ower.roleID),!0},2:function(e){return h.ower.CDManage.Set(e.id),h.ower.outputRatio=e.parameter[0],h.ower.scheduleOnce(function(){h.ower.outputRatio=1},e.last),m.default.MapClr.myMap.node.emit(a.ListenID.Role_Skill,e,h.ower.roleID),h.ower.isPlayer&&y.CCTool.UI.ShowToast(c.SkillManage.getDescr(e)),!0},3:function(t){var o=h.ower.myDoor;if(o)return y.CCTool.Audio.Player(\"skill_man_10000\"),m.default.MapClr.newEffects(o.node.position,\"heiguo\",function(e){e.setParent(o.node),e.setPosition(0,0),e.zIndex=o.node.zIndex+3,h.ower.CDManage.Set(t.id),o.setInvincible(t.last,function(){cc.log(\"无敌结束\"),e.destroy()})}),!0},4:function(e){if(h.ower.myDoor&&h.ower.myBed){for(var t=[],o=0,n=e.parameter.length/2;o<n;o++){var i=e.parameter[2*o+1],a=e.parameter[2*o];t.push({w:i,v:a})}var r,s=[],c=[],l=h.ower.myBed.myTerritoryMap;for(r in l)for(var p in l[r]){var d=l[r][p];if(d.arc){for(d.arc instanceof _.default&&(c=[Number(r),Number(p)]),o=t.length-1;0<=o;o--)if(t[o].v===d.arc.attribute.buildingType){t.splice(o,1);break}}else s.push([Number(r),Number(p)])}if(s.length<=0)h.ower.isPlayer&&y.CCTool.UI.ShowToast(\"没有空余位置可建造\");else{if(!(t.length<=0)){s.sort(function(e,t){e=Math.pow(e[0]-c[0],2)+Math.pow(e[1]-c[1],2);return Math.pow(t[0]-c[0],2)+Math.pow(t[1]-c[1],2)-e});var u=s[0],f=m.default.weightGetValue(t),f=g.Cfg.Building1.filter({buildingType:f.v});return m.default.MapClr.newBuild(f[0],{x:u[0],y:u[1]},h.ower),h.ower.CDManage.Set(e.id),!0}h.ower.isPlayer&&y.CCTool.UI.ShowToast(\"已拥有所有辅助建筑\")}}},5:function(e){for(var t=e.parameter[e.parameter.length-1],o=0,n=e.parameter.length-1;o<n;o++){var i=e.parameter[o];h.ower.reduceRationList.set(i,1-t)}return!0},6:function(o){if(h.ower.myDoor&&m.default.GScene._GameState==r.GAME_STATE.Game){var e,n=null;for(e in m.default.MapClr.monsterList){var t=m.default.MapClr.monsterList[e];if(t&&0<t._life&&t._owerID!=h.ower.roleID){n=t;break}}return n&&cc.resources.load(\"prefab/game/Element/Summoned\",cc.Prefab,function(e,t){e?console.error(e.message):(e=n.node.parent,(t=cc.instantiate(t)).parent=e,t.setPosition(h.ower.myDoor.node.position),(t=t.getComponent(s.default)).setOwer(h.ower),t.moveSpeed=o.parameter[1],t.attackRange=o.parameter[2],t.attackDelta=1/o.parameter[3],t.attackNum=Math.ceil(o.parameter[0]*n.attribute.data.hp),t.fadeTime=o.last,t.setPursuitTarget(n))}),h.ower.CDManage.Set(o.id),!0}},7:function(e){var t=e.parameter,o=t[0],n=t[1],i=t[2],a=t[3],t=e.lvInfo[0],a=Math.ceil(o*t+n*Math.pow(2,t-1)*m.default.GetRandomNum(i,a));return h.ower.setCoin(a),m.default.MapClr.newLabelTips(\"+\"+a,h.ower.node.position,cc.Color.YELLOW,\"Fish coin\"),h.ower.CDManage.Set(e.id),!0}},h}o.SkillRole=t"]}