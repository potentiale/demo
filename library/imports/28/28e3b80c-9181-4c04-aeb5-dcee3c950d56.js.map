{"version":3,"sources":["assets\\scripts\\LoaderAdapter.js"],"names":["e","require","t","module","o","exports","Object","defineProperty","value","LoaderAdapter","c","n","i","prototype","loadRes","makeLoadResArgs","apply","arguments","assetLoader","url","type","onProgess","onCompleted","bundle","preloadRes","releaseAsset","loadSpriteAsync","a","Promise","cc","SpriteFrame","Texture2D","isValid","setAutoRelease","loadSpine","sp","SkeletonData","loadSpriteAltasAsync","loadPrefab","Prefab","instantiate","loadDragonBones","r","s","dragonBones","DragonBonesAsset","DragonBonesAtlasAsset","asset","atlasAsset","loadDragonBonesByPath","getComponent","ArmatureDisplay","loadResDir","length","dragonAsset","dragonAtlasAsset","armatureName","playAnimation","getAnimationNames","getArmatureNames","timeScale","ResUtil","getResKeeper","autoReleaseRes","makeUseKey","globalUseId"],"mappings":"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","sourceRoot":"/","sourcesContent":["var e=require;\nvar t=module;\nvar o=exports;\n\"use strict\";Object.defineProperty(o,\"__esModule\",{value:!0}),o.LoaderAdapter=void 0;var c=e(\"AssetLoader\"),n=e(\"ResUtil\"),e=(i.prototype.loadRes=function(){var e=c.default.makeLoadResArgs.apply(this,arguments);c.assetLoader.loadRes(e.url,e.type,e.onProgess,e.onCompleted,e.bundle)},i.prototype.preloadRes=function(){var e=c.default.makeLoadResArgs.apply(this,arguments);c.assetLoader.preloadRes(e.url,e.type,e.onProgess,e.onCompleted,e.bundle)},i.prototype.releaseAsset=function(e){c.assetLoader.releaseAsset(e)},i.prototype.loadSpriteAsync=function(e,i){var a=this;return new Promise(function(o,n){a.loadRes(e,cc.SpriteFrame,function(e,t){e?n(e):((e=t)instanceof cc.Texture2D&&(e=new cc.SpriteFrame(t)),i&&cc.isValid(i)&&a.setAutoRelease(e,i,!0),o(e))})})},i.prototype.loadSpine=function(e,i){var a=this;return new Promise(function(o,n){a.loadRes(e,sp.SkeletonData,function(e,t){e?n(e):(t=t,i&&cc.isValid(i)&&a.setAutoRelease(t,i,!0),o(t))})})},i.prototype.loadSpriteAltasAsync=function(e,i){var a=this;return new Promise(function(o,n){a.loadRes(e,function(e,t){e?n(e):(i&&cc.isValid(i)&&a.setAutoRelease(t,i),o(t))})})},i.prototype.loadPrefab=function(e){var i=this;return new Promise(function(o,n){i.loadRes(e,cc.Prefab,function(e,t){e?n(e):(t=i.instantiate(t),o(t))})})},i.prototype.instantiate=function(e){var t=cc.instantiate(e);return this.setAutoRelease(e,t,!0),t},i.prototype.loadDragonBones=function(e,a,r){var s=this;return new Promise(function(n,i){s.loadRes(e,dragonBones.DragonBonesAsset,function(e,t){var o;e?i():(o=t,r&&cc.isValid(r)&&(s.setAutoRelease(t,r,!0),s.loadRes(a,dragonBones.DragonBonesAtlasAsset,function(e,t){e?i():(s.setAutoRelease(t,r,!0),n({asset:o,atlasAsset:t}))})))})})},i.prototype.loadDragonBonesByPath=function(e,n,i,a){var r,s=n.getComponent(dragonBones.ArmatureDisplay);s&&(r=this,c.assetLoader.loadResDir(e,function(e,t){if(!(e||t.length<=0)){for(var o in s.dragonAsset=null,s.dragonAtlasAsset=null,t)t[o]instanceof dragonBones.DragonBonesAsset&&(s.dragonAsset=t[o],r.setAutoRelease(t[o],n,!0)),t[o]instanceof dragonBones.DragonBonesAtlasAsset&&(s.dragonAtlasAsset=t[o],r.setAutoRelease(t[o],n,!0));s.armatureName=\"Armature\",i&&(s.playAnimation(s.getAnimationNames(s.getArmatureNames()[0])[0],-1),s.timeScale=1),a&&a()}}))},i.prototype.setAutoRelease=function(e,t,o){o=n.ResUtil.getResKeeper(t,o);return e&&o?(o.autoReleaseRes({asset:e}),e):null},i.prototype.makeUseKey=function(){return\"@useKey_\"+this.globalUseId++},i);function i(){this.globalUseId=0}o.LoaderAdapter=new e"]}