{"version":3,"sources":["assets\\scripts\\NotifyListener.js"],"names":["e","require","t","module","o","exports","a","__spreadArrays","arguments","length","n","Array","i","r","s","Object","defineProperty","value","NotifyListener","c","p","prototype","get","_context","enumerable","configurable","_callback","_prior","l","toString","IsExistHandler","_handlers","callback","context","RegisterHandler","prior","splice","unshift","push","RemoveHandler","Send","call","apply","GetCellStackString","_callStacks","CheckAndPushCallStack","cc","error","warn","PopCallStack","pop","Register","_managers","ListenID","NotifyID","Unregister","IsExist","_sendTimes","_listenId"],"mappings":"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","sourceRoot":"/","sourcesContent":["var e=require;\nvar t=module;\nvar o=exports;\n\"use strict\";var a=this&&this.__spreadArrays||function(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<o;t++)for(var a=arguments[t],r=0,s=a.length;r<s;r++,i++)n[i]=a[r];return n};Object.defineProperty(o,\"__esModule\",{value:!0}),o.NotifyListener=void 0;var r=e(\"ListenID\"),s=e(\"NotifyID\"),c=(Object.defineProperty(p.prototype,\"context\",{get:function(){return this._context},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,\"callback\",{get:function(){return this._callback},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,\"prior\",{get:function(){return this._prior},enumerable:!1,configurable:!0}),p),l=(i.prototype.toString=function(){return\"<ListenerManager id:%{m_id}, times:%{m_sendTimes}>\"},i.prototype.IsExistHandler=function(e,t){var o=this._handlers.length;if(0<o)for(var n=o-1;0<=n;n--){var i=this._handlers[n];if(i.callback===e&&i.context==t)return!0}return!1},i.prototype.RegisterHandler=function(e,t,o){var n=new c(e,t,o),o=this._handlers.length;if(0<o){for(var i=!1,a=o-1;0<=a;a--)if(n.prior>=this._handlers[a].prior){this._handlers.splice(a+1,0,n),i=!0;break}i||this._handlers.unshift(n)}else this._handlers.push(n);return!0},i.prototype.RemoveHandler=function(e,t){var o=-1,n=this._handlers.length;if(0<n)for(var i=n-1;0<=i;i--){var a=this._handlers[i];if(a.callback===e&&a.context==t){o=i;break}}return-1!=o&&(this._handlers.splice(o,1),!0)},i.prototype.Send=function(){for(var e,t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];for(var n=this._handlers.length-1;0<=n;n--){var i=this._handlers[n];(e=i.callback).call.apply(e,a([i.context],t))}},i),e=(n.prototype.GetCellStackString=function(){for(var e=\"[\",t=0,o=this._callStacks;t<o.length;t++)e+=o[t]+\",\";return e+\"]\"},n.prototype.CheckAndPushCallStack=function(e){var t=this._callStacks.length;return 15<=t?(cc.error(\"[NotifyListener].Send out call stack:\"+this.GetCellStackString()+\" msg:\"+e),!1):10<=t?(cc.warn(\"[NotifyListener].Send warning call stack:\"+this.GetCellStackString()+\" msg:\"+e),!1):(this._callStacks.push(e),!0)},n.prototype.PopCallStack=function(){this._callStacks.pop()},n.prototype.Register=function(e,t,o,n){if(null!=t){var i=this._managers[e];if(null==i)i=new l(e),this._managers[e]=i;else if(i.IsExistHandler(t,o))return void cc.error(\"[NotifyListener].Register:\"+(r.ListenID[e]||s.NotifyID[e])+\" callback repeat, skip \"+o);i.RegisterHandler(t,o,n)}else cc.error(\"[NotifyListener].Register:\"+e+\" callback null\")},n.prototype.Unregister=function(e,t,o){var n=this._managers[e];null!=n?n.RemoveHandler(t,o)||cc.warn(\"[NotifyListener].Unregister:\"+e+\" can't find callback:\"+t):cc.warn(\"[NotifyListener].Unregister can't find ListenerManager:\"+e+\" callback:\"+t)},n.prototype.Send=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];var n=this._managers[e];null!=n?this.CheckAndPushCallStack(e)&&(n.Send.apply(n,t),this.PopCallStack()):cc.warn(\"[NotifyListener].Send can't find ListenerManager:\"+e)},n.prototype.IsExist=function(e){return null!=this._managers[e]},n);function n(){this._managers={},this._callStacks=[]}function i(e){this._sendTimes=0,this._listenId=0,this._listenId=e,this._handlers=new Array}function p(e,t,o){this._prior=0,this._sendTimes=0,this._callback=e,this._context=t,this._prior=o}o.NotifyListener=e"]}